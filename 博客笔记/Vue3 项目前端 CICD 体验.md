本文转载于稀土掘金技术社区——PAXTONX

## 1\. 环境准备

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;node&nbsp;--version<br>v18.0.0<br>➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;--version<br>9.6.6<br></code>
```

## 2\. 安装

### 2.1 初始化选项

项目初始化选择。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;init&nbsp;vue@latest<br><br>Vue.js&nbsp;-&nbsp;The&nbsp;Progressive&nbsp;JavaScript&nbsp;Framework<br><br>✔&nbsp;Project&nbsp;name:&nbsp;…&nbsp;app-cicd<br>✔&nbsp;Add&nbsp;TypeScript?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;JSX&nbsp;Support?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;Vue&nbsp;Router&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;Single&nbsp;Page&nbsp;Application&nbsp;development?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;Pinia&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;state&nbsp;management?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;Vitest&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;Unit&nbsp;Testing?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;an&nbsp;End-to-End&nbsp;Testing&nbsp;Solution?&nbsp;›&nbsp;No<br>✔&nbsp;Add&nbsp;ESLint&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;code&nbsp;quality?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br>✔&nbsp;Add&nbsp;Prettier&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;code&nbsp;formatting?&nbsp;…&nbsp;No&nbsp;/&nbsp;Yes<br><br>Scaffolding&nbsp;project&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;/Users/UserName/GitLabProjects/app-cicd...<br><br>Done.&nbsp;Now&nbsp;run:<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">cd</span>&nbsp;app-cicd<br>&nbsp;&nbsp;npm&nbsp;install<br>&nbsp;&nbsp;npm&nbsp;run&nbsp;format<br>&nbsp;&nbsp;npm&nbsp;run&nbsp;dev<br></code>
```

### 2.2 项目运行

按照命令行指示 `npm run dev`。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;run&nbsp;dev<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;dev<br>&gt;&nbsp;vite<br><br>&nbsp;&nbsp;VITE&nbsp;v4.3.5&nbsp;&nbsp;ready&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;1161&nbsp;ms<br><br>&nbsp;&nbsp;➜&nbsp;&nbsp;Local:&nbsp;&nbsp;&nbsp;http://localhost:5173/<br>&nbsp;&nbsp;➜&nbsp;&nbsp;Network:&nbsp;use&nbsp;--host&nbsp;to&nbsp;expose<br>&nbsp;&nbsp;➜&nbsp;&nbsp;press&nbsp;h&nbsp;to&nbsp;show&nbsp;<span data-darkreader-inline-color="">help</span><br>✘&nbsp;[ERROR]&nbsp;Could&nbsp;not&nbsp;resolve&nbsp;<span data-darkreader-inline-color="">"vue-demi"</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;node_modules/pinia/dist/pinia.mjs:6:206:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;│&nbsp;import&nbsp;{&nbsp;getCurrentInstance,&nbsp;inject,&nbsp;toRaw,&nbsp;watch,&nbsp;unref,&nbsp;markRaw,&nbsp;effectScope,&nbsp;ref,&nbsp;isVue2,&nbsp;isRef,&nbsp;isReactive,&nbsp;<span data-darkreader-inline-color="">set</span>,&nbsp;getCurrentScope,&nbsp;onScopeDispose,&nbsp;reactive,&nbsp;toRef,&nbsp;del,&nbsp;nextTick,&nbsp;computed,&nbsp;toRefs&nbsp;}&nbsp;from&nbsp;<span data-darkreader-inline-color="">'vue-demi'</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;╵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~~~~~~~~~~<br><br>&nbsp;&nbsp;You&nbsp;can&nbsp;mark&nbsp;the&nbsp;path&nbsp;<span data-darkreader-inline-color="">"vue-demi"</span>&nbsp;as&nbsp;external&nbsp;to&nbsp;exclude&nbsp;it&nbsp;from&nbsp;the&nbsp;bundle,&nbsp;<span data-darkreader-inline-color="">which</span>&nbsp;will&nbsp;remove&nbsp;this<br>&nbsp;&nbsp;error.<br></code>
```

出现以上错误修改，结合 vue-demi 配置说明<sup data-darkreader-inline-color="">[1]</sup> ，修改 package-lock.json，找到 vue-demi

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">"dependencies"</span>:&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"@vue/devtools-api"</span>:&nbsp;<span data-darkreader-inline-color="">"^6.5.0"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"vue-demi"</span>:&nbsp;<span data-darkreader-inline-color="">"latest"</span>&nbsp;<span data-darkreader-inline-color="">#&nbsp;“*”&nbsp;改为&nbsp;“latest”</span><br>},<br><span data-darkreader-inline-color="">"funding"</span>:&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"url"</span>:&nbsp;<span data-darkreader-inline-color="">"https://github.com/sponsors/posva"</span><br>},<br><span data-darkreader-inline-color="">"peerDependencies"</span>:&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"@vue/composition-api"</span>:&nbsp;<span data-darkreader-inline-color="">"^1.4.0"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"typescript"</span>:&nbsp;<span data-darkreader-inline-color="">"&gt;=4.4.4"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"vue"</span>:&nbsp;<span data-darkreader-inline-color="">"^2.6.14&nbsp;||&nbsp;^3.2.0"</span><br>},<br><span data-darkreader-inline-color="">"peerDependenciesMeta"</span>:&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"@vue/composition-api"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"optional"</span>:&nbsp;<span data-darkreader-inline-color="">true</span><br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"typescript"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"optional"</span>:&nbsp;<span data-darkreader-inline-color="">true</span><br>&nbsp;&nbsp;}<br>},<br><span data-darkreader-inline-color="">#&nbsp;新增配置</span><br><span data-darkreader-inline-color="">"devDependencies"</span>:&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"vue"</span>:&nbsp;<span data-darkreader-inline-color="">"^3.0.0"</span><br>}<br></code>
```

再 `npm run dev` ，成功！

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;run&nbsp;dev<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;dev<br>&gt;&nbsp;vite<br>VITE&nbsp;v4.3.5&nbsp;&nbsp;ready&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;296&nbsp;ms<br><br>&nbsp;&nbsp;➜&nbsp;&nbsp;Local:&nbsp;&nbsp;&nbsp;http://localhost:5173/<br>&nbsp;&nbsp;➜&nbsp;&nbsp;Network:&nbsp;use&nbsp;--host&nbsp;to&nbsp;expose<br>&nbsp;&nbsp;➜&nbsp;&nbsp;press&nbsp;h&nbsp;to&nbsp;show&nbsp;<span data-darkreader-inline-color="">help</span><br></code>
```

浏览器访问 http://localhost:5173/<sup data-darkreader-inline-color="">[2]</sup>

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Untitled.png

## 3\. 项目构建

因为要测试我们自己的网页，小小 build 一下。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;run&nbsp;build<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;build<br>&gt;&nbsp;run-p&nbsp;<span data-darkreader-inline-color="">type</span>-check&nbsp;build-only<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;build-only<br>&gt;&nbsp;vite&nbsp;build<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;<span data-darkreader-inline-color="">type</span>-check<br>&gt;&nbsp;vue-tsc&nbsp;--noEmit&nbsp;-p&nbsp;tsconfig.vitest.json&nbsp;--composite&nbsp;<span data-darkreader-inline-color="">false</span><br><br>vite&nbsp;v4.3.5&nbsp;building&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;production...<br>✓&nbsp;39&nbsp;modules&nbsp;transformed.<br>dist/assets/logo-277e0e97.svg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.28&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.20&nbsp;kB<br>dist/index.html&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.42&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.28&nbsp;kB<br>dist/assets/AboutView-4d995ba2.css&nbsp;&nbsp;&nbsp;0.09&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.10&nbsp;kB<br>dist/assets/index-4646de73.css&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.14&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;1.08&nbsp;kB<br>dist/assets/AboutView-b87b23ac.js&nbsp;&nbsp;&nbsp;&nbsp;0.22&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.20&nbsp;kB<br>dist/assets/index-f6d09a3d.js&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76.05&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;30.49&nbsp;kB<br>✓&nbsp;built&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;586ms<br>node_modules/@types/node/fs/promises.d.ts:199:52&nbsp;-&nbsp;error&nbsp;TS1010:&nbsp;<br><br>199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;device.&nbsp;The&nbsp;specific&nbsp;implementation&nbsp;is&nbsp;o<br><br>Found&nbsp;1&nbsp;error&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;node_modules/@types/node/fs/promises.d.ts:199<br><br>ERROR:&nbsp;<span data-darkreader-inline-color="">"type-check"</span>&nbsp;exited&nbsp;with&nbsp;2.<br></code>
```

出现以上错误，按照提示，仔细查看发现注释符号未闭合。`npm install --save @types/node` 一下，再次 `npm run build` ，成功构建。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;install&nbsp;--save&nbsp;@types/node<br>npm&nbsp;notice&nbsp;Beginning&nbsp;October&nbsp;4,&nbsp;2021,&nbsp;all&nbsp;connections&nbsp;to&nbsp;the&nbsp;npm&nbsp;registry&nbsp;-&nbsp;including&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;package&nbsp;installation&nbsp;-&nbsp;must&nbsp;use&nbsp;TLS&nbsp;1.2&nbsp;or&nbsp;higher.&nbsp;You&nbsp;are&nbsp;currently&nbsp;using&nbsp;plaintext&nbsp;http&nbsp;to&nbsp;connect.&nbsp;Please&nbsp;visit&nbsp;the&nbsp;GitHub&nbsp;blog&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;more&nbsp;information:&nbsp;https://github.blog/2021-08-23-npm-registry-deprecating-tls-1-0-tls-1-1/<br>npm&nbsp;notice&nbsp;Beginning&nbsp;October&nbsp;4,&nbsp;2021,&nbsp;all&nbsp;connections&nbsp;to&nbsp;the&nbsp;npm&nbsp;registry&nbsp;-&nbsp;including&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;package&nbsp;installation&nbsp;-&nbsp;must&nbsp;use&nbsp;TLS&nbsp;1.2&nbsp;or&nbsp;higher.&nbsp;You&nbsp;are&nbsp;currently&nbsp;using&nbsp;plaintext&nbsp;http&nbsp;to&nbsp;connect.&nbsp;Please&nbsp;visit&nbsp;the&nbsp;GitHub&nbsp;blog&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;more&nbsp;information:&nbsp;https://github.blog/2021-08-23-npm-registry-deprecating-tls-1-0-tls-1-1/<br><br>changed&nbsp;1&nbsp;package&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;8s<br><br>111&nbsp;packages&nbsp;are&nbsp;looking&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;funding<br>&nbsp;&nbsp;run&nbsp;`npm&nbsp;fund`&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;details<br>➜&nbsp;&nbsp;app-cicd&nbsp;npm&nbsp;run&nbsp;build<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;build<br>&gt;&nbsp;run-p&nbsp;<span data-darkreader-inline-color="">type</span>-check&nbsp;build-only<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;build-only<br>&gt;&nbsp;vite&nbsp;build<br><br>&gt;&nbsp;app-cicd@0.0.0&nbsp;<span data-darkreader-inline-color="">type</span>-check<br>&gt;&nbsp;vue-tsc&nbsp;--noEmit&nbsp;-p&nbsp;tsconfig.vitest.json&nbsp;--composite&nbsp;<span data-darkreader-inline-color="">false</span><br><br>vite&nbsp;v4.3.5&nbsp;building&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;production...<br>✓&nbsp;39&nbsp;modules&nbsp;transformed.<br>dist/assets/logo-277e0e97.svg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.28&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.20&nbsp;kB<br>dist/index.html&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.42&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.28&nbsp;kB<br>dist/assets/AboutView-4d995ba2.css&nbsp;&nbsp;&nbsp;0.09&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.10&nbsp;kB<br>dist/assets/index-4646de73.css&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.14&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;1.08&nbsp;kB<br>dist/assets/AboutView-b87b23ac.js&nbsp;&nbsp;&nbsp;&nbsp;0.22&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;&nbsp;0.20&nbsp;kB<br>dist/assets/index-f6d09a3d.js&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;76.05&nbsp;kB&nbsp;│&nbsp;gzip:&nbsp;30.49&nbsp;kB<br>✓&nbsp;built&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;578ms<br></code>
```

## 4\. 创建 Jenkinsfile

创建 Jenkinsfile 用于 Jenkins 流水线构建。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">pipeline&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;agent&nbsp;any<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;options&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buildDiscarder(logRotator(<span data-darkreader-inline-color="">numToKeepStr:</span>&nbsp;<span data-darkreader-inline-color="">'5'</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;stages&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stage(<span data-darkreader-inline-color="">'Init'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkout&nbsp;scmGit(<br><span data-darkreader-inline-color="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;branches:</span>&nbsp;[[<span data-darkreader-inline-color="">name:</span>&nbsp;<span data-darkreader-inline-color="">'master'</span>]],<br><span data-darkreader-inline-color="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userRemoteConfigs:</span>&nbsp;[[<span data-darkreader-inline-color="">credentialsId:</span>&nbsp;<span data-darkreader-inline-color="">'ab8e0508-a9f3-4ff3-aa18-0afc27a4df08'</span>,<span data-darkreader-inline-color="">url:</span>&nbsp;<span data-darkreader-inline-color="">'http://192.168.2.159:9080/web/app-cicd.git'</span>]])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'pwd&nbsp;&amp;&amp;&nbsp;ls&nbsp;-l'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stage(<span data-darkreader-inline-color="">'Build'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span data-darkreader-inline-color="">"Build&nbsp;project"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'node&nbsp;--version&nbsp;&amp;&amp;&nbsp;npm&nbsp;--version'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'npm&nbsp;install'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'npm&nbsp;run&nbsp;build'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'ls&nbsp;-l'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stage(<span data-darkreader-inline-color="">'Test'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span data-darkreader-inline-color="">"Test&nbsp;project"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stage(<span data-darkreader-inline-color="">'Deploy'</span>)&nbsp;{&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span data-darkreader-inline-color="">"Deploy&nbsp;project"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>(fileExists(<span data-darkreader-inline-color="">'/Users/username/apps/app-cicd'</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'rm&nbsp;-rf&nbsp;/Users/username/apps/app-cicd'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span data-darkreader-inline-color="">"Deploy&nbsp;project&nbsp;inited"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'mv&nbsp;dist/&nbsp;/Users/username/apps/app-cicd'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sh&nbsp;<span data-darkreader-inline-color="">'ls&nbsp;/Users/username/apps/app-cicd'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span data-darkreader-inline-color="">"Deploy&nbsp;project&nbsp;finished"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code>
```

整体目录结构。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">➜&nbsp;&nbsp;app-cicd&nbsp;git:(master)&nbsp;ls&nbsp;-l<br>total&nbsp;368<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;1432&nbsp;&nbsp;5&nbsp;13&nbsp;11:26&nbsp;Jenkinsfile<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;1763&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;README.md<br>drwxr-xr-x&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;160&nbsp;&nbsp;5&nbsp;13&nbsp;02:39&nbsp;dist<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;38&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;env.d.ts<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;331&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;index.html<br>drwxr-xr-x&nbsp;&nbsp;335&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;10720&nbsp;&nbsp;5&nbsp;13&nbsp;00:44&nbsp;node_modules<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;140945&nbsp;&nbsp;5&nbsp;13&nbsp;02:39&nbsp;package-lock.json<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;1196&nbsp;&nbsp;5&nbsp;13&nbsp;02:39&nbsp;package.json<br>drwxr-xr-x&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;96&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;public<br>drwxr-xr-x&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;288&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;src<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;281&nbsp;&nbsp;5&nbsp;13&nbsp;02:16&nbsp;tsconfig.app.json<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;332&nbsp;&nbsp;5&nbsp;13&nbsp;02:37&nbsp;tsconfig.json<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;241&nbsp;&nbsp;5&nbsp;13&nbsp;02:15&nbsp;tsconfig.node.json<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;153&nbsp;&nbsp;5&nbsp;13&nbsp;02:16&nbsp;tsconfig.vitest.json<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;355&nbsp;&nbsp;5&nbsp;13&nbsp;02:18&nbsp;vite.config.ts<br>-rw-r--r--&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;paxtonx&nbsp;&nbsp;staff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;400&nbsp;&nbsp;5&nbsp;12&nbsp;23:56&nbsp;vitest.config.ts<br></code>
```

## 5\. 结语

将此项目推送到远程 GitLab 仓库中，备用。这里介绍了 Vue3 的一些基本使用，如项目安装、构建，然后介绍了 Jenkinsfile 的编写。时间关系呢，过程较为省略。毕竟大佬说 "Talk is cheap. Show me the code." - Linus Torvalds

## 6\. 参考资料

www.jenkins.io/zh/doc/book…<sup data-darkreader-inline-color="">[3]</sup>

plugins.jenkins.io/git/#plugin…<sup data-darkreader-inline-color="">[4]</sup>

plugins.jenkins.io/nodejs/<sup data-darkreader-inline-color="">[5]</sup>

****因为微信公众号修改规则，如果不标星或点在看，你可能会收不到我公众号文章的推送，请大家将本公众号星标，看完文章后记得点下赞或者在看，谢谢各位！****

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)