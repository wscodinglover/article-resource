## ![Image](https://mmbiz.qpic.cn/mmbiz/e4YNLngAJ87AMkGpHOIpLBBzoLEK3eVzhtt8VFsZ0Zg4mcMcq2F2WVclTOf2KM4MynjE07EzuzGlU9ZhE9a6qA/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

## 阅读本文，你将收获:  

-   通过 chrome 调试工具获得掘金 api
    
-   学会使用 Next.js 服务端渲染
    
-   学会使用 Tailwindcss 来代替原生 css
    
-   在几分钟内就可以部署一个自己的博客
    

## 背景

在开始之前，我想先问下各位，是否有自建博客？很多人选择在社区写博客，比如：掘金，因为在社区写博客能够第一时间被人看到，能够第一时间把知识分享出去，也可以在第一时间得到他们反馈和评论。但在社区写博客也有劣势，比如掘金社区只能写技术文章，并不能完全展现你自己的个性。比如，我是一名前端开发者，在社区看我的文章，只能体现我是一名前端，但同时我又是一名摄影爱好者，这点就没办法体现了，所以这就是自建博客的优势，有非常高的灵活度，可以自己设计想要的风格和模块。但自建博客也有非常大的劣势，第一点就是部署到服务器，有一定花费，其次就是新建博客几乎没流量，所以我们需要在各大社区论坛发表文章，给自己的博客引流。这样一来，就迎来另一个问题，我需要在两个地方发表，这不就是重复劳动吗？

接下来，我就分享下我的方法，通过掘金 API 打造个性博客，只要在掘金发表文章，就会自动同步到自己的博客中。

本文涉及的代码都在这个 Github 仓库\[1\]中。

## 获取掘金 API

打开掘金主页，使用 chrome devtools 很容易可以找到获取文章列表的接口。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

devtools 查看文章列表接口

可以看到接口返回了文章列表数据 `data`，文章总数 `count`，以及当前的分页游标 `cursor`

我们使用 axios 在 nodejs 中请求数据，封装成一个 `getArticles` 方法

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">async</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">getArticles</span><span data-darkreader-inline-color="">(</span>uid<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> string<span data-darkreader-inline-color="">,</span> cursor<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> number <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> res <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">await</span> axios<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">post</span><span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">"https://api.juejin.cn/content_api/v1/article/query_list"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">      cursor<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> cursor <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span> <span data-darkreader-inline-color="">""</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">      sort_type<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> 2<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">      user_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> uid <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span> <span data-darkreader-inline-color="">""</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> res<span data-darkreader-inline-color="">.</span>data<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

devtools 查看文章详情接口

通过查看文章详情页，我们可以复制出接口，使用 axios 修改下，封装成 `getArticleDetail` 方法

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">async</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">getArticleDetail</span><span data-darkreader-inline-color="">(</span>article_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> string<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> res <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">await</span> axios<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">post</span><span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">"https://api.juejin.cn/content_api/v1/article/detail"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">      article_id<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> res<span data-darkreader-inline-color="">.</span>data<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

有了接口，我们就可以用它来搭建自己的博客了。

## 初始化项目

接下来，我们将从零开始创建一个 next 项目，并且选择 Typescript 模板

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left="">npx create-next-app --ts nextjs-juejin-blog<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">cd</span> nextjs-juejin-blog<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">yarn</span> dev<br></span></code>
```

创建项目后，脚手架会帮我们自动执行 `yarn install`。

打开 http://localhost:3000/ 你将看到如下页面

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Next.js 默认页面

## 添加 Tailwind CSS

Tailwind CSS 是一个 CSS 原子类样式框架，我们可以使用现成的样式， 比如`flex`、`text-3xl`、`mr-3` 等等，并且这些 CSS 会在构建的时候，打包出最小的样式文件。没接触过的小伙伴，一开始可能会不习惯，但写完一个项目后，你会爱不释手，因为所有的 CSS 都在组件中，并且一目了然。如果你之前的项目中使用的是 CSS modules，当项目变得复杂后，若没维护好的话，到最后可能会面向 vscode 搜索编程。

在开始之前，你首先需要的 VSCODE 中安装 Tailwind CSS IntelliSense\[2\] 插件，这样在你写 class 的时候，就会有智能提示，鼠标移动到 class 上，也可以看到具体的 CSS 属性。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Tailwind CSS IntelliSense

接下来，我们可以在命令行中运行下面命令

1.  安装 npm 包
    

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">yarn</span> <span data-darkreader-inline-color="">add</span> -D tailwindcss postcss autoprefixer<br></span></code>
```

Tailwindcss 的编译依赖 postcss，autoprefixer 会自动根据 `Can I Use` 标准给 CSS 属性添加浏览器适配前缀。

2.  初始化 `tailwind.config.js` 配置文件
    

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left="">npx tailwindcss init -p<br></span></code>
```

3.  修改 `tailwind.config.js` 配置文件，修改下 `content` 字段构建，修改后，只会打包 content 中匹配文件使用到的 class
    

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> colors <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">require</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">"tailwindcss/colors"</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">/** <span data-darkreader-inline-color="">@type</span> <span data-darkreader-inline-color=""><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">import</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">'tailwindcss'</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">.</span>Config<span data-darkreader-inline-color="">}</span></span> */</span><br></span><span data-darkreader-inline-border-left="">module<span data-darkreader-inline-color="">.</span>exports <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  content<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">[</span><span data-darkreader-inline-color="">"./src/**/*.tsx"</span><span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  theme<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    extend<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">      colors<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">        primary<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> colors<span data-darkreader-inline-color="">.</span>indigo<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">//@ts-ignore</span><br></span><span data-darkreader-inline-border-left="">        gray<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> colors<span data-darkreader-inline-color="">.</span>neutral<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">// TODO: Remove ts-ignore after tw types gets updated to v3</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  plugins<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">[</span><span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">;</span><br></span></code>
```

扩展一个 `primary color`，主色调统一使用这个，方便后续不同的人使用这个模板，可以方便地修改主色

调整下目录，将主要的代码目录都移动到 `src` 下

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">mkdir</span> src<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">mkdir</span> src/components<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">mv</span> styles src<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">mv</span> pages src<br></span></code>
```

这点是个人爱好，你可以遵循原来的目录。

4.  修改 `/src/styles/globals.css` 中的 CSS
    

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">@tailwind base<span data-darkreader-inline-color="">;</span></span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">@tailwind components<span data-darkreader-inline-color="">;</span></span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">@tailwind utilities<span data-darkreader-inline-color="">;</span></span><br></span></code>
```

`@tailwind` 指令会在运行的时候生成默认样式。

## 约定式路由

在 `pages` 或者 `src/pages` 文件夹下建立文件或文件夹，Next.js 会帮我自动创建路由系统。

比如我们创建如下目录结构：

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left="">src/pages<br></span><span data-darkreader-inline-border-left="">├── _app.tsx<br></span><span data-darkreader-inline-border-left="">├── api<br></span><span data-darkreader-inline-border-left="">│   └── hello.ts<br></span><span data-darkreader-inline-border-left="">├── blog<br></span><span data-darkreader-inline-border-left="">│   ├── <span data-darkreader-inline-color="">[</span><span data-darkreader-inline-color="">..</span>.slug<span data-darkreader-inline-color="">]</span>.tsx<br></span><span data-darkreader-inline-border-left="">│   └── page<br></span><span data-darkreader-inline-border-left="">│       └── <span data-darkreader-inline-color="">[</span>page<span data-darkreader-inline-color="">]</span>.tsx<br></span><span data-darkreader-inline-border-left="">├── blog.tsx<br></span><span data-darkreader-inline-border-left="">└── index.tsx<br></span></code>
```

就会创建如下路由

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left="">/api/hello<br></span><span data-darkreader-inline-border-left="">/blog/page/:page<br></span><span data-darkreader-inline-border-left="">/blog/:slug<br></span><span data-darkreader-inline-border-left="">/blog<br></span></code>
```

-   其中 `[page]` 是变量，可以匹配任意值，那么我们的路由就是：`/blog/page/1`;
    
-   `[...slug]` 是多层变量，可以匹配`/blog/a`、`/blog/a/b`、`/blog/a/b/c` 等等。
    

## 服务端渲染

在 Next.js 中，在 Page 页面中可以导出一个 `getServerSideProps` 方法，用于服务端获取数据。

下面我们来实现下博客列表页面，需要获取 `url` 上的翻页参数

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> React <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"react"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> GetServerSidePropsContext <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> getArticles <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"../lib/db"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> InferGetServerSidePropsType <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">default</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">Page</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  data<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  count<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  page<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> InferGetServerSidePropsType<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="">typeof</span> getServerSideProps<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// Render data...</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">console</span><span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">log</span><span data-darkreader-inline-color="">(</span>data<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">// 每次刷新页面都后执行这个函数</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">async</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">getServerSideProps</span><span data-darkreader-inline-color="">(</span>context<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> GetServerSidePropsContext<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> page <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">(</span>context<span data-darkreader-inline-color="">.</span>query<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">?.</span>page <span data-darkreader-inline-color="">as</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span> 1<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 通过 API 请求数据</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> uid <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> process<span data-darkreader-inline-color="">.</span>env<span data-darkreader-inline-color="">.</span>uid<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> <span data-darkreader-inline-color="">{</span> data<span data-darkreader-inline-color="">,</span> count <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">await</span> <span data-darkreader-inline-color="">getArticles</span><span data-darkreader-inline-color="">(</span>uid<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span>page <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> 1<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 10<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 将数据传递到页面上</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">{</span> props<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span> data<span data-darkreader-inline-color="">,</span> count<span data-darkreader-inline-color="">,</span> page<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span>page <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span></code>
```

新建一个`.env` 文件，将掘金的 ID 设置为 uid，我们就可以在 nodejs 中通过`process.env`获取这个值。

此时的 data 就是文章列表数据，复制其中一条数据，使用工具\[3\]将 json 转为 typescript 类型，删除一些我们不需要的字段，我们就可以得到 `Article` 的 ts 类型定义。

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">interface</span> <span data-darkreader-inline-color="">Article</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  article_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  article_info<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> ArticleInfo<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  category<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> Category<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  tags<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> Tag<span data-darkreader-inline-color="">[</span><span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">interface</span> <span data-darkreader-inline-color="">ArticleInfo</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  article_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  cover_image<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  title<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  brief_content<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  content<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  ctime<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  mtime<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  rtime<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  view_count<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  collect_count<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  digg_count<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  comment_count<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">interface</span> <span data-darkreader-inline-color="">Category</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  category_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  category_name<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">interface</span> <span data-darkreader-inline-color="">Tag</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  tag_id<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  tag_name<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

## 文章列表页实现

下面我们用 Tailwind css 来实现下 `ArticleList` 组件

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> React <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"react"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> Link <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next/link"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> Pagination <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"./Pagination"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">default</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">ArticleList</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  articles<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  totalPages<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  currentPage<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> Props<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"max-w-5xl mx-auto"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>ul<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span>articles<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">map</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">(</span>article<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=&gt;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>li key<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>article_id<span data-darkreader-inline-color="">}</span> className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"py-4"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>article className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"xl:gap-2 xl:grid xl:grid-cols-4 xl:items-start"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dl<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dt<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>img<br></span><span data-darkreader-inline-border-left="">                    className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"w-52"</span><br></span><span data-darkreader-inline-border-left="">                    src<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>cover_image<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                    alt<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>title<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dt<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dd className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"text-base font-medium leading-6 text-gray-500 dark:text-gray-400"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>span className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"sr-only"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span>Published on<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>span<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>time<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">new</span> <span data-darkreader-inline-color="">Date</span><span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">                      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span>article<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>ctime <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 1000<br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">toLocaleDateString</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">"zh-CN"</span><span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">                      year<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"numeric"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                      month<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"long"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                      day<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"numeric"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>time<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dd<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dl<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"space-y-3 xl:col-span-3"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>h3 className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"text-2xl font-bold leading-8 tracking-tight"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Link<br></span><span data-darkreader-inline-border-left="">                      className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"text-gray-900 dark:text-gray-100"</span><br></span><span data-darkreader-inline-border-left="">                      href<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog/</span><span data-darkreader-inline-color="">${</span>article<span data-darkreader-inline-color="">.</span>article_id<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                      <span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>title<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>Link<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>h3<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"mt-3 flex flex-wrap"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>tags<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">map</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">(</span>tag<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=&gt;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">                      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Link<br></span><span data-darkreader-inline-border-left="">                        key<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>tag<span data-darkreader-inline-color="">.</span>tag_id<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                        className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"</span><br></span><span data-darkreader-inline-border-left="">                        href<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/tags/</span><span data-darkreader-inline-color="">${</span>tag<span data-darkreader-inline-color="">.</span>tag_name<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                        <span data-darkreader-inline-color="">{</span>tag<span data-darkreader-inline-color="">.</span>tag_name<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>Link<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                    <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"prose max-w-none text-gray-500 dark:text-gray-400"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">                  <span data-darkreader-inline-color="">{</span>article<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>brief_content<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>article<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>li<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>ul<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Pagination totalPages<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>totalPages<span data-darkreader-inline-color="">}</span> currentPage<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>currentPage<span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

-   页面之间的跳转，我们应该使用 `next/link` ，而不是 `<a>`标签，跟 react-router 中的`Link`类似，用户点击链接，并不会全局刷新，而是动态替换网页中的内容。
    
-   Tailwindcss 默认是移动优先，若要适配其他屏幕，可以在样式前面加 md、lg、xl、2xl 等前缀， 上面代码中的 `xl:`代表屏幕宽度大于 1280px 应用的样式。
    

### 翻页组件

`getArticles` 方法中返回了 `count` 文章总数，我们可以根据它和当前的 `currentPage` 封装成一个分页组件，代码如下：

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> Link <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">'next/link'</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">interface</span> <span data-darkreader-inline-color="">Props</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  totalPages<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><br></span><span data-darkreader-inline-border-left="">  currentPage<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">default</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">Pagination</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span> totalPages<span data-darkreader-inline-color="">,</span> currentPage <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> Props<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> prevPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> currentPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> 1 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span> 0<br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> nextPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> currentPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span> 1 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;=</span> totalPages<br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"space-y-2 pt-6 pb-8 md:space-y-5"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>nav className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"flex justify-between"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span>prevPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>button className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"cursor-auto disabled:opacity-50"</span> disabled<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span>prevPage<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            上一页<br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span>prevPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Link href<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>currentPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> 1 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">===</span> 1 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">?</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog/</span><span data-darkreader-inline-color="">`</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog/page/</span><span data-darkreader-inline-color="">${</span>currentPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> 1<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span>上一页<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>Link<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>span<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="">{</span>currentPage<span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">of</span> <span data-darkreader-inline-color="">{</span>totalPages<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>span<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span>nextPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>button className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"cursor-auto disabled:opacity-50"</span> disabled<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span>nextPage<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            下一页<br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span>nextPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Link href<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog/page/</span><span data-darkreader-inline-color="">${</span>currentPage <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span> 1<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span>下一页<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>button<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>Link<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>nav<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">)</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

一起来看下效果吧

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

文章列表页

### 路由重写

这里有一个疑问，其实我们的路由是 `/blog` 和 `blog/page/1` 这 2 个页面应该使用同一个组件，而现在我们需要在 pages 下面定义 2 个页面，那么 Next.js 中有没有可以配置的地方，可以重写路由，使用同一个组件呢？

答案是当然可以的，在 `next.config.js`, 配置 `rewrites` 字段。

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">/** <span data-darkreader-inline-color="">@type</span> <span data-darkreader-inline-color=""><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">import</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">'next'</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">.</span>NextConfig<span data-darkreader-inline-color="">}</span></span> */</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> nextConfig <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  reactStrictMode<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> true<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  swcMinify<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> true<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">async</span> <span data-darkreader-inline-color="">rewrites</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">[</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">        source<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"/blog/:id/edit"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">        destination<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog/create</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">        source<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"/blog/page/:page"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">        destination<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">/blog</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">module<span data-darkreader-inline-color="">.</span>exports <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> nextConfig<span data-darkreader-inline-color="">;</span><br></span></code>
```

比如上面的配置中， 博客编辑页面 `/blog/:id/edit`，使用 `/blog/create`页面来实现，`rewrites` 字段也就是实现了 webpack devserver 的 `proxy` 功能，比如：后端有些接口使用 Java 实现，也可以使用 `rewrites` 实现代理联调。

## 文章详情

实现了文章列表页面，我们应该可以很快写出文章详情页面的页面代码，大致如下：

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> GetServerSidePropsContext <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> ErrorPage <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next/error"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> getArticleDetail <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"../../lib/db"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> InferGetServerSidePropsType <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"next"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">{</span> Article <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"../../types/article"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">default</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">Page</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  data<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  statusCode<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> InferGetServerSidePropsType<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="">typeof</span> getServerSideProps<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">if</span> <span data-darkreader-inline-color="">(</span>statusCode<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>ErrorPage statusCode<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>statusCode<span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">console</span><span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">log</span><span data-darkreader-inline-color="">(</span>data<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">//Render data...</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"prose"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">// 每次刷新页面都后执行这个函数</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">async</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">getServerSideProps</span><span data-darkreader-inline-color="">(</span>context<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> GetServerSidePropsContext<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> slug <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> context<span data-darkreader-inline-color="">.</span>query<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">?.</span>slug <span data-darkreader-inline-color="">as</span> <span data-darkreader-inline-color="">string</span><span data-darkreader-inline-color="">[</span><span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 通过 API 请求数据</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> res <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">await</span> <span data-darkreader-inline-color="">getArticleDetail</span><span data-darkreader-inline-color="">(</span>slug<span data-darkreader-inline-color="">[</span>0<span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">if</span> <span data-darkreader-inline-color="">(</span>res<span data-darkreader-inline-color="">.</span>err_msg <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">===</span> <span data-darkreader-inline-color="">"success"</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">// 将数据传递到页面上</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">{</span> props<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span> data<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> res<span data-darkreader-inline-color="">.</span>data <span data-darkreader-inline-color="">as</span> Article <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 将数据传递到页面上</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">{</span> props<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span> statusCode<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> 404 <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

实现方式跟列表页相同

-   在 `getServerSideProps` 中通过接口获取文章详情；
    
-   接口获取失败的时候返回状态码 404，并且使用`next/error` 显示成统一的错误页面；
    

接下来还有 3 个功能要实现：

1.  markdown 格式转为 html
    
2.  文章详情页面的样式
    
3.  代码高亮
    

### markdown 转 html

请求接口后，得到的 markdown 内容结构如下

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">---</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">highlight</span><span data-darkreader-inline-color="">:</span> monokai<span data-darkreader-inline-color="">-</span>sublime<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">---</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">##</span> 正文内容<br></span></code>
```

所以在解析 markdown 内容之前，还得解析 markdown 的前缀， 在命令行中安装以下 2 个包来实现这个功能。

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">yarn</span> <span data-darkreader-inline-color="">add</span> markdown-it gray-matter<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">yarn</span> <span data-darkreader-inline-color="">add</span> @types/markdown-it --dev<br></span></code>
```

那么我便可以写出编译 markdown 内容的代码了：

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> MarkdownIt <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"markdown-it"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> matter <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"gray-matter"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> md <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">new</span> <span data-darkreader-inline-color="">MarkdownIt</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">export</span> <span data-darkreader-inline-color="">default</span> <span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">Page</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  data<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  statusCode<span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> InferGetServerSidePropsType<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="">typeof</span> getServerSideProps<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">if</span> <span data-darkreader-inline-color="">(</span>statusCode <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span>data<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>Error statusCode<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>statusCode<span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> result <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">matter</span><span data-darkreader-inline-color="">(</span>data<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">?.</span>article_info<span data-darkreader-inline-color="">.</span>mark_content <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span> <span data-darkreader-inline-color="">""</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">return</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"mx-auto"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>header className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"pt-6"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>h1<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="">{</span>data<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">?.</span>article_info<span data-darkreader-inline-color="">.</span>title<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>h1<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dl<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dt className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"sr-only"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span>Published on<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dt<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>dd className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"text-base font-medium leading-6 text-gray-500"</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>time<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">new</span> <span data-darkreader-inline-color="">Date</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span>data<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>ctime <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 1000<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">toLocaleDateString</span><span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="">"zh-CN"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">                  year<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"numeric"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                  month<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"long"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                  day<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">"numeric"</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">                <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">              <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">            <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>time<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dd<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>dl<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">{</span>data<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>cover_image <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>img<br></span><span data-darkreader-inline-border-left="">            className<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">"max-w-full"</span><br></span><span data-darkreader-inline-border-left="">            src<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>data<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>cover_image<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">            alt<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span>data<span data-darkreader-inline-color="">.</span>article_info<span data-darkreader-inline-color="">.</span>title<span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">          <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>header<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span>div<br></span><span data-darkreader-inline-border-left="">        dangerouslySetInnerHTML<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span><span data-darkreader-inline-color="">{</span><span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">          __html<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> md<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">render</span><span data-darkreader-inline-color="">(</span>result<span data-darkreader-inline-color="">.</span>content<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">        <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span>div<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

### 文章详情页面的样式

关于文章详情页的样式，我第一个想到的是github-markdown-css\[4\], 但今天要推荐的还是 Tailwindcss，`@tailwindcss/typography` 是官方提供的插件，可以帮助我们排版美化文章类页面的样式。

首先让我们来安装这个插件

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">yarn</span> <span data-darkreader-inline-color="">add</span>  @tailwindcss/typography<br></span></code>
```

然后在 `tailwind.config.js` 配置文件中加入这个插件:

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left="">module<span data-darkreader-inline-color="">.</span>exports <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  theme<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">// ...</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">  plugins<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">[</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">require</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">'@tailwindcss/typography'</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">// ...</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">,</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

最后我们在文章最外层就可以加入 `prose` 这个样式了，`prose-indigo` 将主色调配置成湛蓝色，当然你可以改为其他 Tailwind css 中提供的默认颜色变量。

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">&lt;</span>article <span data-darkreader-inline-color="">class</span><span data-darkreader-inline-color=""><span data-darkreader-inline-color="">=</span><span data-darkreader-inline-color="">"</span>prose prose-indigo<span data-darkreader-inline-color="">"</span></span><span data-darkreader-inline-color="">&gt;</span><br></span><span data-darkreader-inline-border-left="">  {{ markdown }}<br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">&lt;/</span>article<span data-darkreader-inline-color="">&gt;</span><br></span></code>
```

### 代码高亮

最后一步，代码高亮，我选择使用更加轻量的 prismjs，在 react 使用也很简单，详情可以参考之前写的这篇文章《使用 Prism.js 对代码进行语法高亮》\[5\]。

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> React<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">{</span> useEffect <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"react"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> Prism <span data-darkreader-inline-color="">from</span> <span data-darkreader-inline-color="">"prismjs"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">"prismjs/components/prism-jsx"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">"prismjs/components/prism-tsx"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">"prismjs/components/prism-typescript"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">"prismjs/components/prism-bash"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">import</span> <span data-darkreader-inline-color="">"prismjs/components/prism-markdown"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">...</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">useEffect</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=&gt;</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    Prism<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">highlightAll</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">[</span>data<span data-darkreader-inline-color="">]</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">...</span><br></span></code>
```

完成啦，一起来看下看下实现效果

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

文章详情页面效果

## 个性化首页

到此，我们实现了文章列表页面和文章详情页面，现在还缺一个首页，写到这里，正巧发现今年有个主题是“航天”，那么我们就来设计一个“航天主题“的博客。

-   在爱给网等网站搜索主题相关的 png 免扣素材；
    
-   使用 canvas 粒子制作星空背景；
    

我们先来看下效果，再看实现代码。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

下面是星空代码的实现，主要是实现思路

1.  随机在屏幕屏幕上初始化 800 个粒子
    
2.  使用 `requestAnimationFrame` 在原坐标基础上增加一定速度的系数
    
3.  粒子超出画布重新初始化粒子坐标
    
4.  使用 `ResizeObserver` 监听容器大小，重新初始化画布
    

```
<section><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span><span data-darkreader-inline-bgcolor=""></span></section><code data-darkreader-inline-bgimage=""><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> COUNT <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 800<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> SPEED <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0.1<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">class</span> <span data-darkreader-inline-color="">Star</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  x<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  y<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  z<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  xPrev<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  yPrev<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">constructor</span><span data-darkreader-inline-color="">(</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">,</span> y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">,</span> z <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> x<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> y<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> z<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>xPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> x<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>yPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> y<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">update</span><span data-darkreader-inline-color="">(</span>width<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">,</span> height<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">,</span> speed<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> <span data-darkreader-inline-color="">number</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>xPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>yPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+=</span> speed <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 0.0675<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> <span data-darkreader-inline-color="">(</span>speed <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 0.0225<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> <span data-darkreader-inline-color="">(</span>speed <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> 0.0225<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">// 超出屏幕坐标，初始化为随机值</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">if</span> <span data-darkreader-inline-color="">(</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span>width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span>height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> Math<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">random</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> Math<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">random</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>xPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>yPrev <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">      <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">draw</span><span data-darkreader-inline-color="">(</span>ctx<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> CanvasRenderingContext2D<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    ctx<span data-darkreader-inline-color="">.</span>lineWidth <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>z<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">beginPath</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">moveTo</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>x<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>y<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">lineTo</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>xPrev<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">.</span>yPrev<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">stroke</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> stars <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">Array</span><span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">from</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">{</span> length<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> COUNT <span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=&gt;</span> <span data-darkreader-inline-color="">new</span> <span data-darkreader-inline-color="">Star</span><span data-darkreader-inline-color="">(</span>0<span data-darkreader-inline-color="">,</span> 0<span data-darkreader-inline-color="">,</span> 0<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">let</span> rafId <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> canvas<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> HTMLCanvasElement <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> document<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">querySelector</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">"#canvas"</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> ctx <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> canvas<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">getContext</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">"2d"</span><span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> container <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> ref<span data-darkreader-inline-color="">.</span>current<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">!</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">// 监听 container 容器的变化，设置canvas 画布的大小</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">const</span> resizeObserver <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">new</span> <span data-darkreader-inline-color="">ResizeObserver</span><span data-darkreader-inline-color="">(</span>setup<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">resizeObserver<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">observe</span><span data-darkreader-inline-color="">(</span>container<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">setup</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 缩放屏幕后取消动画</span><br></span><span data-darkreader-inline-border-left="">  rafId <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&gt;</span> 0 <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&amp;&amp;</span> <span data-darkreader-inline-color="">cancelAnimationFrame</span><span data-darkreader-inline-color="">(</span>rafId<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> <span data-darkreader-inline-color="">{</span> clientWidth<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> width<span data-darkreader-inline-color="">,</span> clientHeight<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> height <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> container<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 根据 dpi 缩放画布，保证高清屏显示</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> dpr <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> window<span data-darkreader-inline-color="">.</span>devicePixelRatio <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">||</span> 1<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  canvas<span data-darkreader-inline-color="">.</span>width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> dpr<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  canvas<span data-darkreader-inline-color="">.</span>height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> dpr<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  canvas<span data-darkreader-inline-color="">.</span>style<span data-darkreader-inline-color="">.</span>width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">${</span>width<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">px</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  canvas<span data-darkreader-inline-color="">.</span>style<span data-darkreader-inline-color="">.</span>height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">${</span>height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">+</span> 1<span data-darkreader-inline-color="">}</span><span data-darkreader-inline-color="">px</span><span data-darkreader-inline-color="">`</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">scale</span><span data-darkreader-inline-color="">(</span>dpr<span data-darkreader-inline-color="">,</span> dpr<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 初始化坐标为随机 正负 1/2 width</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">for</span> <span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">const</span> star <span data-darkreader-inline-color="">of</span> stars<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    star<span data-darkreader-inline-color="">.</span>x <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> Math<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">random</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    star<span data-darkreader-inline-color="">.</span>y <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> Math<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">random</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">*</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    star<span data-darkreader-inline-color="">.</span>z <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> 0<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">// 中心点偏移到屏幕中心</span><br></span><span data-darkreader-inline-border-left="">  ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">translate</span><span data-darkreader-inline-color="">(</span>width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">,</span> height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  ctx<span data-darkreader-inline-color="">.</span>fillStyle <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">"rgba(0, 0, 0, 0.4)"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  ctx<span data-darkreader-inline-color="">.</span>strokeStyle <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">"white"</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  rafId <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">requestAnimationFrame</span><span data-darkreader-inline-color="">(</span>frame<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">function</span> <span data-darkreader-inline-color="">frame</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">const</span> <span data-darkreader-inline-color="">{</span> clientWidth<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> width<span data-darkreader-inline-color="">,</span> clientHeight<span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">:</span> height <span data-darkreader-inline-color="">}</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> container<span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">for</span> <span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="">const</span> star <span data-darkreader-inline-color="">of</span> stars<span data-darkreader-inline-color="">)</span> <span data-darkreader-inline-color="">{</span><br></span><span data-darkreader-inline-border-left="">    star<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">update</span><span data-darkreader-inline-color="">(</span>width<span data-darkreader-inline-color="">,</span> height<span data-darkreader-inline-color="">,</span> SPEED<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">    star<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">draw</span><span data-darkreader-inline-color="">(</span>ctx<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  <span data-darkreader-inline-color="">}</span><br></span><span data-darkreader-inline-border-left="">  ctx<span data-darkreader-inline-color="">.</span><span data-darkreader-inline-color="">fillRect</span><span data-darkreader-inline-color="">(</span><span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span>width <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">,</span> <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">-</span>height <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">/</span> 2<span data-darkreader-inline-color="">,</span> width<span data-darkreader-inline-color="">,</span> height<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left="">  rafId <span data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">=</span> <span data-darkreader-inline-color="">requestAnimationFrame</span><span data-darkreader-inline-color="">(</span>frame<span data-darkreader-inline-color="">)</span><span data-darkreader-inline-color="">;</span><br></span><span data-darkreader-inline-border-left=""><span data-darkreader-inline-color="">}</span><br></span></code>
```

## 最后

我将该项目开源在 GitHub 中，你只需要：

-   Fork 该仓库\[6\]后，新建 `.env` 文件，写入 `uid=2189882895384093`, uid 值为掘金主页 url 上的 Id
    
-   修改 `src/config.js` 里的配置为你自己的配置，
    
-   使用 GitHub 账户登录 vercel 导入这个项目， 即可部署成功
    

当然这个项目还存在一些问题，比如：

-   需要进行SEO优化等
    
-   Vercel 部署 Region 选择香港，Serverless 函数访问掘金接口的速度还是有些慢。
    

## 后续

接下来我将继续分享 Next.js 相关的实战文章，欢迎各位关注我的《Next.js 全栈开发实战》 专栏。

-   使用 Strapi CSM系统进行 Next.js 应用全栈开发
    
-   使用 Notion 数据库进行 Next.js 应用全栈开发
    
-   使用 Prisma 和 PostgreSQL 进行 Next.js 应用全栈开发
    
-   使用 NextAuth 实现 Next.js 应用的鉴权与认证
    
-   使用 React query 给 Next.js 应用全局状态管理
    
-   使用 i18next 实现 Next.js 应用国际化
    
-   使用 Playwright 进行 Next.js 应用的端到端测试
    
-   使用 Github actions 给 Next.js 应用创建 CI/CD
    
-   使用 Docker 部署 Next.js 应用
    
-   将 Next.js 应用部署到腾讯云 serverless
    

你对哪块内容比较感兴趣呢？欢迎在评论区留言，感谢您的阅读。

\[1\]nextjs-juejin-blog： _https://github.com/maqi1520/nextjs-juejin-blog_

\[2\]Tailwind CSS IntelliSense： _https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss_

\[3\]json-to-typescript： _https://www.runjs.cool/json-to-typescript_

\[4\]github-markdown-css： _https://github.com/sindresorhus/github-markdown-css_

\[5\]使用 Prism.js 对代码进行语法高亮： _https://juejin.cn/post/7088920558598881293_

\[6\]nextjs-juejin-blog： _https://github.com/maqi1520/nextjs-juejin-blog_