`Extract` 是 TypeScript 中内置的工具类型，它用于从联合类型中提取出符合某个条件的类型，生成一个新的类型。这个工具类型在日常开发中非常有用，它能够帮助我们编写类型安全的代码和更好地实现代码复用。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">/**<br>&nbsp;*&nbsp;Extract&nbsp;from&nbsp;T&nbsp;those&nbsp;types&nbsp;that&nbsp;are&nbsp;assignable&nbsp;to&nbsp;U.<br>&nbsp;*&nbsp;typescript/lib/lib.es5.d.ts<br>&nbsp;*/</span><br><span data-darkreader-inline-color="">type</span>&nbsp;Extract&lt;T,&nbsp;U&gt;&nbsp;=&nbsp;T&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;U&nbsp;?&nbsp;T&nbsp;:&nbsp;never;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;T0&nbsp;=&nbsp;Extract&lt;<span data-darkreader-inline-color="">"a"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"b"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"c"</span>,&nbsp;<span data-darkreader-inline-color="">"a"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"f"</span>&gt;<br><span data-darkreader-inline-color="">//&nbsp;type&nbsp;T0&nbsp;=&nbsp;"a"</span><br></code>
```

本文我将介绍 `Extract` 工具类型的 8 个使用技巧，掌握这些技巧之后，在工作中你就能更好地利用 `Extract` 工具类型来满足不同的使用场景。

### 1.提取指定的基本数据类型

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;MyTypes&nbsp;=&nbsp;<span data-darkreader-inline-color="">string</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br><span data-darkreader-inline-color="">type</span>&nbsp;StringOrNumber&nbsp;=&nbsp;Extract&lt;MyTypes,&nbsp;<span data-darkreader-inline-color="">string</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">number</span>&gt;;<br><br><span data-darkreader-inline-color="">let</span>&nbsp;uid:&nbsp;StringOrNumber&nbsp;=&nbsp;<span data-darkreader-inline-color="">"semlinker"</span>&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br>uid&nbsp;=&nbsp;<span data-darkreader-inline-color="">2024</span>&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br>uid&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Type&nbsp;'boolean'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;'StringOrNumber'.</span><br></code>
```

### 2.提取指定的字符串字面量类型

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;Color&nbsp;=&nbsp;<span data-darkreader-inline-color="">'red'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'green'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'blue'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'yellow'</span>;<br><span data-darkreader-inline-color="">type</span>&nbsp;PrimaryColors&nbsp;=&nbsp;Extract&lt;Color,&nbsp;<span data-darkreader-inline-color="">'red'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'green'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'blue'</span>&gt;;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;primaryColor:&nbsp;PrimaryColors&nbsp;=&nbsp;<span data-darkreader-inline-color="">'blue'</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br><span data-darkreader-inline-color="">const</span>&nbsp;secondaryColor:&nbsp;PrimaryColors&nbsp;=&nbsp;<span data-darkreader-inline-color="">'yellow'</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Type&nbsp;'"yellow"'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;'PrimaryColors'.</span><br></code>
```

### 3.提取可调用的函数类型

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;Value&nbsp;=&nbsp;<span data-darkreader-inline-color="">string</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;|&nbsp;<span>(<span>(<span></span>)&nbsp;=&gt;&nbsp;<span data-darkreader-inline-color="">void</span></span>);<br><span>type</span>&nbsp;<span>CallableFn</span>&nbsp;=&nbsp;<span>Extract</span>&lt;<span>Value</span>,&nbsp;<span>Function</span>&gt;;<br><br><span>const</span>&nbsp;<span>fn1</span>:&nbsp;<span>CallableFn</span>&nbsp;=&nbsp;<span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'semlinker'</span>);&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br><span data-darkreader-inline-color="">const</span>&nbsp;fn2:&nbsp;CallableFn&nbsp;=&nbsp;<span data-darkreader-inline-color="">'semlinker'</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Type&nbsp;'string'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;'()&nbsp;=&gt;&nbsp;void'.</span><br></code>
```

### 4.提取两个联合类型的共有成员

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;TaskStatus&nbsp;=&nbsp;<span data-darkreader-inline-color="">"Todo"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"InProgress"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"Done"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"Archived"</span>;<br><span data-darkreader-inline-color="">type</span>&nbsp;ModuleHandledStatus&nbsp;=&nbsp;<span data-darkreader-inline-color="">"Todo"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"Done"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"OnHold"</span>;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;ModuleSpecificStatus&nbsp;=&nbsp;Extract&lt;TaskStatus,&nbsp;ModuleHandledStatus&gt;;<br><span data-darkreader-inline-color="">//&nbsp;type&nbsp;ModuleSpecificStatus&nbsp;=&nbsp;"Todo"&nbsp;|&nbsp;"Done"</span><br></code>
```

### 5.提取含有特定属性的子类型

### `Animal` 联合类型，包含了多种动物的描述对象，我们想从中提取出含有 "legs" 属性的子类型。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;Animal&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'dog'</span>,&nbsp;legs:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'cat'</span>,&nbsp;legs:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'fish'</span>,&nbsp;fins:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;};<br><br><span data-darkreader-inline-color="">type</span>&nbsp;AnimalsWithLegs&nbsp;=&nbsp;Extract&lt;Animal,&nbsp;{&nbsp;legs:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;}&gt;;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;dog:&nbsp;AnimalsWithLegs&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'dog'</span>,&nbsp;legs:&nbsp;<span data-darkreader-inline-color="">4</span>&nbsp;};&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br><span data-darkreader-inline-color="">const</span>&nbsp;cat:&nbsp;AnimalsWithLegs&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'cat'</span>,&nbsp;legs:&nbsp;<span data-darkreader-inline-color="">4</span>&nbsp;};&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br><span data-darkreader-inline-color="">const</span>&nbsp;fish:&nbsp;AnimalsWithLegs&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'fish'</span>,&nbsp;fins:&nbsp;<span data-darkreader-inline-color="">6</span>&nbsp;};&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Type&nbsp;'"fish"'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;'"dog"&nbsp;|&nbsp;"cat"'.</span><br></code>
```

### 6.提取特定的事件类型

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;EventTypes&nbsp;=&nbsp;MouseEvent&nbsp;|&nbsp;KeyboardEvent&nbsp;|&nbsp;TouchEvent;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;OnlyMouseEvents&nbsp;=&nbsp;Extract&lt;EventTypes,&nbsp;MouseEvent&gt;;<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">handleMouseEvent</span>(<span>event:&nbsp;OnlyMouseEvents</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'Handling&nbsp;mouse&nbsp;event:'</span>,&nbsp;event.clientX,&nbsp;event.clientY);<br>}<br><br><span data-darkreader-inline-color="">document</span>.addEventListener(<span data-darkreader-inline-color="">'click'</span>,&nbsp;<span>(<span>event</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;handleMouseEvent(event);&nbsp;<span data-darkreader-inline-color="">//&nbsp;OK</span><br>});<br><br><span data-darkreader-inline-color="">document</span>.addEventListener(<span data-darkreader-inline-color="">'keydown'</span>,&nbsp;<span>(<span>event</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;handleMouseEvent(event);&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Argument&nbsp;of&nbsp;type&nbsp;'KeyboardEvent'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;parameter&nbsp;of&nbsp;type&nbsp;'MouseEvent'.</span><br>});<br></code>
```

### 7.在类型守卫中使用 Extract

使用 `Extract` 可以在类型守卫中精确地过滤类型，使得在条件分支中可以安全地使用过滤后的类型。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;Pet&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'dog'</span>,&nbsp;bark:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">void</span>&nbsp;}&nbsp;|&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'cat'</span>,&nbsp;meow:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">void</span>&nbsp;};<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">isDog</span>(<span>pet:&nbsp;Pet</span>):&nbsp;<span data-darkreader-inline-color="">pet</span>&nbsp;<span data-darkreader-inline-color="">is</span>&nbsp;<span data-darkreader-inline-color="">Extract</span>&lt;<span data-darkreader-inline-color="">Pet</span>,&nbsp;</span>{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'dog'</span>&nbsp;}&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;pet.type&nbsp;===&nbsp;<span data-darkreader-inline-color="">'dog'</span>;<br>}<br><br><span data-darkreader-inline-color="">const</span>&nbsp;pet1:&nbsp;Pet&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'dog'</span>,&nbsp;bark:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'Woof!'</span>)&nbsp;}<br><span data-darkreader-inline-color="">const</span>&nbsp;pet2:&nbsp;Pet&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">"cat"</span>,&nbsp;meow:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"Meow!"</span>)&nbsp;}<br><span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">`pet1&nbsp;is&nbsp;dog:&nbsp;<span data-darkreader-inline-color="">${isDog(pet1)}</span>`</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;"pet1&nbsp;is&nbsp;dog:&nbsp;true"&nbsp;</span><br><span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">`pet2&nbsp;is&nbsp;dog:&nbsp;<span data-darkreader-inline-color="">${isDog(pet2)}</span>`</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;"pet2&nbsp;is&nbsp;dog:&nbsp;false"&nbsp;</span><br></code>
```

### 8.在函数重载中使用 Extract

在处理 API 请求的场景中，我们需要根据不同的请求类型（如 GET、POST、DELETE）处理不同类型的数据。为了增强类型安全和确保每种请求类型都正确地处理其数据，我们可以利用 TypeScript 的函数重载和 `Extract` 工具类型。

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">type</span>&nbsp;RequestType&nbsp;=&nbsp;<span data-darkreader-inline-color="">'GET'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'POST'</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">'DELETE'</span>;<br><span data-darkreader-inline-color="">type</span>&nbsp;RequestData&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;GET:&nbsp;<span data-darkreader-inline-color="">undefined</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;POST:&nbsp;{&nbsp;body:&nbsp;<span data-darkreader-inline-color="">string</span>&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;DELETE:&nbsp;{&nbsp;resourceId:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;};<br>};<br><br><span data-darkreader-inline-color="">//&nbsp;Function&nbsp;overloading,&nbsp;based&nbsp;on&nbsp;the&nbsp;request&nbsp;type,&nbsp;accepts&nbsp;matching&nbsp;data&nbsp;types</span><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">sendRequest</span>&lt;<span data-darkreader-inline-color="">T</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">RequestType</span>&gt;(<span><span data-darkreader-inline-color="">type</span>:&nbsp;'GET',&nbsp;data:&nbsp;Extract&lt;RequestData[T],&nbsp;<span data-darkreader-inline-color="">undefined</span>&gt;</span>):&nbsp;<span data-darkreader-inline-color="">void</span></span>;<br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">sendRequest</span>&lt;<span data-darkreader-inline-color="">T</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">RequestType</span>&gt;(<span><span data-darkreader-inline-color="">type</span>:&nbsp;'POST',&nbsp;data:&nbsp;Extract&lt;RequestData[T],&nbsp;{&nbsp;body:&nbsp;<span data-darkreader-inline-color="">string</span>&nbsp;}&gt;</span>):&nbsp;<span data-darkreader-inline-color="">void</span></span>;<br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">sendRequest</span>&lt;<span data-darkreader-inline-color="">T</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">RequestType</span>&gt;(<span><span data-darkreader-inline-color="">type</span>:&nbsp;'DELETE',&nbsp;data:&nbsp;Extract&lt;RequestData[T],&nbsp;{&nbsp;resourceId:&nbsp;<span data-darkreader-inline-color="">number</span>&nbsp;}&gt;</span>):&nbsp;<span data-darkreader-inline-color="">void</span></span>;<br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">sendRequest</span>&lt;<span data-darkreader-inline-color="">T</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">RequestType</span>&gt;(<span><span data-darkreader-inline-color="">type</span>:&nbsp;T,&nbsp;data:&nbsp;RequestData[T]</span>):&nbsp;<span data-darkreader-inline-color="">void</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">`Sending&nbsp;<span data-darkreader-inline-color="">${<span data-darkreader-inline-color="">type</span>}</span>&nbsp;request&nbsp;with&nbsp;data:`</span>,&nbsp;data);<br>}<br><br>sendRequest(<span data-darkreader-inline-color="">'GET'</span>,&nbsp;<span data-darkreader-inline-color="">undefined</span>);&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br>sendRequest(<span data-darkreader-inline-color="">'POST'</span>,&nbsp;{&nbsp;body:&nbsp;<span data-darkreader-inline-color="">"semlinker"</span>&nbsp;});&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br>sendRequest(<span data-darkreader-inline-color="">'DELETE'</span>,&nbsp;{&nbsp;resourceId:&nbsp;<span data-darkreader-inline-color="">2024</span>&nbsp;});&nbsp;<span data-darkreader-inline-color="">//&nbsp;Ok</span><br><br>sendRequest(<span data-darkreader-inline-color="">'POST'</span>,&nbsp;{&nbsp;body:&nbsp;<span data-darkreader-inline-color="">2024</span>&nbsp;});&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Type&nbsp;'number'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;'string'.</span><br>sendRequest(<span data-darkreader-inline-color="">'DELETE'</span>,&nbsp;<span data-darkreader-inline-color="">undefined</span>);&nbsp;<span data-darkreader-inline-color="">//&nbsp;Error</span><br><span data-darkreader-inline-color="">//&nbsp;Argument&nbsp;of&nbsp;type&nbsp;'undefined'&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;parameter&nbsp;of&nbsp;type&nbsp;'{&nbsp;resourceId:&nbsp;number;&nbsp;}'.</span></code>
```