## 准备工作

## 你需要知道的网站运行的时间轴

url-->加载html-->加载js-->运行js初始化-->用户触发某个事件--调用了某段js-->明文数据-->加密函数-->加密后的 数据-->send（给服务器发信息{XHR--SEND}） -->接收到服务器数据-->解密函数-->刷新函数-->刷新网页渲染

## 认识浏览器的调试功能

> ❝
> 
> Chrome高阶调试指南：https://zhuanlan.zhihu.com/p/62177097

![Image](https://mmbiz.qpic.cn/mmbiz_png/ic5ERMY2ib5RtBGvqA7quPFE24eMyw1bGIbRC72eibiciaOtiawdqyQYbSDWsnPsJjB915jDjC6oLoEo3SeN8DK7uV9g/640?wx_fmt=png&from=appmsg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

## 如何快速定位加解密函数

-   搜索关键字：登陆时的uri、passwd、Encrypt、Decrypt、.....
    
-   使用一个神奇的脚本提高效率：https://github.com/Cha111Ng1/Tampermonkey\_cha11/blob/main/HookScript.js
    

## 如何利用加解密函数

> ❝
> 
> 有一些加密函数是可以直接扣出来使用的，而有一些却不能，以下是测试过程中我常用的三种方式。

-   复原原加密逻辑
    
-   抠出原有js
    
-   rpc主动调用
    

## 当你懒，你会用什么工具？

> ❝
> 
> 项目地址：https://github.com/Cha111Ng1/Tampermonkey\_cha11
> 
> 一个渗透测试油猴脚本库，整理常用脚本

### HookScript.js

-   一些用于hook的常用断点+禁用无限debug
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;==UserScript==</span><br><span data-darkreader-inline-color="">//&nbsp;@name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;「Hook&nbsp;Script」fuck断点</span><br><span data-darkreader-inline-color="">//&nbsp;@namespace&nbsp;&nbsp;&nbsp;&nbsp;http://tampermonkey.net/</span><br><span data-darkreader-inline-color="">//&nbsp;@version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.1</span><br><span data-darkreader-inline-color="">//&nbsp;@description&nbsp;&nbsp;一些用于hook的常用断点，禁用无限debug</span><br><span data-darkreader-inline-color="">//&nbsp;@author&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cha111Ng1</span><br><span data-darkreader-inline-color="">//&nbsp;@match&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http*://*/*</span><br><span data-darkreader-inline-color="">//&nbsp;@icon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span data-darkreader-inline-color="">//&nbsp;@grant&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</span><br><span data-darkreader-inline-color="">//&nbsp;@run-at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document-start</span><br><span data-darkreader-inline-color="">//&nbsp;==/UserScript==</span><br><br>(<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;取消vm&nbsp;debug</span><br>&nbsp;&nbsp;&nbsp;&nbsp;(<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{}).constructor&nbsp;===&nbsp;<span data-darkreader-inline-color="">Function</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">Function</span>.prototype.constructor&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'use&nbsp;strict'</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;++++++++++++++++++++++++++++++++++++++++++'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;+&nbsp;&nbsp;微信公众号：攻有道&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By:Cha111Ng1&nbsp;&nbsp;&nbsp;&nbsp;+'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;++++++++++++++++++++++++++++++++++++++++++'</span>)<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;userChoices&nbsp;=&nbsp;prompt(<span data-darkreader-inline-color="">"&nbsp;━━━━━━️☠───────&nbsp;\n请选择要启动的插件（多选用逗号分隔）\n&nbsp;━━━━━━️☠───────&nbsp;\n1.&nbsp;JSON.parse调用断点\n2.&nbsp;每当尝试设置document.cookie时断点\n3.每当调用XMLHttpRequest时断点\n4.当发送POST请求时断点"</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(userChoices)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;choicesArray&nbsp;=&nbsp;userChoices.split(<span data-darkreader-inline-color="">','</span>).map(<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>choice</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;choice.trim();<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;choicesArray.forEach(<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>chosenPlugin</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">switch</span>&nbsp;(chosenPlugin)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">'1'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//alert("JSON.parse调用断点");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;_parse&nbsp;=&nbsp;<span data-darkreader-inline-color="">JSON</span>.parse;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">JSON</span>.parse&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>arg</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"[+]「油猴」JSON.parse调用断点:"</span>,arg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">debugger</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;_parse(arg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">'2'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//alert("每当尝试设置document.cookie时断点");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">Object</span>.defineProperty(<span data-darkreader-inline-color="">document</span>,&nbsp;<span data-darkreader-inline-color="">"cookie"</span>,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">set</span>:&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>a</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">debugger</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">'3'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//alert("每当调用XMLHttpRequest.prototype.open时断点");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;_open&nbsp;=&nbsp;XMLHttpRequest.prototype.open;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XMLHttpRequest.prototype.open&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>method,&nbsp;url,&nbsp;async,&nbsp;user,&nbsp;password</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"[+]「油猴」调用XMLHttpRequest.prototype.open断点:"</span>,&nbsp;method,&nbsp;url);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">debugger</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;_open.apply(<span data-darkreader-inline-color="">this</span>,&nbsp;<span data-darkreader-inline-color="">arguments</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">'4'</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//alert("每当调用XMLHttpRequest.prototype.send时断点");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;_send&nbsp;=&nbsp;XMLHttpRequest.prototype.send;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XMLHttpRequest.prototype.send&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span>data</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"[+]「油猴」POST请求发送数据:"</span>,&nbsp;data);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">debugger</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_send.apply(<span data-darkreader-inline-color="">this</span>,&nbsp;<span data-darkreader-inline-color="">arguments</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">default</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(<span data-darkreader-inline-color="">"未知插件："</span>&nbsp;+&nbsp;chosenPlugin);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//alert("没有选择插件");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"[x]没有选择插件"</span>)<br>&nbsp;&nbsp;}<br>})();<br></code>
```

### NoDebugger.js

-   代码中禁用无限Debugger
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;==UserScript==</span><br><span data-darkreader-inline-color="">//&nbsp;@name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;代码中禁用无限Debugger</span><br><span data-darkreader-inline-color="">//&nbsp;@namespace&nbsp;&nbsp;&nbsp;&nbsp;http://tampermonkey.net/</span><br><span data-darkreader-inline-color="">//&nbsp;@version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.1</span><br><span data-darkreader-inline-color="">//&nbsp;@description&nbsp;&nbsp;禁用无限Debugger</span><br><span data-darkreader-inline-color="">//&nbsp;@author&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cha111Ng1</span><br><span data-darkreader-inline-color="">//&nbsp;@match&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http*://*/*</span><br><span data-darkreader-inline-color="">//&nbsp;@icon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span data-darkreader-inline-color="">//&nbsp;@grant&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</span><br><span data-darkreader-inline-color="">//&nbsp;@run-at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document-start</span><br><span data-darkreader-inline-color="">//&nbsp;==/UserScript==</span><br><br>(<span><span data-darkreader-inline-color="">function</span>&nbsp;(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;破解无限Debugger</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;constructorHook&nbsp;=&nbsp;<span data-darkreader-inline-color="">constructor</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;Function.prototype.<span data-darkreader-inline-color="">constructor</span>&nbsp;=&nbsp;function(s)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(s&nbsp;==&nbsp;<span data-darkreader-inline-color="">"debugger"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span></span>)&nbsp;</span>{}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;constructorHook(s);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;setInterval&nbsp;=&nbsp;<span data-darkreader-inline-color="">window</span>.setInterval;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">window</span>.setInterval&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span>fun,&nbsp;time</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;console.log(time,&nbsp;'ddddd',&nbsp;fun.toString());</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(fun&nbsp;&amp;&amp;&nbsp;fun.toString)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;funString&nbsp;=&nbsp;fun.toString();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(funString.indexOf(<span data-darkreader-inline-color="">'debugger'</span>)&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">-1</span>)&nbsp;<span data-darkreader-inline-color="">return</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(funString.indexOf(<span data-darkreader-inline-color="">'window.close'</span>)&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">-1</span>)&nbsp;<span data-darkreader-inline-color="">return</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;setInterval(fun,&nbsp;time);<br>&nbsp;&nbsp;}<br>})()<br></code>
```

### jsrpc.js

-   加解密jsrpc自动化脚本，配合sekiro、Mitmproxy（可选）使用
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;==UserScript==</span><br><span data-darkreader-inline-color="">//&nbsp;@name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsrpc模版</span><br><span data-darkreader-inline-color="">//&nbsp;@namespace&nbsp;&nbsp;&nbsp;&nbsp;http://tampermonkey.net/</span><br><span data-darkreader-inline-color="">//&nbsp;@version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.1</span><br><span data-darkreader-inline-color="">//&nbsp;@description&nbsp;&nbsp;加解密jsrpc自动化脚本</span><br><span data-darkreader-inline-color="">//&nbsp;@author&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cha111Ng1</span><br><span data-darkreader-inline-color="">//&nbsp;@match&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://此处修改为需要使用的域名/*</span><br><span data-darkreader-inline-color="">//&nbsp;@icon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span data-darkreader-inline-color="">//&nbsp;@grant&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</span><br><span data-darkreader-inline-color="">//&nbsp;@run-at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document-start</span><br><span data-darkreader-inline-color="">//&nbsp;==/UserScript==</span><br><br><br><br><span data-darkreader-inline-color="">//&nbsp;需配合Sekiro、Mitmproxy（自行百度）,需要找到加密位置，并把加密函数设置为全局函数，本例子为window._h(data)，在源码加密函数下方插入`if&nbsp;(!window._h){window._h&nbsp;=&nbsp;h}`</span><br><span data-darkreader-inline-color="">//&nbsp;例如：</span><br><span data-darkreader-inline-color="">//&nbsp;加密</span><br><span data-darkreader-inline-color="">//&nbsp;http://127.0.0.1:5612/business-demo/invoke?group=test_cha11&amp;action=encrypt&amp;data=</span><br><span data-darkreader-inline-color="">//&nbsp;解密</span><br><span data-darkreader-inline-color="">//&nbsp;http://127.0.0.1:5612/business-demo/invoke?group=test_cha11&amp;action=decode&amp;data=</span><br><br><br><br>(<span><span data-darkreader-inline-color="">function</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;取消debug</span><br>&nbsp;&nbsp;&nbsp;&nbsp;(<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{}).constructor&nbsp;===&nbsp;<span data-darkreader-inline-color="">Function</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">Function</span>.prototype.constructor&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'use&nbsp;strict'</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;++++++++++++++++++++++++++++++++++++++++++'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;+&nbsp;&nbsp;微信公众号：攻有道&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By:Cha111Ng1&nbsp;&nbsp;&nbsp;&nbsp;+'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'#&nbsp;++++++++++++++++++++++++++++++++++++++++++'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Your&nbsp;code&nbsp;here...</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">SekiroClient</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">this</span>.wsURL=e,<span data-darkreader-inline-color="">this</span>.handlers={},<span data-darkreader-inline-color="">this</span>.socket={},!e)<span data-darkreader-inline-color="">throw</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">"wsURL&nbsp;can&nbsp;not&nbsp;be&nbsp;empty!!"</span>);<span data-darkreader-inline-color="">this</span>.webSocketFactory=<span data-darkreader-inline-color="">this</span>.resolveWebSocketFactory(),<span data-darkreader-inline-color="">this</span>.connect()}SekiroClient.prototype.resolveWebSocketFactory=<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"object"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;<span data-darkreader-inline-color="">window</span>){<span data-darkreader-inline-color="">var</span>&nbsp;e=<span data-darkreader-inline-color="">window</span>.WebSocket?<span data-darkreader-inline-color="">window</span>.WebSocket:<span data-darkreader-inline-color="">window</span>.MozWebSocket;<span data-darkreader-inline-color="">return</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span>o</span>)</span>{<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">t</span>(<span>o</span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket=<span data-darkreader-inline-color="">new</span>&nbsp;e(o)}<span data-darkreader-inline-color="">return</span>&nbsp;t.prototype.close=<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket.close()},t.prototype.onmessage=<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket.onmessage=e},t.prototype.onopen=<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket.onopen=e},t.prototype.onclose=<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket.onclose=e},t.prototype.send=<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">this</span>.mSocket.send(e)},<span data-darkreader-inline-color="">new</span>&nbsp;t(o)}}<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"object"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;weex)<span data-darkreader-inline-color="">try</span>{<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"test&nbsp;webSocket&nbsp;for&nbsp;weex"</span>);<span data-darkreader-inline-color="">var</span>&nbsp;o=weex.requireModule(<span data-darkreader-inline-color="">"webSocket"</span>);<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"find&nbsp;webSocket&nbsp;for&nbsp;weex:"</span>+o),<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">try</span>{o.close()}<span data-darkreader-inline-color="">catch</span>(e){}<span data-darkreader-inline-color="">return</span>&nbsp;o.WebSocket(e,<span data-darkreader-inline-color="">""</span>),o}}<span data-darkreader-inline-color="">catch</span>(e){<span data-darkreader-inline-color="">console</span>.log(e)}<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"object"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;WebSocket)<span data-darkreader-inline-color="">return</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span>o</span>)</span>{<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;e(o)};<span data-darkreader-inline-color="">throw</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">"the&nbsp;js&nbsp;environment&nbsp;do&nbsp;not&nbsp;support&nbsp;websocket"</span>)},SekiroClient.prototype.connect=<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;begin&nbsp;of&nbsp;connect&nbsp;to&nbsp;wsURL:&nbsp;"</span>+<span data-darkreader-inline-color="">this</span>.wsURL);<span data-darkreader-inline-color="">var</span>&nbsp;e=<span data-darkreader-inline-color="">this</span>;<span data-darkreader-inline-color="">try</span>{<span data-darkreader-inline-color="">this</span>.socket=<span data-darkreader-inline-color="">this</span>.webSocketFactory(<span data-darkreader-inline-color="">this</span>.wsURL)}<span data-darkreader-inline-color="">catch</span>(o){<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;create&nbsp;connection&nbsp;failed,reconnect&nbsp;after&nbsp;2s:"</span>+o),<span data-darkreader-inline-color="">void</span>&nbsp;setTimeout(<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{e.connect()},<span data-darkreader-inline-color="">2e3</span>)}<span data-darkreader-inline-color="">this</span>.socket.onmessage(<span><span data-darkreader-inline-color="">function</span>(<span>o</span>)</span>{e.handleSekiroRequest(o.data)}),<span data-darkreader-inline-color="">this</span>.socket.onopen(<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;open&nbsp;a&nbsp;sekiro&nbsp;client&nbsp;connection"</span>)}),<span data-darkreader-inline-color="">this</span>.socket.onclose(<span><span data-darkreader-inline-color="">function</span>(<span>o</span>)</span>{<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;disconnected&nbsp;,reconnection&nbsp;after&nbsp;2s"</span>),setTimeout(<span><span data-darkreader-inline-color="">function</span>(<span></span>)</span>{e.connect()},<span data-darkreader-inline-color="">2e3</span>)})},SekiroClient.prototype.handleSekiroRequest=<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"receive&nbsp;sekiro&nbsp;request:&nbsp;"</span>+e);<span data-darkreader-inline-color="">var</span>&nbsp;o=<span data-darkreader-inline-color="">JSON</span>.parse(e),t=o.__sekiro_seq__;<span data-darkreader-inline-color="">if</span>(o.action){<span data-darkreader-inline-color="">var</span>&nbsp;n=o.action;<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">this</span>.handlers[n]){<span data-darkreader-inline-color="">var</span>&nbsp;s=<span data-darkreader-inline-color="">this</span>.handlers[n],i=<span data-darkreader-inline-color="">this</span>;<span data-darkreader-inline-color="">try</span>{s(o,<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{<span data-darkreader-inline-color="">try</span>{i.sendSuccess(t,e)}<span data-darkreader-inline-color="">catch</span>(e){i.sendFailed(t,<span data-darkreader-inline-color="">"e:"</span>+e)}},<span><span data-darkreader-inline-color="">function</span>(<span>e</span>)</span>{i.sendFailed(t,e)})}<span data-darkreader-inline-color="">catch</span>(e){<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"error:&nbsp;"</span>+e),i.sendFailed(t,<span data-darkreader-inline-color="">":"</span>+e)}}<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">this</span>.sendFailed(t,<span data-darkreader-inline-color="">"no&nbsp;action&nbsp;handler:&nbsp;"</span>+n+<span data-darkreader-inline-color="">"&nbsp;defined"</span>)}<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">this</span>.sendFailed(t,<span data-darkreader-inline-color="">"need&nbsp;request&nbsp;param&nbsp;{action}"</span>)},SekiroClient.prototype.sendSuccess=<span><span data-darkreader-inline-color="">function</span>(<span>e,o</span>)</span>{<span data-darkreader-inline-color="">var</span>&nbsp;t;<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"string"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;o)<span data-darkreader-inline-color="">try</span>{t=<span data-darkreader-inline-color="">JSON</span>.parse(o)}<span data-darkreader-inline-color="">catch</span>(e){(t={}).data=o}<span data-darkreader-inline-color="">else</span><span data-darkreader-inline-color="">"object"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;o?t=o:(t={}).data=o;(<span data-darkreader-inline-color="">Array</span>.isArray(t)||<span data-darkreader-inline-color="">"string"</span>==<span data-darkreader-inline-color="">typeof</span>&nbsp;t)&amp;&amp;(t={<span data-darkreader-inline-color="">data</span>:t,<span data-darkreader-inline-color="">code</span>:<span data-darkreader-inline-color="">0</span>}),t.code?t.code=<span data-darkreader-inline-color="">0</span>:(t.status,t.status=<span data-darkreader-inline-color="">0</span>),t.__sekiro_seq__=e;<span data-darkreader-inline-color="">var</span>&nbsp;n=<span data-darkreader-inline-color="">JSON</span>.stringify(t);<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"response&nbsp;:"</span>+n),<span data-darkreader-inline-color="">this</span>.socket.send(n)},SekiroClient.prototype.sendFailed=<span><span data-darkreader-inline-color="">function</span>(<span>e,o</span>)</span>{<span data-darkreader-inline-color="">"string"</span>!=<span data-darkreader-inline-color="">typeof</span>&nbsp;o&amp;&amp;(o=<span data-darkreader-inline-color="">JSON</span>.stringify(o));<span data-darkreader-inline-color="">var</span>&nbsp;t={};t.message=o,t.status=<span data-darkreader-inline-color="">-1</span>,t.__sekiro_seq__=e;<span data-darkreader-inline-color="">var</span>&nbsp;n=<span data-darkreader-inline-color="">JSON</span>.stringify(t);<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;response&nbsp;:"</span>+n),<span data-darkreader-inline-color="">this</span>.socket.send(n)},SekiroClient.prototype.registerAction=<span><span data-darkreader-inline-color="">function</span>(<span>e,o</span>)</span>{<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"string"</span>!=<span data-darkreader-inline-color="">typeof</span>&nbsp;e)<span data-darkreader-inline-color="">throw</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">"an&nbsp;action&nbsp;must&nbsp;be&nbsp;string"</span>);<span data-darkreader-inline-color="">if</span>(<span data-darkreader-inline-color="">"function"</span>!=<span data-darkreader-inline-color="">typeof</span>&nbsp;o)<span data-darkreader-inline-color="">throw</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">"a&nbsp;handler&nbsp;must&nbsp;be&nbsp;function"</span>);<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"sekiro:&nbsp;register&nbsp;action:&nbsp;"</span>+e),<span data-darkreader-inline-color="">this</span>.handlers[e]=o,<span data-darkreader-inline-color="">this</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;client&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;SekiroClient(<span data-darkreader-inline-color="">"ws://127.0.0.1:5612/business-demo/register?group=test_cha11&amp;clientId="</span>&nbsp;+&nbsp;<span data-darkreader-inline-color="">Math</span>.random());<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;加密接口1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;client.registerAction(<span data-darkreader-inline-color="">"encrypt"</span>,<span><span data-darkreader-inline-color="">function</span>(<span>request,&nbsp;resolve,&nbsp;reject</span>)</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;data&nbsp;=&nbsp;request[<span data-darkreader-inline-color="">'data'</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'[+]「油猴加密」明文：'</span>,data)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;cha&nbsp;=&nbsp;<span data-darkreader-inline-color="">window</span>._v(data)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'[+]「油猴加密」密文：'</span>,cha)<br>&nbsp;&nbsp;&nbsp;&nbsp;resolve(cha);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;解密接口1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;client.registerAction(<span data-darkreader-inline-color="">"decode"</span>,<span><span data-darkreader-inline-color="">function</span>(<span>request,&nbsp;resolve,&nbsp;reject</span>)</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;data&nbsp;=&nbsp;request[<span data-darkreader-inline-color="">'data'</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'[+]「油猴解密」密文：'</span>,data)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;chaa&nbsp;=&nbsp;<span data-darkreader-inline-color="">window</span>._h(data)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'[+]「油猴解密」明文：'</span>,chaa)<br>&nbsp;&nbsp;&nbsp;&nbsp;resolve(chaa);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>})();<br></code>
```

## 实战

## 脚本简单演示

> ❝
> 
> 接下来我们通过一个简单的示例，初步的了解并应用以上的内容，由于是教你偷懒的教程，so这边直接使用最快捷的方式进行操作。

### 例子1:寻找加密位置「HookScript.js」

首先我们使用HookScript.js脚本快速定位发送请求的位置，此处我们选择方式4:

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

相同密码多次重复登陆但其值不一样可判断其加盐了

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

点击堆栈nfn，然后下断点逐步调试，最终获得加密位置，然后可根据该加密流程写对应的脚本进行后续的渗透测试等操作。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

### 例子2:jsrpc主动调用「jsrpc.js」

#### 启动sekiro

> ❝
> 
> 项目地址：https://sekiro.iinti.cn/sekiro-doc

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">#</span><span>&nbsp;win&nbsp;运行</span><br>bin/sekiro.bat<br><span data-darkreader-inline-color="">#</span><span>&nbsp;linux&nbsp;运行</span><br>bin/sekiro.sh<br><span data-darkreader-inline-color="">#</span><span>&nbsp;mac&nbsp;运行</span><br>bin/sekiro<br></code>
```

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

浏览器加载脚本，为方便，所以写成了油猴脚本`jsrpc.js`，加载油猴脚本

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

### 登陆暴力实战「yakit+sekiro+油猴」

本例子：

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

配置完成后启用，并测试：

`http://127.0.0.1:5612/business-demo/invoke?group=xxxxxxxx&action=login&pwd=``<明文>`

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

使用yak进行暴力破解

> ❝
> 
> 官方教程：https://www.yaklang.io/products/Web%20Fuzzer/fuzz-sequence

请求包1配置：

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

请求包2配置：

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

开始执行，即可对密码进行暴力破解，以下为效果演示

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

## 拓展资料

sekiro官方手册：https://sekiro.iinti.cn/sekiro-doc

Chrome高阶调试指南：https://zhuanlan.zhihu.com/p/62177097

项目地址：https://github.com/Cha111Ng1/Tampermonkey\_cha11

___

如有疑问请微信公众号留言，术业有专攻，闻道有先后，获取更多内容点击左下角`阅读原文`

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)