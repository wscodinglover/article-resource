> **模拟面试、简历指导、入职指导、项目指导、答疑解惑**可私信找我~已帮助100+名同学完成改造！

## 前言

大家好，我是林三心，用最通俗易懂的话讲最难的知识点是我的座右铭，基础是进阶的前提是我的初心~

![Image](https://mmbiz.qpic.cn/mmbiz_png/TZL4BdZpLdjtBH47Z0ibFHyCtGNuRdu8CFPtAJplWSpbPRw6AdaEQazpfgamqTxmhIdWovI3gWGt5IfMzOU9u4A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

上一个文章我通过两个小示例，带大家了解了 Vite 插件的开发流程，这一篇文章，我带大家实现一个功能更加高大上的插件~

我们要实现一个功能，在 Vite 打包后，我们想把打包产物的大小、类型、占比，都打印给出来，便于我们分析包的体积，就像下面这种效果：

![Image](https://mmbiz.qpic.cn/mmbiz_png/TZL4BdZpLdjtBH47Z0ibFHyCtGNuRdu8CibqSic3FHGnLU9AFTXiatiaNoKxx7u8JZMA4ydNa1jraUFb5wdfOGgibrVQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

使用方式是这样的：

```
<span data-darkreader-inline-color="">import</span>&nbsp;VitePluginVisualizer&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./vite-plugin-visualizer"</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;defineConfig({<br>&nbsp;&nbsp;base:&nbsp;<span data-darkreader-inline-color="">"./"</span>,<br>&nbsp;&nbsp;plugins:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;vue(),<br>&nbsp;&nbsp;&nbsp;&nbsp;VitePluginVisualizer()<br>&nbsp;&nbsp;],<br>});<br><br>
```

> **完整源码：** https://github.com/sanxin-lin/vite-plugin-visualizer/tree/main/src/vite-plugins/vite-plugin-visualizer

## 思路

我觉得实现这个插件需要分几个步骤：

-   1、打包前记录开始时间
    
-   1、打包后拿到产物、记录打包时间
    
-   2、统计产物的类型、体积
    
-   3、将统计的数据转换成 html，打印到某个 html 文件上
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

> **以下代码都是伪代码，想看完整源码可以去这里：** https://github.com/sanxin-lin/vite-plugin-visualizer/tree/main/src/vite-plugins/vite-plugin-visualizer

## 打包前记录开始时间

上篇文章说了，Vite 有自己的钩子，但他底层是 Rollup，所以也可以使用 Rollup 的钩子，我们可以用到 `buildStart`这个钩子，这个钩子会开始打包时执行

```
<span data-darkreader-inline-color="">//&nbsp;vite-plugin-visualizer.ts</span><br><br><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;{&nbsp;Plugin&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vite"</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;VitePluginVisualizer&nbsp;=&nbsp;(options:&nbsp;IOptions&nbsp;=&nbsp;{}):&nbsp;<span><span>Plugin</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"vite-plugin-visualizer"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;buildStart()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;记录开始时间</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">Date</span>.now();<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;}<br>}<br>
```

## 打包后拿到产物、构建时间

我们需要拿到产物，才能进行计算，那我们要怎么在**打包后**拿到产物呢？这其实是一个时机，也就是打包后这个时机，我们可以用到 `generateBundle`这个钩子，它会在产物产生的时候执行，它接收到的第二个参数 `outputBundle`就是产物的map，是一个映射表的类型

-   key 是产物路径
    
-   value 是产物的一些文件信息，包括代码、名称、依赖的模块
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

```
<span data-darkreader-inline-color="">//&nbsp;vite-plugin-visualizer.ts</span><br><br><span data-darkreader-inline-color="">const</span>&nbsp;VitePluginVisualizer&nbsp;=&nbsp;(options:&nbsp;IOptions&nbsp;=&nbsp;{}):&nbsp;<span><span>Plugin</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"vite-plugin-visualizer"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;buildStart()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;记录开始时间</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">Date</span>.now();<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;generateBundle(_,&nbsp;outputBundle:&nbsp;Record&lt;<span data-darkreader-inline-color="">string</span>,&nbsp;<span data-darkreader-inline-color="">any</span>&gt;)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;doing</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>
```

### 构建时间

只需要获取当前时间戳，减去开始时间即可

```
<span data-darkreader-inline-color="">const</span>&nbsp;VitePluginVisualizer&nbsp;=&nbsp;(options:&nbsp;IOptions&nbsp;=&nbsp;{}):&nbsp;<span><span>Plugin</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"vite-plugin-visualizer"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;buildStart()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;记录开始时间</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startTime&nbsp;=&nbsp;<span data-darkreader-inline-color="">Date</span>.now();<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;generateBundle(_,&nbsp;outputBundle:&nbsp;Record&lt;<span data-darkreader-inline-color="">string</span>,&nbsp;<span data-darkreader-inline-color="">any</span>&gt;)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;time&nbsp;=&nbsp;(<span data-darkreader-inline-color="">Date</span>.now()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>&nbsp;+&nbsp;<span data-darkreader-inline-color="">"s"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>
```

## 统计产物类型、体积

需要遍历所有包，通过名称去判断后缀，判断出这个文件时什么类型，接着需要获取文件信息身上的`code`属性，去计算出`code`的长度，也就是文件的大小

其实遍历去计算大小，统计文件类型，并不难，难的是，要建立一个 tree 树结构，去将文件的依赖关系体现出来

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

这样在后面展示的时候，才能展示出这种效果

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

```
<span data-darkreader-inline-color="">let</span>&nbsp;assetCount&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;chunkCount&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;packageCount&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;totalSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;jsSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;cssSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;imgSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;htmlSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">let</span>&nbsp;fontSize&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;tableData&nbsp;=&nbsp;[];<br><span data-darkreader-inline-color="">for</span>&nbsp;(<span data-darkreader-inline-color="">const</span>&nbsp;[bundleId,&nbsp;bundle]&nbsp;of&nbsp;<span data-darkreader-inline-color="">Object</span>.entries(outputBundle))&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;fileType&nbsp;=&nbsp;path.extname(bundle.fileName).slice(<span data-darkreader-inline-color="">1</span>);<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;size&nbsp;=&nbsp;bundle?.code?.length&nbsp;??&nbsp;bundle?.source?.length&nbsp;??&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(fileType&nbsp;===&nbsp;<span data-darkreader-inline-color="">"js"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;jsSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(fileType&nbsp;===&nbsp;<span data-darkreader-inline-color="">"css"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;cssSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;([<span data-darkreader-inline-color="">"jpg"</span>,&nbsp;<span data-darkreader-inline-color="">"jpeg"</span>,&nbsp;<span data-darkreader-inline-color="">"png"</span>,&nbsp;<span data-darkreader-inline-color="">"gif"</span>,&nbsp;<span data-darkreader-inline-color="">"svg"</span>].includes(fileType))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;imgSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(fileType&nbsp;===&nbsp;<span data-darkreader-inline-color="">"html"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;htmlSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;([<span data-darkreader-inline-color="">"woff"</span>,&nbsp;<span data-darkreader-inline-color="">"woff2"</span>,&nbsp;<span data-darkreader-inline-color="">"ttf"</span>,&nbsp;<span data-darkreader-inline-color="">"otf"</span>].includes(fileType))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;fontSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;dependencyCount&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.keys(bundle.modules&nbsp;??&nbsp;[]).length;<br>&nbsp;&nbsp;totalSize&nbsp;+=&nbsp;size;<br>&nbsp;&nbsp;assetCount++;<br>&nbsp;&nbsp;tableData.push({<br>&nbsp;&nbsp;&nbsp;&nbsp;fileName:&nbsp;bundle.fileName,<br>&nbsp;&nbsp;&nbsp;&nbsp;fileType,<br>&nbsp;&nbsp;&nbsp;&nbsp;size:&nbsp;<span data-darkreader-inline-color="">Number</span>(size&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;dependencyCount,<br>&nbsp;&nbsp;});<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(bundle.type&nbsp;==&nbsp;<span data-darkreader-inline-color="">"chunk"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;packageCount&nbsp;+=&nbsp;dependencyCount;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;modules&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.entries(bundle.modules).map(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>(<span>[id,&nbsp;{&nbsp;renderedLength,&nbsp;code&nbsp;}]:&nbsp;<span data-darkreader-inline-color="">any</span></span>)&nbsp;=&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getLength({&nbsp;id,&nbsp;length:&nbsp;renderedLength,&nbsp;code&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;tree&nbsp;=&nbsp;buildTree(bundleId,&nbsp;modules,&nbsp;mapper);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(tree.children.length&nbsp;===&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;bundleSizes&nbsp;=&nbsp;getLength({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id:&nbsp;bundleId,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length:&nbsp;bundle.code.length,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code:&nbsp;bundle.code,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;facadeModuleId&nbsp;=&nbsp;bundle.facadeModuleId&nbsp;??&nbsp;<span data-darkreader-inline-color="">`<span data-darkreader-inline-color="">${bundleId}</span>-unknown`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;bundleUID&nbsp;=&nbsp;mapper.setNodePart(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bundleId,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;facadeModuleId,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bundleSizes<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;leaf&nbsp;=&nbsp;{&nbsp;name:&nbsp;bundleId,&nbsp;uid:&nbsp;bundleUID&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roots.push(leaf);<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roots.push(tree);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;chunkCount&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.keys(outputBundle).length;<br>}<br>
```

## 打印 html

我们需要将我们统计到的数据，渲染到 html 页面上，我们可以分为几步：

-   1、将数据与 html 字符串拼接
    
-   2、将 html 字符串打印到 html 文件中
    
-   3、打开 html 文件，即可查看
    

我们刚刚看到了，页面上有图标、有表格，这些我们自己写起来很麻烦，所以我们可以利用 vue + echart + elementui 去写，怎么用呢？只需要在拼接 html 字符串的时候，拼接引用这些包的 script 标签即可

-   **vue：** https://unpkg.com/vue@2
    
-   **elementui：** https://unpkg.com/element-ui/lib/index.js
    
-   **echart：** https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js
    

```
<span data-darkreader-inline-color="">//&nbsp;最终数据手收集</span><br><span data-darkreader-inline-color="">const</span>&nbsp;outputBundlestats&nbsp;=&nbsp;{<br>&nbsp;&nbsp;title,<br>&nbsp;&nbsp;bundleObj:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;root,<br>&nbsp;&nbsp;&nbsp;&nbsp;time:&nbsp;(<span data-darkreader-inline-color="">Date</span>.now()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>&nbsp;+&nbsp;<span data-darkreader-inline-color="">"s"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;startTime:&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Date</span>().toLocaleString(),<br>&nbsp;&nbsp;&nbsp;&nbsp;totalSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(totalSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;assetCount,<br>&nbsp;&nbsp;&nbsp;&nbsp;chunkCount,<br>&nbsp;&nbsp;&nbsp;&nbsp;packageCount,<br>&nbsp;&nbsp;&nbsp;&nbsp;jsSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(jsSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;cssSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(cssSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;imageSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(imgSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;htmlSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(htmlSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;fontSize:&nbsp;<span data-darkreader-inline-color="">Number</span>(fontSize&nbsp;/&nbsp;<span data-darkreader-inline-color="">1000</span>).toFixed(<span data-darkreader-inline-color="">2</span>),<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;tableData,<br>&nbsp;&nbsp;treeData:&nbsp;roots,<br>};<br><span data-darkreader-inline-color="">//&nbsp;创建&nbsp;html&nbsp;页面</span><br><span data-darkreader-inline-color="">const</span>&nbsp;html&nbsp;=&nbsp;createHtml(outputBundlestats);<br><span data-darkreader-inline-color="">//&nbsp;写到&nbsp;html&nbsp;文件里</span><br>fs.writeFileSync(path.join(<span data-darkreader-inline-color="">"./"</span>,&nbsp;outputFile),&nbsp;html);<br><br><span data-darkreader-inline-color="">//&nbsp;创建&nbsp;html&nbsp;内容</span><br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;createHtml&nbsp;=&nbsp;<span>(<span>allData:&nbsp;<span data-darkreader-inline-color="">any</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;chartScript&nbsp;=&nbsp;<span data-darkreader-inline-color="">`<br>&lt;!DOCTYPE&nbsp;html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;meta&nbsp;charset="UTF-8"&gt;<br>&lt;!--&nbsp;引入样式&nbsp;--&gt;<br>&lt;link&nbsp;rel="stylesheet"&nbsp;href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"&gt;<br>&lt;style&gt;<br>body&nbsp;{<br>&nbsp;&nbsp;background-color:&nbsp;rgb(246,&nbsp;247,&nbsp;251);<br>}<br>.app&nbsp;{<br>&nbsp;&nbsp;min-height:&nbsp;100vh;<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;flex-direction:&nbsp;column;<br>}<br>.container&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;1280px;<br>&nbsp;&nbsp;margin:&nbsp;0px&nbsp;auto;<br>&nbsp;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);<br>&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(225,&nbsp;223,&nbsp;221);<br>&nbsp;&nbsp;border-radius:&nbsp;2px;<br>&nbsp;&nbsp;padding:&nbsp;0&nbsp;20px&nbsp;20px&nbsp;20px;<br>}<br>.header-wrap&nbsp;{<br>&nbsp;&nbsp;min-height:&nbsp;56px;<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;-webkit-box-align:&nbsp;center;<br>&nbsp;&nbsp;align-items:&nbsp;center;<br>&nbsp;&nbsp;padding:&nbsp;12px&nbsp;20px&nbsp;0px;<br>&nbsp;&nbsp;font-size:&nbsp;16px;<br>&nbsp;&nbsp;line-height:&nbsp;24px;<br>&nbsp;&nbsp;font-weight:&nbsp;600;<br>&nbsp;&nbsp;color:&nbsp;rgb(27,&nbsp;26,&nbsp;25);<br>}<br>.bundle-info&nbsp;{<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;border-radius:&nbsp;4px;<br>&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(225,&nbsp;223,&nbsp;221);<br>&nbsp;&nbsp;padding:&nbsp;12px&nbsp;16px;<br>&nbsp;&nbsp;justify-content:&nbsp;space-between;<br>&nbsp;&nbsp;margin-bottom:&nbsp;20px;<br>}<br>.bundle-info-title&nbsp;{<br>&nbsp;&nbsp;font-size:&nbsp;14px;<br>&nbsp;&nbsp;font-weight:&nbsp;600;<br>}<br>.bundle-overview&nbsp;{<br>&nbsp;&nbsp;flex-wrap:&nbsp;wrap;<br>&nbsp;&nbsp;width:&nbsp;auto;<br>&nbsp;&nbsp;overflow:&nbsp;visible;<br>&nbsp;&nbsp;height:&nbsp;auto;<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;justify-content:&nbsp;space-between;<br>}<br>.bundle-left&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;60%;<br>&nbsp;&nbsp;height:&nbsp;300px;<br>&nbsp;&nbsp;border-radius:&nbsp;4px;<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;justify-content:&nbsp;space-between;<br>&nbsp;&nbsp;align-content:&nbsp;space-between;<br>&nbsp;&nbsp;flex-wrap:&nbsp;wrap;<br>}<br>.bundle-left-item&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;calc(30%&nbsp;-&nbsp;20px);<br>&nbsp;&nbsp;height:&nbsp;calc(45%&nbsp;-&nbsp;20px);<br>&nbsp;&nbsp;border-radius:&nbsp;4px;<br>&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(225,&nbsp;223,&nbsp;221);<br>&nbsp;&nbsp;padding:&nbsp;12px&nbsp;16px;<br>&nbsp;&nbsp;text-align:&nbsp;left;<br>}<br>.kb&nbsp;{<br>&nbsp;&nbsp;font-size:&nbsp;14px;<br>&nbsp;&nbsp;font-weight:&nbsp;400;<br>}<br>.bundle-left-item-title&nbsp;{<br>&nbsp;&nbsp;text-align:&nbsp;left;<br>&nbsp;&nbsp;font-size:&nbsp;14px;<br>&nbsp;&nbsp;font-weight:&nbsp;600;<br>&nbsp;&nbsp;line-height:&nbsp;22px;<br>}<br>.bundle-left-item-value&nbsp;{<br>&nbsp;&nbsp;font-size:&nbsp;28px;<br>&nbsp;&nbsp;font-weight:&nbsp;600;<br>&nbsp;&nbsp;line-height:&nbsp;100px;<br>}<br>.bundle-right&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;calc(40%&nbsp;-&nbsp;20px);<br>&nbsp;&nbsp;border-radius:&nbsp;4px;<br>&nbsp;&nbsp;height:&nbsp;300px;<br>&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(225,&nbsp;223,&nbsp;221);<br>}<br>.pie&nbsp;{<br>&nbsp;&nbsp;position:&nbsp;relative;<br>&nbsp;&nbsp;width:&nbsp;100%;<br>&nbsp;&nbsp;height:&nbsp;100%;<br>&nbsp;&nbsp;padding:&nbsp;20px;<br>}<br>.tablist&nbsp;{<br>&nbsp;&nbsp;margin-top:&nbsp;20px;<br>}<br>.visualization&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;1248px;<br>&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;500px;<br>&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;#eebe77;<br>&nbsp;&nbsp;}<br>&lt;/style&gt;<br>&lt;script&nbsp;src="https://unpkg.com/vue@2"&gt;&lt;/script&gt;<br>&lt;script&nbsp;src="https://unpkg.com/element-ui/lib/index.js"&gt;&lt;/script&gt;<br>&lt;script&nbsp;src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;div&nbsp;class="app"&nbsp;id="app"&gt;<br>&lt;div&nbsp;class="container"&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="header-wrap"&gt;<span data-darkreader-inline-color="">${allData.title}</span>&lt;/div&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="bundle-info"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="bundle-info-title"&gt;project&nbsp;URL：&lt;/span<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;{{&nbsp;bundleObj.root&nbsp;}}<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="bundle-info-title"&gt;built&nbsp;in：&lt;/span&gt;&nbsp;{{&nbsp;bundleObj.time&nbsp;}}<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="bundle-info-title"&gt;built&nbsp;Date:&lt;/span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;bundleObj.startTime&nbsp;}}<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="bundle-overview"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="bundle-left"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class="bundle-left-item"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-for="item&nbsp;in&nbsp;bundleList"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key="item.key"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="bundle-left-item-title"&nbsp;v-if="item.content"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-popover<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ref="item.key"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:title="item.content.title"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width="200"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger="hover"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:content="item.content.content"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-popover&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span v-popover="item.key"&gt;{{&nbsp;item.title&nbsp;}}&lt;/span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;v-else&nbsp;class="bundle-left-item-title"&gt;{{&nbsp;item.title&nbsp;}}&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="bundle-left-item-value"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;bundleObj[item.key]&nbsp;}}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span v-if="!item.content"&nbsp;class="kb"&gt;kb&lt;/span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="bundle-right"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="pie"&nbsp;id="pie"&gt;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&lt;el-tabs&nbsp;type="border-card"&nbsp;class="tablist"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tab-pane&nbsp;label="Visualization"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;id="visualization"&nbsp;class="visualization"&gt;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tab-pane&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-tab-pane&nbsp;label="Assets&nbsp;Statistics"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table&nbsp;:data="tableData"&nbsp;height="400"&nbsp;stripe&nbsp;style="width:&nbsp;100%"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop="fileName"&nbsp;sortable&nbsp;label="file"&nbsp;width="500px"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop="fileType"&nbsp;sortable&nbsp;label="type"&gt;&nbsp;&lt;/el-table-column&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop="size"&nbsp;sortable&nbsp;label="size(kb)"&gt;&nbsp;&lt;/el-table-column&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-table-column&nbsp;prop="dependencyCount"&nbsp;sortable&nbsp;label="dependencyCount"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table-column&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/el-tab-pane&gt;<br>&nbsp;&nbsp;&lt;/el-tabs&gt;<br>&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;/body&gt;<br><br><br>&lt;script&gt;<br>var&nbsp;app&nbsp;=&nbsp;new&nbsp;Vue({<br>&nbsp;&nbsp;el:&nbsp;'#app',<br>&nbsp;&nbsp;data:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;bundleObj:<span data-darkreader-inline-color="">${<span data-darkreader-inline-color="">JSON</span>.stringify(allData.bundleObj)}</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;tableData:<span data-darkreader-inline-color="">${<span data-darkreader-inline-color="">JSON</span>.stringify(allData.tableData)}</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;bundleList:[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'totalSize',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Bundle&nbsp;Size',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;'',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'jsSize',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Initial&nbsp;JS&nbsp;Size',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;'',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'cssSize',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Initial&nbsp;CSS&nbsp;Size',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;'',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'assetCount',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Assets&nbsp;Count',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Webpack&nbsp;ouput&nbsp;assets',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Files&nbsp;emitted&nbsp;by&nbsp;webpack.&lt;br/&gt;&nbsp;Including&nbsp;any&nbsp;JavaScript&nbsp;CSS&nbsp;font&nbsp;Image&nbsp;files&nbsp;which&nbsp;processed&nbsp;by&nbsp;webpack.',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'chunkCount',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Chunks&nbsp;Count',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Chunks',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(1)initial&nbsp;is&nbsp;the&nbsp;main&nbsp;chunk&nbsp;for&nbsp;the&nbsp;entry&nbsp;point.&nbsp;This&nbsp;chunk&nbsp;contains&nbsp;all&nbsp;the&nbsp;modules&nbsp;and&nbsp;its&nbsp;dependencies&nbsp;that&nbsp;you&nbsp;specify&nbsp;for&nbsp;an&nbsp;entry&nbsp;point.initial&nbsp;is&nbsp;the&nbsp;main&nbsp;chunk&nbsp;for&nbsp;the&nbsp;entry&nbsp;point.&nbsp;This&nbsp;chunk&nbsp;contains&nbsp;all&nbsp;the&nbsp;modules&nbsp;and&nbsp;its&nbsp;dependencies&nbsp;that&nbsp;you&nbsp;specify&nbsp;for&nbsp;an&nbsp;entry&nbsp;point.non-initial&nbsp;is&nbsp;a&nbsp;chunk&nbsp;that&nbsp;may&nbsp;be&nbsp;lazy-loaded.&nbsp;It&nbsp;may&nbsp;appear&nbsp;when&nbsp;dynamic&nbsp;import&nbsp;or&nbsp;SplitChunksPlugin&nbsp;is&nbsp;being&nbsp;used.',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;'packageCount',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'Packages&nbsp;Count',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;'node_modules',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:&nbsp;'Third&nbsp;part&nbsp;packages&nbsp;count&nbsp;in&nbsp;node_modules.',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;methods:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;setPieChart(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;基于准备好的dom，初始化echarts实例<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;myChart&nbsp;=&nbsp;echarts.init(document.getElementById('pie'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绘制图表<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myChart.setOption({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text:&nbsp;'Bundle&nbsp;Overview',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tooltip:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger:&nbsp;'item',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;legend:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orient:&nbsp;'vertical',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;'left',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;'30%',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;series:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;'Bundle&nbsp;Overview',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;'pie',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radius:&nbsp;'50%',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;value:&nbsp;<span data-darkreader-inline-color="">${allData.bundleObj.jsSize}</span>,&nbsp;name:&nbsp;'JS'&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;value:&nbsp;<span data-darkreader-inline-color="">${allData.bundleObj.cssSize}</span>,&nbsp;name:&nbsp;'CSS'&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;value:&nbsp;<span data-darkreader-inline-color="">${allData.bundleObj.imageSize}</span>,&nbsp;name:&nbsp;'Image'&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;value:&nbsp;<span data-darkreader-inline-color="">${allData.bundleObj.htmlSize}</span>,&nbsp;name:&nbsp;'Font'&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;value:&nbsp;<span data-darkreader-inline-color="">${allData.bundleObj.fontSize}</span>,&nbsp;name:&nbsp;'Html'&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emphasis:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shadowBlur:&nbsp;10,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shadowOffsetX:&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shadowColor:&nbsp;'rgba(0,&nbsp;0,&nbsp;0,&nbsp;0.5)',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;getLevelOption()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor:&nbsp;'#777',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderWidth:&nbsp;0,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gapWidth:&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upperLabel:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor:&nbsp;'#555',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderWidth:&nbsp;5,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gapWidth:&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emphasis:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor:&nbsp;'#ddd'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorSaturation:&nbsp;[0.35,&nbsp;0.5],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderWidth:&nbsp;5,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gapWidth:&nbsp;1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColorSaturation:&nbsp;0.6<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;setTreeChart(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;基于准备好的dom，初始化echarts实例<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;myChart&nbsp;=&nbsp;echarts.init(document.getElementById('visualization'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;绘制图表<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myChart.setOption({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text:&nbsp;'visualization',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;'center'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tooltip:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formatter:&nbsp;function(info)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;value&nbsp;=&nbsp;info.value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;treePathInfo&nbsp;=&nbsp;info.treePathInfo;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;treePath&nbsp;=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(var&nbsp;i&nbsp;=&nbsp;1;&nbsp;i&nbsp;&lt;&nbsp;treePathInfo.length;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treePath.push(treePathInfo[i].name);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'&lt;div&nbsp;class="tooltip-title"&gt;'&nbsp;+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echarts.format.encodeHTML(treePath.join('/'))&nbsp;+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'&lt;/div&gt;',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'size:&nbsp;'&nbsp;+&nbsp;echarts.format.addCommas(value)&nbsp;+&nbsp;'&nbsp;KB'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].join('');<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;series:&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;'root',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;'treemap',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visibleMin:&nbsp;300,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show:&nbsp;true,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;formatter:&nbsp;'{b}'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upperLabel:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show:&nbsp;true,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;30<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itemStyle:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;borderColor:&nbsp;'#fff'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;levels:&nbsp;this.getLevelOption(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;<span data-darkreader-inline-color="">${<span data-darkreader-inline-color="">JSON</span>.stringify(allData.treeData)}</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;mounted(){<br>&nbsp;&nbsp;&nbsp;&nbsp;this.setPieChart()<br>&nbsp;&nbsp;&nbsp;&nbsp;this.setTreeChart()<br>&nbsp;&nbsp;}<br>})<br>&lt;/script&gt;<br>&lt;/html&gt;<br>&nbsp;&nbsp;`</span>;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;chartScript;<br>};<br><br>
```

## 打包、查看

最后运行打包命令，然后打开生成的 html 文件即可查看

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

> **完整源码：** https://github.com/sanxin-lin/vite-plugin-visualizer/tree/main/src/vite-plugins/vite-plugin-visualizer

## 结语

我是林三心

-   一个待过**小型toG型外包公司、大型外包公司、小公司、潜力型创业公司、大公司**的作死型前端选手；
    
-   一个偏前端的全干工程师；
    
-   一个不正经的掘金作者；
    
-   逗比的B站up主；
    
-   不帅的小红书博主；
    
-   喜欢打铁的篮球菜鸟；
    
-   喜欢历史的乏味少年；
    
-   喜欢rap的五音不全弱鸡
    

如果你想一起学习前端，一起摸鱼，一起研究简历优化，一起研究面试进步，一起交流历史音乐篮球rap，可以来俺的摸鱼学习群哈哈，点这个，有7000多名前端小伙伴在等着一起学习哦 --> 

> 广州的兄弟可以约饭哦，或者约球~我负责打铁，你负责进球，谢谢~