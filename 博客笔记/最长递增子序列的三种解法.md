![Image](https://mmbiz.qpic.cn/mmbiz_gif/icHoerKO3NjIfkxreTDrMPvNKtmPDYHVHsVDUk6PgZv9ucUMdYgiaXcByF56r656hicMjUd1Pgib33c8UbTPT1rbGg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)

最长递增子序列是 **动态规划领域** 的经典例题，相信正在学习中的小伙伴们对此都不陌生；今天就和大家分享一下 [**力扣**](https://leetcode.cn/problemset/?utm_campign=lcsocial&utm_source=wechat_lc01&utm_medium=article&utm_content=20240104&utm_term=expertise) 中 [**300\. 最长递增子序列**](https://leetcode.cn/problems/longest-increasing-subsequence/?utm_campign=lcsocial&utm_source=wechat_lc01&utm_medium=article&utm_content=20240104&utm_term=expertise) 这道题的三种解法。

![Image](https://mmbiz.qpic.cn/mmbiz_png/icHoerKO3NjIfkxreTDrMPvNKtmPDYHVHPbRQdwXMs6M6JicEYlvkn0jic5EIBcjjkWX3iat62hPBKNBkQD9plgiarw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

**介绍**

题目介绍：[**300\. 最长递增子序列**](https://leetcode.cn/problems/longest-increasing-subsequence/?utm_campign=lcsocial&utm_source=wechat_lc01&utm_medium=article&utm_content=20240104&utm_term=expertise) （Longest Increasing Subsequence，LIS)

> 给你一个整数数组 nums ，找到其中最长严格递增子序列的长度。 
> 
> **子序列** 是由数组派生而来的序列，删除（或不删除）数组中的元素而不改变其余元素的顺序。例如，\[3,6,2,7\] 是数组 \[0,3,1,6,2,2,7\] 的子序列。

题目的描述与题目的名字一致，在了解完子序列的具体含义后就可以开始本题的学习了。

![Image](https://mmbiz.qpic.cn/mmbiz_png/icHoerKO3NjIfkxreTDrMPvNKtmPDYHVHEmXl8TcggPldNKhcgMPlHbu1qaxKqQicLAXOoTicjh1MrY7sJCxQkFuw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

**解法**

**1\. 线性动态规划**

-    **分析**
    

我们先从最朴素的角度来进行分析。具体的可以先考虑规模较小的情况，再推导出一般性结论。

如果序列长度只有 1，显然那 LIS 的答案就是 1。

如果序列长度为 2，那答案只有两种情况，1 或 2。1 是两个数字不能构成严格递增的情况，2 则是能够构成严格递增的情况。

如果序列长度为 3，那答案就是 1 或 2 或 3。具体所有情况和长度为 2 类似，全部不严格递增为 1，有先后顺序的两个数字严格递增就是 2，三个数字全部严格递增则为 3。以此类推更长的情况。

然而，随着规模的增加不能再简单的列举所有情况了。但是我们可以总结出若长度为 n，则答案就在区间 \[1, n\] 之间，若长度 +1，即变为 n+1 则答案的最大值可能值也会增加 1。可见前面的状态会影响到后续的答案范围。

因此最朴素的方法就是，处理当前数值时，将前面的所有状态全部扫描一遍，查看是否会增大答案。  

-    **实现**  
    

定义 dp\[i\] 规定第 i 处为考虑到第 i 个元素的 LIS。

第 i 个元素需要从 i 之前的所有已处理状态转移来的。

最后一个细节，每个单个元素可以构成长度为 1 的子序列，也就是 dp 数组的初值。

```
<span><span><span>class</span> <span>Solution</span> {</span></span>
```

-    **复杂度**
    
-    **时间复杂度：O(n^2)**
    
-    **空间复杂度：O(n)**
    

**2. 二分优化动归**

-    **分析**
    

观察第一种方法有没有什么可以优化的切入点？  

显然第一重循环必须存在。  

而第二重循环其实做了很多无用的判断，我们可以从这里进行优化。  

是否有什么办法能迅速找出前驱状态中可替换的最大值呢？  

还是从最简单的情况进行考虑，如果有一个严格递增的有序序列，当前元素比序列的尾端元素还大，那显然直接将当前元素加入序列中可以获得长度 +1 的严格递增序列。  

但如果只是中间一个不大不小的元素呢？

> 例：序列 \[1, 3, 6, 9\] 当前元素 num=4。
> 
> 将序列分为两段 \[1, 3\] 和 \[6, 9\]。
> 
> 可以在前一段的末尾添加 num=4 构成 \[1, 3, 4\] 这样一个长度为 3 的序列。
> 
> 但是在原序列中还存在 \[1, 3, 6\] 这样一个长度为 3 的序列。
> 
> 以贪心的角度考虑，后续的遍历更加希望前面出现的是 4 而不是 6。
> 
> 且若将 6 改为 4 同时能够兼顾已经维护的 9。

-   **实现**
    

先定义一个装载合法序列的容器。

在后续遍历中不断从这个合法序列进行添加和替换。

由于 i=0 时该序列为空，因此直接先将其填入容器构成一个非空容器，同时也能给后续的判断提供便利。

```
<span><span><span>class</span> <span>Solution</span> {</span></span>
```

-    **复杂度**
    
-    **时间复杂度：O(nlogn)**
    
-    **空间复杂度：O(n)**
    

**3. 优化二分写法**

细心的读者发现，其实二分优化的本质就是寻找首个可以存放下的最优位置。

我们可以借助各种语言特性的 api 来使得写法变得更加简洁。

并且在考虑首个元素，也就是序列为空时，也是将该元素插入序列尾端，因此可以写成正常从头到尾的遍历判断。

-   **线性容器**
    

```
<span><span><span>class</span> <span>Solution</span> {</span></span>
```

-    **天然二分的容器**
    

```
<span><span><span>class</span> <span>Solution</span> {</span></span>
```

-    **复杂度**
    
-    **时间复杂度：O(nlogn)**
    
-    **空间复杂度：O(n)**
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

**小结**

从最初始的暴力二重循环，到二分的优化，再考虑将分类讨论的情况合并到一起编写，这些都能考验一位选手对于题意的理解程度和语言的运行程度。

作为一道经典中的经典例题，小伙们们日后遇到的一些困难题目极有可能是拿本题作为基础模型进行改编的，因此需要非常熟练地掌握。

**/BY**

本文作者：天赐细莲

编辑&版式：执盈

声明：本文归 “力扣” 版权所有，如需转载请联系。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

点个在看，少个 Bug