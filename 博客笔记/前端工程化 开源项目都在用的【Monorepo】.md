## å‰è¨€

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ä¸‰å¿ƒï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„è¯è®²æœ€éš¾çš„çŸ¥è¯†ç‚¹æ˜¯æˆ‘çš„åº§å³é“­ï¼ŒåŸºç¡€æ˜¯è¿›é˜¶çš„å‰ææ˜¯æˆ‘çš„åˆå¿ƒ~

## Monorepo

Monorepo æ˜¯ä¸€ç§é¡¹ç›®ä»£ç ç®¡ç†æ–¹å¼ï¼ŒæŒ‡å•ä¸ªä»“åº“ä¸­ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œæœ‰åŠ©äºç®€åŒ–ä»£ç å…±äº«ã€ç‰ˆæœ¬æ§åˆ¶ã€æ„å»ºå’Œéƒ¨ç½²ç­‰æ–¹é¢çš„å¤æ‚æ€§ï¼Œå¹¶æä¾›æ›´å¥½çš„å¯é‡ç”¨æ€§å’Œåä½œæ€§ã€‚

ç®€å•ç†è§£ï¼šæ‰€æœ‰çš„é¡¹ç›®åœ¨ä¸€ä¸ªä»£ç ä»“åº“ä¸­ï¼Œä½†å¹¶ä¸æ˜¯è¯´ä»£ç æ²¡æœ‰ç»„ç»‡çš„éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ã€‚

Monorepo æå€¡äº†å¼€æ”¾ã€é€æ˜ã€å…±äº«çš„ç»„ç»‡æ–‡åŒ–ï¼Œè¿™ç§æ–¹æ³•å·²ç»è¢«å¾ˆå¤šå¤§å‹å…¬å¸å¹¿æ³›ä½¿ç”¨ğŸ§ï¼Œå¦‚ Googleã€Facebook å’Œ Microsoft ç­‰ï¼Œå¾ˆå¤šå‰ç«¯å¸¸ç”¨çš„å¼€æºåº“ä¹Ÿåœ¨ä½¿ç”¨ï¼Œå¦‚Vueã€Reactã€Element-plus

## å‘å±•å†ç¨‹

### Monolithæ—¶æœŸ

å•ä¸€ä»£ç ä»“åº“ï¼šä¼ ç»Ÿçš„å•ä½“å¼åº”ç”¨ç¨‹åºé€šå¸¸å°†æ‰€æœ‰çš„åŠŸèƒ½å’Œæ¨¡å—æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå•ä¸€çš„ä»£ç åº“å’Œéƒ¨ç½²å•å…ƒã€‚è¿™ç§å•ä¸€çš„ä»£ç åº“åŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰éƒ¨åˆ†ï¼Œä»å‰ç«¯ç•Œé¢åˆ°åç«¯é€»è¾‘ï¼Œç”šè‡³åŒ…æ‹¬æ•°æ®åº“æ¨¡å¼å’Œé…ç½®æ–‡ä»¶ç­‰ã€‚ğŸš§

å­˜åœ¨é—®é¢˜ï¼š

-   éš¾ä»¥å®ç°éƒ¨åˆ†æ›´æ–°å’Œç‹¬ç«‹æ‰©å±•çš„çµæ´»æ€§
    
-   é«˜åº¦è€¦åˆï¼Œä»£ç è‡ƒè‚¿
    

### MultiRepoæ—¶æœŸ

å¤šä»£ç ä»“åº“ï¼šå°†ä¸åŒçš„åŠŸèƒ½æ¨¡å—ã€ç»„ä»¶æˆ–æœåŠ¡ç­‰åˆ†åˆ«å­˜æ”¾åœ¨ç‹¬ç«‹çš„ä»“åº“ä¸­ï¼Œå¯ä»¥å•ç‹¬è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€æ„å»ºã€éƒ¨ç½²å’Œå‘å¸ƒï¼Œä½¿å¾—ä¸åŒçš„å›¢é˜Ÿæˆ–å¼€å‘è€…å¯ä»¥ç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•å’Œç»´æŠ¤å„è‡ªçš„æ¨¡å—ï¼Œæ›´å®¹æ˜“å®ç°å¹¶è¡Œå¼€å‘å’Œå›¢é˜Ÿåä½œã€‚ğŸ˜†

å­˜åœ¨é—®é¢˜ï¼š

-   è·¨ä»“åº“å¼€å‘ï¼šå¤šä»“ç»´æŠ¤æˆæœ¬é«˜
    
-   å¼€å‘è°ƒè¯•ï¼šnpmåŒ…(ä¿®æ”¹->å‘å¸ƒ->å®‰è£…æˆæœ¬é«˜)ï¼Œè°ƒè¯•éº»çƒ¦
    
-   ç‰ˆæœ¬ç®¡ç†ï¼šä¾èµ–ç‰ˆæœ¬åŒæ­¥å‡çº§ç®¡ç†éº»çƒ¦
    
-   é¡¹ç›®åŸºå»ºï¼šè„šæ‰‹æ¶å‡çº§ï¼Œæ–°è€é¡¹ç›®è§„èŒƒå¾ˆéš¾ä¿è¯ç»Ÿä¸€
    

### MonoRepoæ—¶æœŸ

éšç€ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œæ¨¡å—ä»“åº“è¶Šæ¥è¶Šå¤šï¼ŒMultiRepoè¿™ç§æ–¹å¼è™½ç„¶ä»ä¸šåŠ¡ä¸Šè§£è€¦äº†ï¼Œä½†å¢åŠ äº†é¡¹ç›®å·¥ç¨‹ç®¡ç†çš„éš¾åº¦ï¼Œéšç€æ¨¡å—ä»“åº“è¾¾åˆ°ä¸€å®šæ•°é‡çº§ï¼Œä¼šæœ‰å‡ ä¸ªé—®é¢˜ï¼šè·¨ä»“åº“ä»£ç éš¾å…±äº«ï¼›åˆ†æ•£åœ¨å•ä»“åº“çš„æ¨¡å—ä¾èµ–ç®¡ç†å¤æ‚ï¼›å¢åŠ äº†æ„å»ºè€—æ—¶ã€‚äºæ˜¯å°†å¤šä¸ªé¡¹ç›®é›†æˆåˆ°ä¸€ä¸ªä»“åº“ä¸‹ï¼Œå…±äº«å·¥ç¨‹é…ç½®ï¼ŒåŒæ—¶åˆå¿«æ·åœ°å…±äº«æ¨¡å—ä»£ç ï¼Œæˆä¸ºè¶‹åŠ¿ğŸ¯

## Monorepoçš„ä¼˜ç‚¹

-   **ä»£ç å¤ç”¨**ï¼šå› ä¸ºå¤šä¸ªé¡¹ç›®å…±äº«ä¸€ä¸ªä»£ç åº“ï¼Œæ‰€ä»¥é¿å…äº†åœ¨ä¸åŒé¡¹ç›®ä¸­é‡å¤ç¼–å†™ç›¸åŒåŠŸèƒ½ä»£ç çš„é—®é¢˜ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚
    
-   **æå‡åä½œæ•ˆç‡**ï¼šå¤šä¸ªé¡¹ç›®åœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å…±äº«ä»£ç å’Œæ–‡æ¡£ï¼Œé¿å…ä¸åŒé¡¹ç›®ä¹‹é—´çš„æ²Ÿé€šå’Œåè°ƒæˆæœ¬ã€‚
    
-   **é›†ä¸­ç®¡ç†**ï¼šMonorepo æ¶æ„ä¸­ï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºéƒ½åœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­ï¼Œæ–¹ä¾¿ç®¡ç†å’Œç›‘æ§ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŒæ—¶å¯¹å¤šä¸ªç‰ˆæœ¬è¿›è¡Œä¿®æ”¹å’Œç»´æŠ¤çš„æƒ…å†µä¸‹ã€‚
    
-   **ç»Ÿä¸€æ„å»º**ï¼šMonorepo çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å¯ä»¥å…±ç”¨ä¸€å¥—æ„å»ºç³»ç»Ÿå’Œå·¥å…·é“¾è¿›è¡Œæ„å»ºå’Œéƒ¨ç½²ï¼Œæå‡äº†æ„å»ºçš„æ•ˆç‡ã€‚
    
-   **å¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜**ï¼šç”±äºæ‰€æœ‰çš„ä»£ç éƒ½åœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­è¿›è¡Œå¼€å‘ï¼Œdebugger å¯ä»¥å¾ˆå¿«æ‰¾å‡ºé—®é¢˜æ‰€åœ¨çš„ä»£ç æ–‡ä»¶å’Œè¡Œæ•°ï¼Œä¾¿äºå¼€å‘äººå‘˜è°ƒè¯•é—®é¢˜ã€‚
    
-   **ä¸€ä¸ªç‰ˆæœ¬**ï¼šæ— éœ€æ‹…å¿ƒå› ä¸ºé¡¹ç›®ä¾èµ–äºç¬¬ä¸‰æ–¹åº“çš„å†²çªç‰ˆæœ¬è€Œå¯¼è‡´çš„ä¸å…¼å®¹é—®é¢˜ã€‚
    

## Monorepoçš„å‘

### å¹½çµä¾èµ–

npm/yarn å®‰è£…ä¾èµ–æ—¶ï¼Œå­˜åœ¨ä¾èµ–æå‡ï¼ŒæŸä¸ªé¡¹ç›®ä½¿ç”¨çš„ä¾èµ–ï¼Œå¹¶æ²¡æœ‰åœ¨å…¶ package.json ä¸­å£°æ˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸º â€œå¹½çµä¾èµ–â€ï¼›éšç€é¡¹ç›®è¿­ä»£ï¼Œè¿™ä¸ªä¾èµ–ä¸å†è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œä¸å†è¢«å®‰è£…ï¼Œä½¿ç”¨å¹½çµä¾èµ–çš„é¡¹ç›®ï¼Œä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°ä¾èµ–è€ŒæŠ¥é”™ã€‚ğŸ˜¤

åŸºäº npm/yarn çš„ Monorepo æ–¹æ¡ˆï¼Œä¾ç„¶å­˜åœ¨ â€œå¹½çµä¾èµ–â€ é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ pnpm å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜

### ä¾èµ–å®‰è£…è€—æ—¶é•¿

MonoRepo ä¸­æ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ package.json ä¾èµ–åˆ—è¡¨ï¼Œéšç€ MonoRepo ä¸­ä¾èµ–æ€»æ•°çš„å¢é•¿ï¼Œæ¯æ¬¡Â `install`Â æ—¶ï¼Œè€—æ—¶ä¼šè¾ƒé•¿ã€‚ğŸ˜­

ç›¸åŒç‰ˆæœ¬ä¾èµ–æå‡åˆ° Monorepo æ ¹ç›®å½•ä¸‹ï¼Œå‡å°‘å†—ä½™ä¾èµ–å®‰è£…ï¼›ä½¿ç”¨ pnpm æŒ‰éœ€å®‰è£…åŠä¾èµ–ç¼“å­˜ã€‚

## pnpm åŒ…ç®¡ç†

### ä¸ºä»€ä¹ˆé€‰æ‹©pnpm

`Monorepo`Â çš„å•ä»“åˆ†æ¨¡å—çš„è¦æ±‚ï¼Œä½¿å¾—ä»“åº“å†…çš„æ¨¡å—ä¸ä»…è¦å¤„ç†ä¸å¤–éƒ¨æ¨¡å—çš„å…³ç³»ï¼Œè¿˜è¦å¤„ç†å†…éƒ¨ä¹‹é—´ç›¸äº’çš„ä¾èµ–å…³ç³»ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªå¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·å¸®åŠ©å¤„ç†è¿™äº›ä»»åŠ¡ã€‚

ç›®å‰å‰ç«¯åŒ…ç®¡ç†çš„æ ¹åŸºæ˜¯ npmï¼Œåœ¨å…¶åŸºç¡€ä¸Šè¡ç”Ÿå‡ºäº† yarnã€pnpmã€‚åœ¨ 2022 å¹´ä»¥åï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ pnpm æ¥ç®¡ç†é¡¹ç›®ä¾èµ–ã€‚`pnpm`Â è¦†ç›–äº†Â `npm`ã€`yarn`Â çš„å¤§éƒ¨åˆ†èƒ½åŠ›ï¼Œä¸”å¤šä¸ªç»´åº¦çš„ä½“éªŒéƒ½æœ‰å¤§å¹…åº¦æå‡ã€‚ğŸ’¯

> pnpm æ˜¯ä¸€æ¬¾å¿«é€Ÿã€é«˜æ•ˆä½¿ç”¨ç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å™¨ã€‚

å®ƒå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

-   é€Ÿåº¦å¿«ï¼šå¤šæ•°åœºæ™¯ä¸‹ï¼Œå®‰è£…é€Ÿåº¦æ˜¯Â `npm/yarn`Â çš„ 2 - 3 å€ã€‚
    
-   åŸºäºå†…å®¹å¯»å€ï¼šç¡¬é“¾æ¥èŠ‚çº¦ç£ç›˜ç©ºé—´ï¼Œä¸ä¼šé‡å¤å®‰è£…åŒä¸€ä¸ªåŒ…ï¼Œå¯¹äºåŒä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬é‡‡å–å¢é‡å†™å…¥æ–°æ–‡ä»¶çš„ç­–ç•¥ã€‚
    
-   ä¾èµ–è®¿é—®å®‰å…¨æ€§å¼ºï¼šä¼˜åŒ–äº†Â `node_modules`Â çš„æ‰å¹³ç»“æ„ï¼Œæä¾›äº†é™åˆ¶**ä¾èµ–çš„éæ³•è®¿é—®(å¹½çµä¾èµ–)**Â çš„æ‰‹æ®µã€‚
    
-   æ”¯æŒÂ `Monorepo`ï¼šè‡ªèº«èƒ½åŠ›å°±å¯¹Â `Monorepo`Â å·¥ç¨‹æ¨¡å¼æä¾›äº†æœ‰åŠ›çš„æ”¯æŒã€‚åœ¨è½»é‡åœºæ™¯ä¸‹ï¼Œæ— éœ€é›†æˆÂ `lerna ``Turborepo`Â ç­‰å·¥å…·ã€‚
    

### workspace æ¨¡å¼

`pnpm`Â æ”¯æŒÂ `Monorepo`Â æ¨¡å¼çš„å·¥ä½œæœºåˆ¶å«åšÂ `workspace(å·¥ä½œç©ºé—´)`ã€‚

å®ƒè¦æ±‚åœ¨ä»£ç ä»“çš„æ ¹ç›®å½•ä¸‹å­˜æœ‰Â `pnpm-workspace.yaml`Â æ–‡ä»¶æŒ‡å®šå“ªäº›ç›®å½•ä½œä¸ºç‹¬ç«‹çš„å·¥ä½œç©ºé—´ï¼Œè¿™ä¸ªå·¥ä½œç©ºé—´å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå­æ¨¡å—æˆ–è€…Â `npm`Â åŒ…ã€‚

ä¾‹å¦‚ä»¥ä¸‹çš„Â `pnpm-workspace.yaml`Â æ–‡ä»¶å®šä¹‰ï¼š`a`Â ç›®å½•ã€`b`Â ç›®å½•ã€`c`Â ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ï¼Œéƒ½ä¼šå„è‡ªè¢«è§†ä¸ºç‹¬ç«‹çš„æ¨¡å—ã€‚

```
packages:<br>&nbsp;&nbsp;-&nbsp;a<br>&nbsp;&nbsp;-&nbsp;b<br>&nbsp;&nbsp;-&nbsp;c<span data-darkreader-inline-color="">/*<br></span>
```

```
ğŸ“¦my-project<br>&nbsp;â”£&nbsp;ğŸ“‚a<br>&nbsp;â”ƒ&nbsp;â”—&nbsp;ğŸ“œpackage.json<br>&nbsp;â”£&nbsp;ğŸ“‚b<br>&nbsp;â”ƒ&nbsp;â”—&nbsp;ğŸ“œpackage.json<br>&nbsp;â”£&nbsp;ğŸ“‚c<br>&nbsp;â”ƒ&nbsp;â”£&nbsp;ğŸ“‚c<span data-darkreader-inline-color="">-1</span><br>&nbsp;â”ƒ&nbsp;â”ƒ&nbsp;â”—&nbsp;ğŸ“œpackage.json<br>&nbsp;â”ƒ&nbsp;â”£&nbsp;ğŸ“‚c<span data-darkreader-inline-color="">-2</span><br>&nbsp;â”ƒ&nbsp;â”ƒ&nbsp;â”—&nbsp;ğŸ“œpackage.json<br>&nbsp;â”ƒ&nbsp;â”—&nbsp;ğŸ“‚c<span data-darkreader-inline-color="">-3</span><br>&nbsp;â”ƒ&nbsp;&nbsp;&nbsp;â”—&nbsp;ğŸ“œpackage.json<br>&nbsp;â”£&nbsp;ğŸ“œpackage.json<br>&nbsp;â”£&nbsp;ğŸ“œpnpm-workspace.yaml<br>
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`pnpm`Â å¹¶ä¸æ˜¯é€šè¿‡ç›®å½•åç§°ï¼Œè€Œæ˜¯é€šè¿‡ç›®å½•ä¸‹Â `package.json`Â æ–‡ä»¶çš„Â `name`Â å­—æ®µæ¥è¯†åˆ«ä»“åº“å†…çš„åŒ…ä¸æ¨¡å—çš„ã€‚

## Monorepo ç¯å¢ƒæ­å»º

é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬äº†è§£äº†Monorepoçš„ä¼˜ç‚¹ä»¥åŠé€‰æ‹©pnpmçš„åŸå› 

é‚£ä¹ˆåˆ°åº•è¯¥å¦‚ä½•æ­å»ºMonorepoå‘¢ğŸ¤”

ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡Element Plusæ¥äº†è§£å¦‚ä½•æ­å»º Monorepo ç¯å¢ƒğŸ¤

#### é¦–å…ˆè¿›è¡Œå…¨å±€å®‰è£… pnpm

```
npm&nbsp;install&nbsp;pnpm&nbsp;-g<br>
```

ç„¶ååœ¨é¡¹ç›®ä¸‹ä½¿ç”¨ pnpm init è¿›è¡Œ package.json çš„åˆå§‹åŒ–ã€‚è¿™è·Ÿ npm init æ˜¯ä¸€æ ·çš„ã€‚

```
pnpm&nbsp;init<br>
```

å¾—åˆ° package.json åˆå§‹å†…å®¹ï¼Œç„¶åæŠŠ package.json ä¸­çš„ name å±æ€§åˆ æ‰ï¼Œå¹¶ä¸”æ·»åŠ ä¸€ä¸ªÂ `"private": true`Â å±æ€§ï¼Œå› ä¸ºå®ƒæ˜¯ä¸éœ€è¦å‘å¸ƒçš„ã€‚

```
{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"private"</span>:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"version"</span>:&nbsp;<span data-darkreader-inline-color="">"1.0.0"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"description"</span>:&nbsp;<span data-darkreader-inline-color="">""</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"main"</span>:&nbsp;<span data-darkreader-inline-color="">"index.js"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"scripts"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"test"</span>:&nbsp;<span data-darkreader-inline-color="">"echo&nbsp;"</span><span data-darkreader-inline-color="">Error</span>:&nbsp;no&nbsp;test&nbsp;specified<span data-darkreader-inline-color="">"&nbsp;&amp;&amp;&nbsp;exit&nbsp;1"</span><br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"keywords"</span>:&nbsp;[],<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"author"</span>:&nbsp;<span data-darkreader-inline-color="">""</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"license"</span>:&nbsp;<span data-darkreader-inline-color="">"ISC"</span><br>}<br>
```

#### é…ç½® pnpm çš„ monorepo å·¥ä½œåŒº

åœ¨æˆ‘ä»¬è¿™ä¸ªä»“åº“ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œå°±å¯ä»¥é‡‡ç”¨ pnpm çš„ monorepoã€‚æˆ‘ä»¬åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª pnpm-workspace.yaml æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ pnpm-workspace.yaml é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™ä¸ªä»“åº“ä¸­æœ‰å¤šå°‘ä¸ªé¡¹ç›®ã€‚

```
packages:<br>&nbsp;&nbsp;-&nbsp;play&nbsp;#&nbsp;å­˜æ”¾ç»„ä»¶æµ‹è¯•çš„ä»£ç <br>&nbsp;&nbsp;-&nbsp;docs&nbsp;#&nbsp;å­˜æ”¾ç»„ä»¶æ–‡æ¡£<br>&nbsp;&nbsp;-&nbsp;packages<span data-darkreader-inline-color="">/*&nbsp;#&nbsp;packages&nbsp;ç›®å½•ä¸‹éƒ½æ˜¯ç»„ä»¶åŒ…<br></span>
```

å¯ä»¥åœ¨ play ç›®å½•ä¸­è¿è¡Œæˆ‘ä»¬å†™å¥½çš„ç»„ä»¶ï¼Œç›¸å½“äºä¸€ä¸ªæµ‹è¯•ç¯å¢ƒï¼Œåœ¨å¼€å‘çš„æ—¶å€™å¯ä»¥çŸ¥é“æ•ˆæœæ˜¯å¦è¾¾åˆ°é¢„æœŸï¼›è¿˜éœ€è¦ä¸€ä¸ªç»„ä»¶è¯´æ˜æ–‡æ¡£çš„é¡¹ç›®ç›®å½•ï¼šdocs; packages ç›®å½•åˆ™æ˜¯æ‰€æœ‰ç»„ä»¶çš„é¡¹ç›®ç›®å½•äº†ï¼Œåœ¨ packages ç›®å½•ä¸­åˆå¯ä»¥æ”¾å¾ˆå¤šåŒ…çš„é¡¹ç›®ç›®å½•ï¼Œæ¯”å¦‚ï¼Œç»„ä»¶åŒ…ç›®å½•ï¼šcomponentsã€ä¸»é¢˜åŒ…ç›®å½•ï¼štheme-chalkã€å·¥å…·åŒ…ç›®å½•ï¼šutils ç­‰ã€‚ç„¶åæ¯ä¸€ä¸ªåŒ…ç›®å½•é‡Œé¢ä¹Ÿéœ€è¦ä¸€ä¸ª package.json æ–‡ä»¶è¿›è¡Œå£°æ˜è¿™æ˜¯ä¸€ä¸ª NPM åŒ…ç›®å½•ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›å…¥æ¯ä¸ªåŒ…ç›®å½•è¿›è¡Œåˆå§‹ä¸€ä¸ª package.json æ–‡ä»¶ã€‚

ä»¥ components åŒ…ä¸ºä¾‹ï¼Œæˆ‘ä»¬è¿›å…¥åˆ° components ç›®å½•åº•ä¸‹åˆå§‹åŒ–ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œæ›´æ”¹åŒ…åï¼š`@elemnet-plus/components`ã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"name"</span>:&nbsp;<span data-darkreader-inline-color="">"@elemnet-plus/components"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"version"</span>:&nbsp;<span data-darkreader-inline-color="">"1.0.0"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"description"</span>:&nbsp;<span data-darkreader-inline-color="">""</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"main"</span>:&nbsp;<span data-darkreader-inline-color="">"index.js"</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"scripts"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"test"</span>:&nbsp;<span data-darkreader-inline-color="">"echo&nbsp;"</span><span data-darkreader-inline-color="">Error</span>:&nbsp;no&nbsp;test&nbsp;specified<span data-darkreader-inline-color="">"&nbsp;&amp;&amp;&nbsp;exit&nbsp;1"</span><br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"keywords"</span>:&nbsp;[],<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"author"</span>:&nbsp;<span data-darkreader-inline-color="">""</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"license"</span>:&nbsp;<span data-darkreader-inline-color="">"ISC"</span><br>}<br>
```

å…¶ä»–ä¸¤ä¸ªçš„åŒ…ååˆ™åˆ†åˆ«ä¸ºï¼š`@elemnet-plus/theme-chalk`Â å’ŒÂ `@elemnet-plus/utils`ï¼Œåˆ›å»ºè¿‡ç¨‹åŒä¸Šã€‚

è‡³æ­¤æˆ‘ä»¬ä¸€ä¸ªåˆæ­¥æ­å»ºçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
â”œâ”€â”€&nbsp;README.md<br>â”œâ”€â”€&nbsp;package.json<br>â”œâ”€â”€&nbsp;packages<br>â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;components<br>â”‚&nbsp;&nbsp;&nbsp;â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;package.json<br>â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;theme-chalk<br>â”‚&nbsp;&nbsp;&nbsp;â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;package.json<br>â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;utils<br>â”‚&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;package.json<br>â”œâ”€â”€&nbsp;play<br>â””â”€â”€&nbsp;pnpm-workspace.yaml<br>
```

#### ä»“åº“é¡¹ç›®å†…çš„åŒ…ç›¸äº’è°ƒç”¨

`@elemnet-plus/components`Â ã€`@elemnet-plus/theme-chalk`Â ã€`@elemnet-plus/utils`Â è¿™å‡ ä¸ªåŒ…è¦äº’ç›¸è¿›è¡Œè°ƒç”¨å‘¢ï¼Œå°±éœ€è¦æŠŠå®ƒä»¬å®‰è£…åˆ°ä»“åº“æ ¹ç›®å½•ä¸‹çš„Â `node_modules`Â ç›®å½•ä¸­ã€‚

ç„¶åæˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹è¿›è¡Œå®‰è£…æ“ä½œã€‚

```
js<br>å¤åˆ¶ä»£ç <br>pnpm&nbsp;install&nbsp;@elemnet-plus/components&nbsp;-w<br>pnpm&nbsp;install&nbsp;@elemnet-plus/theme-chalk&nbsp;-w<br>pnpm&nbsp;install&nbsp;@elemnet-plus/utils&nbsp;-w<br>
```

`-w`Â è¡¨ç¤ºå®‰è£…åˆ°å…±å…¬æ¨¡å—çš„ packages.json ä¸­ï¼Œä¹Ÿå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„ packages.jsonã€‚

å®‰è£…åæ ¹ç›®å½•ä¸‹çš„ package.json çš„å†…å®¹ä¸ºï¼š

```
{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">"dependencies"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"@elemnet-plus/components"</span>:&nbsp;<span data-darkreader-inline-color="">"workspace:*"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"@elemnet-plus/theme-chalk"</span>:&nbsp;<span data-darkreader-inline-color="">"workspace:*"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"@elemnet-plus/utils"</span>:&nbsp;<span data-darkreader-inline-color="">"workspace:*"</span><br>&nbsp;&nbsp;},<br>}<br>
```

æ³¨æ„ï¼š`workspace:*`Â å°†æ¥å‘å¸ƒçš„æ—¶å€™ä¼šè¢«è½¬æ¢æˆå…·ä½“çš„ç‰ˆæœ¬å·ã€‚

#### TypeScript åˆå§‹åŒ–é…ç½®æ–‡ä»¶

æ¥ä¸‹æ¥ç»§ç»­å®‰è£…ä¸€äº›æˆ‘ä»¬å¼€å‘æ—¶æ‰€éœ€è¦çš„ä¾èµ–ã€‚

```
pnpm&nbsp;install&nbsp;vue&nbsp;typescript&nbsp;@types/node&nbsp;-D&nbsp;-w<br>
```

å› ä¸ºÂ `vue`Â ã€Â `typescript`Â å’ŒÂ `@types/node`Â åªæ˜¯å¼€å‘ç¯å¢ƒéœ€è¦çš„ï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™éœ€è¦æ·»åŠ ä¸€ä¸ªÂ `-D`Â å‚æ•°è¡¨ç¤ºå®‰è£…åˆ°å¼€å‘ç¯å¢ƒï¼Œ`-w`Â è¡¨ç¤ºå®‰è£…åˆ°å…±å…¬æ¨¡å—çš„ packages.json ä¸­ï¼Œä¹Ÿå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„ packages.jsonã€‚

å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† TypeScriptï¼Œè¿™æ ·æˆ‘ä»¬æƒ³è¦å»æ ¡éªŒæˆ‘ä»¬çš„ä»£ç ï¼Œè®©æˆ‘ä»¬ä»£ç æœ‰æç¤ºï¼Œå¹¶ä¸”å¯ä»¥æŒ‰ç…§ä¸€äº›è§„åˆ™æ¥è§£ææˆ‘ä»¬çš„è¯­æ³•ï¼Œç»™æˆ‘ä»¬æ›´å‹å¥½çš„æç¤ºï¼Œæˆ‘ä»¬å°±éœ€è¦å»åˆå§‹åŒ–ä¸€ä¸‹è¿™ä¸ª TypeScript é…ç½®å‘½ä»¤ã€‚ åˆå› ä¸ºæˆ‘ä»¬å®‰è£…äº† typescriptï¼Œæ‰€ä»¥åœ¨Â `node_modules`Â ç›®å½•ä¸‹Â `bin`Â ç›®å½•é‡Œé¢å°±ä¼šå­˜åœ¨ä¸€ä¸ª tsc çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥å¸®æˆ‘ä»¬è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Â `npm tsc --init`Â æ¥åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Â `pnpm tsc --init`Â é‚£ä¹ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå®ƒå°±ä¼šå»Â `node_modules`Â ç›®å½•ä¸‹Â `bin`Â ç›®å½•æ‰¾è¿™ä¸ª tsc å‘½ä»¤è¿›è¡Œæ‰§è¡Œã€‚

```
pnpm&nbsp;tsc&nbsp;--init<br>
```

## æ€»ç»“

è‡³æ­¤ä¸€ä¸ªé€šè¿‡ pnpm æ–¹å¼é…ç½®çš„ monorepo åŸºç¡€ç¯å¢ƒå°±æ­å»ºå¥½äº†ã€‚

åˆ°åº•ä»€ä¹ˆæ˜¯å·¥ç¨‹åŒ–çš„å«ä¹‰å‘¢ï¼Ÿåœ¨é…ç½®è¿™ä¸ªå¼€å‘ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¥½åƒåªæ˜¯ä½¿ç”¨äº†ä¸€å †å·¥å…·è¿›è¡Œå„ç§é…ç½®ï¼Œé‚£ä¹ˆæ˜¯å¦æ„å‘³ç€å‰ç«¯å·¥ç¨‹åŒ–å°±æ˜¯å·¥å…·åŒ–å‘¢ï¼ŸğŸ”§

å…¶å®ä¸æ˜¯ï¼Œå·¥ç¨‹åŒ–çš„æ ¸å¿ƒå¹¶éå·¥å…·ï¼Œè€Œæ˜¯ä»¥å·¥å…·ä¸ºå®ç°åª’ä»‹è¿›è¡Œè§„èŒƒå·¥ä½œæµç¨‹ã€‚

ä¹Ÿå°±æ˜¯é€šè¿‡å·¥å…·è¡¨è¾¾ä½ çš„æ€æƒ³ï¼Œé€šè¿‡å·¥å…·è§„èŒƒä½ çš„é¡¹ç›®ï¼Œé€šè¿‡å·¥å…·ç®¡ç†å†™ä»£ç çš„äººå‘˜ã€‚ğŸ™†ğŸ¿â™‚ï¸

> ä½œè€…ï¼šTooy8  
> é“¾æ¥ï¼šhttps://juejin.cn/post/7285373518836826167  
> æ¥æºï¼šç¨€åœŸæ˜é‡‘

## ç»“è¯­

æˆ‘æ˜¯æ—ä¸‰å¿ƒ

-   ä¸€ä¸ªå¾…è¿‡**å°å‹toGå‹å¤–åŒ…å…¬å¸ã€å¤§å‹å¤–åŒ…å…¬å¸ã€å°å…¬å¸ã€æ½œåŠ›å‹åˆ›ä¸šå…¬å¸ã€å¤§å…¬å¸**çš„ä½œæ­»å‹å‰ç«¯é€‰æ‰‹ï¼›
    
-   ä¸€ä¸ªåå‰ç«¯çš„å…¨å¹²å·¥ç¨‹å¸ˆï¼›
    
-   ä¸€ä¸ªä¸æ­£ç»çš„æ˜é‡‘ä½œè€…ï¼›
    
-   é€—æ¯”çš„Bç«™upä¸»ï¼›
    
-   ä¸å¸…çš„å°çº¢ä¹¦åšä¸»ï¼›
    
-   å–œæ¬¢æ‰“é“çš„ç¯®çƒèœé¸Ÿï¼›
    
-   å–œæ¬¢å†å²çš„ä¹å‘³å°‘å¹´ï¼›
    
-   å–œæ¬¢rapçš„äº”éŸ³ä¸å…¨å¼±é¸¡å¦‚æœä½ æƒ³ä¸€èµ·å­¦ä¹ å‰ç«¯ï¼Œä¸€èµ·æ‘¸é±¼ï¼Œä¸€èµ·ç ”ç©¶ç®€å†ä¼˜åŒ–ï¼Œä¸€èµ·ç ”ç©¶é¢è¯•è¿›æ­¥ï¼Œä¸€èµ·äº¤æµå†å²éŸ³ä¹ç¯®çƒrapï¼Œå¯ä»¥æ¥ä¿ºçš„æ‘¸é±¼å­¦ä¹ ç¾¤å“ˆå“ˆï¼Œç‚¹è¿™ä¸ªï¼Œæœ‰7000å¤šåå‰ç«¯å°ä¼™ä¼´åœ¨ç­‰ç€ä¸€èµ·å­¦ä¹ å“¦ -->Â 
    

> å¹¿å·çš„å…„å¼Ÿå¯ä»¥çº¦é¥­å“¦ï¼Œæˆ–è€…çº¦çƒ~æˆ‘è´Ÿè´£æ‰“é“ï¼Œä½ è´Ÿè´£è¿›çƒï¼Œè°¢è°¢~