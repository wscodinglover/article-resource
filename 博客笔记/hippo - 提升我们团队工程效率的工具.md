## 1\. èƒŒæ™¯

æˆ‘ä»¬ ShopeePay å›¢é˜Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å‰ç«¯å›¢é˜Ÿï¼ˆ**80**+æˆå‘˜ï¼‰ï¼Œå›¢é˜Ÿå†…éƒ¨åˆ†å¸ƒç€ react nativeã€javascript npmåŒ…ã€react component npmåŒ…ã€serverlessã€æ™®é€šçš„reactå·¥ç¨‹ç­‰å¤šç§ç±»å‹çš„é¡¹ç›®ï¼Œæ¯ç§é¡¹ç›®ç±»å‹ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½æœ‰å®ƒä»¬è‡ªå·±çš„é…ç½®å’Œå·¥ä½œæµã€‚æ¯”å¦‚ä»£ç æ ¼å¼åŒ–é…ç½®ä¸ç»Ÿä¸€ï¼ˆeslintã€prettier å’Œ typescriptï¼‰ï¼Œæ„å»ºå·¥å…·åŠå…¶é…ç½®ä¸ä¸€è‡´ï¼ˆrollupã€webpackã€viteã€tscã€babelã€esbuild ä½¿ç”¨æ··ä¹±ï¼‰ã€‚å¹¶ä¸”è¿™äº›æ··ä¹±ä¼šå¢åŠ ç»´æŠ¤å’Œäº¤æ¥æˆæœ¬å¹¶ä¸”å¯¹æ–°äººä¸å‹å¥½ã€‚

åŸºäºä»¥ä¸Šå› ç´ ï¼Œæˆ‘ä»¬å›¢é˜Ÿå¼€å‘äº†hippoï¼Œæ—¨åœ¨è§£å†³ä»¥ä¸‹é—®é¢˜

-   ä¸åŒé¡¹ç›®æˆ–å›¢é˜Ÿå°ç»„ä½¿ç”¨ä¸åŒçš„cliå·¥å…·å’Œå·¥ä½œæµå‘½ä»¤ï¼ˆæ¯”å¦‚å¼€å‘é˜¶æ®µä¸€äº›é¡¹ç›®ç§°ä¸ºdevï¼Œä¸€äº›é¡¹ç›®ç§°ä¸º serveï¼‰ï¼Œä¸åŒçš„cliæˆ–æ„å»ºå·¥å…·å¸¦æ¥äº†æ··ä¹±
    
-   å½“å›¢é˜Ÿæˆå‘˜éœ€è¦å¼€å‘æ–°é¡¹ç›®æ—¶ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§å½¢å¼
    

-   æ¯æ¬¡éƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å“ªäº›æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬æ„å»ºå·¥å…·é€‰å–å’Œé…ç½®ï¼Œä»£ç æ ¼å¼åŒ–æ ‡å‡†é…ç½®å’Œæµ‹è¯•ç”¨ä¾‹é…ç½®ç­‰ã€‚
    
-   åŸºäºåŸæœ‰é¡¹ç›®æ‹·è´
    

è¿™äº›æ–¹å¼ä¼šè¿›ä¸€æ­¥å¯¼è‡´ â€œç†µå¢â€ï¼Œå¯èƒ½ä¼šé€ æˆä¸€ä¸ªå›¢é˜Ÿä¸­ä¸åŒæˆå‘˜å¼€å‘çš„é¡¹ç›®ç›®å½•ç»“æ„å„ä¸ç›¸åŒï¼Œæ„å»ºå·¥å…·ä¸é…ç½®ä¸ä¸€è‡´çš„é—®é¢˜è¿›ä¸€æ­¥è¢«æ”¾å¤§

-   å½“ä¸€ä¸ªé¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œå¼€å‘äººå‘˜çš„æ•°é‡ä¹Ÿåœ¨å¢é•¿æ—¶ï¼Œæˆ‘ä»¬æ— æ³•ä¿æŒä»£ç çš„è´¨é‡ï¼Œå¹¶ç¡®ä¿å®ƒå§‹ç»ˆéµå¾ªæˆ‘ä»¬çš„æœ€ä½³å®è·µ
    

-   æœ‰äº›äººå¯èƒ½ä¼šä½¿ç”¨eslint ignoreä¿®æ”¹eslintè§„åˆ™ï¼Œæˆ–è€…å½“ä»–åœ¨CI pipelineä¸­çœ‹åˆ°linté”™è¯¯æ—¶ç›´æ¥å…³é—­è¯¥è§„åˆ™ã€‚
    
-   æœ‰äº›äººå‘ç°äº†ä¸€ä¸ªä¼˜åŒ–ç‚¹ï¼Œä½†æ˜¯ç¡®å‘ç°å¾ˆéš¾ä½¿å®ƒé€‚ç”¨äºæ‰€æœ‰ç›¸åŒç±»å‹çš„é¡¹ç›®
    
-   æœ‰äº›æ ‡å‡†åªå­˜åœ¨äºæ–‡æ¡£ä¸­ï¼Œå¾ˆéš¾ç¡®ä¿æ¯ä¸ªäººéƒ½çŸ¥é“å¹¶éµå¾ªå®ƒä»¬ã€‚
    

## 2\. hippoæ˜¯ä»€ä¹ˆï¼Ÿ

`hippo` æ˜¯ä¸€ä¸ªç”¨äºæé«˜æˆ‘ä»¬å‰ç«¯å›¢é˜Ÿå·¥ç¨‹æ•ˆç‡çš„`å‰ç«¯å·¥ä½œæµå’Œè§„èŒƒ`çš„å·¥å…·ã€‚å®ƒä¸ºæˆ‘ä»¬å›¢é˜Ÿçš„å‰ç«¯å¼€å‘ç»Ÿä¸€å®šä¹‰äº†æ•´ä¸ªå·¥ä½œæµå’Œè§„èŒƒå¹¶æä¾›äº†ä¸€äº›å‘½ä»¤æ¥å¸®åŠ©ä¸åŒçš„é¡¹ç›®ä½¿ç”¨å®ƒå¹¶å®ç°ä¸€å¥—æ ‡å‡†å·¥ä½œæµã€‚

åŒæ—¶ hippo ä¹Ÿæä¾›äº†æ˜“äºæ¨ªå‘æ‰©å±•çš„æ’ä»¶æœºåˆ¶ï¼Œæ–¹ä¾¿å›¢é˜Ÿæ¥å…¥ä¸åŒçš„é¡¹ç›®ç±»å‹ã€‚

ç›®å‰ ShopeePay å›¢é˜Ÿçš„é¡¹ç›®å·¥ä½œæµåˆ†ä¸ºåˆå§‹åŒ–ã€æœ¬åœ°å¼€å‘ã€ä»£ç æ ¡éªŒã€ä»£ç æµ‹è¯•ã€æ‰“åŒ…æ„å»ºå’Œå‘å¸ƒç­‰æ­¥éª¤ã€‚åˆ†åˆ«å¯¹åº”ä»¥ä¸‹å‘½ä»¤

![Image](https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHp65ZA3IxI96YkS0IwvB9mJlcy9Dvpql1rMtSeqLGI6UTOGwd4YrL0CtQ0yUEWzSfKNfqwz6P7kbA/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

workflow.png

> ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º hippoï¼Ÿ
> 
> hippoå³æ²³é©¬ğŸ¦› ï¼Œæ²³é©¬æ˜¯æ‚é£Ÿæ€§åŠ¨ç‰©ï¼Œä»€ä¹ˆéƒ½èƒ½åƒï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°ä¸ºhippoçš„å«ä¹‰æ˜¯æ‰“é€ å›¢é˜Ÿç»Ÿä¸€çš„å·¥å…·é“¾ã€‚

## 3\. hippoæ¶æ„è®¾è®¡

ä¸€å¼ å›¾æ¦‚æ‹¬hippo æ¶æ„

![Image](https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHp65ZA3IxI96YkS0IwvB9mJZt2fcwib7SFicvYWdb9z5xtscTCnIggct5iarm7BWKkdym3zogibq0f5fw/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

hippo-attachment.png

hippoæ¶æ„å¤§è‡´åˆ†ä¸ºå››å±‚

-   é¡¶å±‚æ˜¯ `@hippo/cli`, cli åªæä¾›äº†ä¸€ä¸ªåŸºç¡€å†…æ ¸å’Œä¸€äº›åŸºç¡€å‘½ä»¤ï¼ˆæ¯”å¦‚versionã€helpå’Œä¸€äº›ä¸monorepoç›¸å…³çš„å‘½ä»¤ï¼‰ï¼Œè´Ÿè´£è·å–å’Œæ³¨å†Œå„ä¸ªtoolkitå®ç°çš„å·¥ä½œæµå‘½ä»¤å¹¶ä¸å‘½ä»¤è¡Œç»ˆç«¯äº¤äº’
    
-   ç¬¬äºŒå±‚æ˜¯ `toolkit` ã€‚`toolkit` æ˜¯ç”¨äºæä¾›æŸç§é¡¹ç›®ç±»å‹çš„å·¥ä½œæµå‘½ä»¤ï¼Œé€šå¸¸æ˜¯å¤šä¸ªå‘½ä»¤çš„é›†åˆã€‚ä¸€ä¸ª `toolkit` å¯¹åº”ä¸€ç§é¡¹ç›®ç±»å‹ï¼Œéœ€è¦æŒ‰éœ€å®ç° `@hippo/api` ä¸­çš„æŠ½è±¡å·¥ä½œæµå‘½ä»¤
    
-   ç¬¬ä¸‰å±‚æ˜¯ `@hippo/api`ã€‚å®ƒæ˜¯ hippo æ ¸å¿ƒåŒ…ï¼Œæä¾›äº†ä¸€äº›æ ¸å¿ƒå·¥ä½œæµå‘½ä»¤ï¼ˆcreateã€devã€lintã€buildã€testã€doctorç­‰ï¼‰çš„æŠ½è±¡å®ç°ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€äº›æ ¸å¿ƒå·¥å…·æ–¹æ³•ï¼Œæ¯”å¦‚fsæ“ä½œã€git æ“ä½œã€loggerç­‰ã€‚`@hippo/cli` å’Œ `toolkit` å¯ä»¥ä½¿ç”¨ `@hippo/api` æä¾›çš„å·¥å…·æ–¹æ³•ï¼ŒåŒæ—¶ `toolkit` é’ˆå¯¹è¯¥é¡¹ç›®ç±»å‹æŒ‰éœ€å®ç° `@hippo/api` ä¸­çš„æ ¸å¿ƒå·¥ä½œæµå‘½ä»¤
    
-   æœ€åº•å±‚æ˜¯ `@hippo/api` ä¾èµ–çš„ä¸€äº›ç¬¬ä¸‰æ–¹åŸºç¡€åŒ…
    

> `@hippo/cli` å’Œ `@hippo/api` æœ¬èº«ä¸åŒ…å«ä»»ä½•ä¸ä¸šåŠ¡å¼ºç›¸å…³çš„é€»è¾‘

hippo æ ¸å¿ƒå·¥ä½œæµå¦‚ä¸‹

```
sequenceDiagram<br>    autonumber<br>        User-&gt;&gt;Hippo: Input a command<br>        Hippo-&gt;&gt;Hippo: Check if there is a valid "type" in "package.json" or "hippo-config.js"<br>        opt When "type" is valid<br>            Hippo-&gt;&gt;Toolkit: Get the commands<br>            Toolkit--&gt;Hippo: Return the commands<br>            Hippo-&gt;&gt;Hippo: Register the commands<br>        end<br>        Hippo-&gt;&gt;User: Return the result<br>
```

## 4\. hippoçš„å®ç°

## 4.1 @hippo/cli

æˆ‘ä»¬ä½¿ç”¨ clipanion<sup data-darkreader-inline-color="">[1]</sup> æ¥å®ç°cliã€‚å®˜æ–¹ä»‹ç»å®ƒçš„ä¼˜åŠ¿å¦‚ä¸‹

![Image](https://mmbiz.qpic.cn/sz_mmbiz_jpg/H8M5QJDxMHp65ZA3IxI96YkS0IwvB9mJ8Wetcib51wpjuEWksLicpXM0ib4hfkve2xF6icLibbZQ48juqPicx5LvONAg/640?wx_fmt=other&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

2023-06-30-15-15-05-image.png

åŒæ—¶ berry/yarn3<sup data-darkreader-inline-color="">[2]</sup> ä¹Ÿåœ¨ä½¿ç”¨å®ƒ

åœ¨ `@hippo/cli` ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å†…ç½®ä¸€äº› monorepo å‘½ä»¤å¹¶æ ¹æ®å½“å‰æ‰§è¡Œå‘½ä»¤çš„cwdä» `hippo-config.js` æˆ– `package.json` ä¸­è·å–toolkit typeå’Œå¯¹åº”çš„toolkitå‘½ä»¤å¹¶æ³¨å†Œåˆ°cliä¸­ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Cli,&nbsp;Builtins,&nbsp;apis&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/api'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;values&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lodash'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;pkgJson&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../package.json'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;CloneCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./commands/CloneCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;FocusCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./commands/FocusCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;CreateCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./commands/CreateCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;ListCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./commands/ListCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;toolkit&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./utils/toolkit'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;HippoToolkit&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./interfaces'</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;version,&nbsp;name&nbsp;}&nbsp;=&nbsp;pkgJson;<br><br><span data-darkreader-inline-color="">/**<br>&nbsp;*&nbsp;Check&nbsp;the&nbsp;version&nbsp;when&nbsp;the&nbsp;command&nbsp;is&nbsp;executed<br>&nbsp;*/</span><br>apis.npm.checkVersionAndLog(name,&nbsp;version);<br><br><span data-darkreader-inline-color="">const</span>&nbsp;[,&nbsp;,&nbsp;...args]&nbsp;=&nbsp;process.argv;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;cli&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;Cli({<br>&nbsp;&nbsp;binaryLabel:&nbsp;<span data-darkreader-inline-color="">`ShopeePay&nbsp;Hippo`</span>,<br>&nbsp;&nbsp;binaryName:&nbsp;<span data-darkreader-inline-color="">`hippo`</span>,<br>&nbsp;&nbsp;binaryVersion:&nbsp;version,<br>});<br><br>cli.register(FocusCommand);<br>cli.register(CreateCommand);<br>cli.register(ListCommand);<br><br><span data-darkreader-inline-color="">/**<br>&nbsp;*&nbsp;Find&nbsp;the&nbsp;current&nbsp;toolkit&nbsp;and&nbsp;register&nbsp;its&nbsp;plugin&nbsp;commands<br>&nbsp;*/</span><br><span data-darkreader-inline-color="">const</span>&nbsp;toolkitType&nbsp;=&nbsp;apis.config.getToolkitType();<br><span data-darkreader-inline-color="">if</span>&nbsp;(toolkit.isValidToolkit(toolkitType))&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;commands&nbsp;=&nbsp;toolkit.requireModule(<br>&nbsp;&nbsp;&nbsp;&nbsp;toolkitType&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;<span data-darkreader-inline-color="">string</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'commands'</span><br>&nbsp;&nbsp;)&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;HippoToolkit[<span data-darkreader-inline-color="">'commands'</span>];<br><br>&nbsp;&nbsp;values(commands).forEach(<span>(<span>plugin</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;cli.register(plugin);<br>&nbsp;&nbsp;});<br>}<br><br>cli.register(Builtins.HelpCommand);<br>cli.register(Builtins.VersionCommand);<br><br>cli.runExit(args);<br>
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å†…ç½® cloneã€focusã€createã€listã€helpå’Œversionå‘½ä»¤

### clone

æ­¤å‘½ä»¤ä¸»è¦ç”¨äºæé€Ÿcloneä¸€ä¸ªåºå¤§çš„monorepo gitä»“åº“ã€‚cloneå‘½ä»¤ä½¿ç”¨éƒ¨åˆ†cloneçš„æ–¹å¼æ¥æ˜¾è‘—å‡å°‘å¼€å§‹ä½¿ç”¨å­˜å‚¨åº“æ‰€éœ€çš„æ•°æ®é‡ã€‚é€šè¿‡å»¶è¿Ÿä»“åº“æ‰€æœ‰blobä¸‹è½½ï¼ˆç›´åˆ°éœ€è¦æ—¶ï¼‰ï¼Œå…è®¸ç”¨æˆ·å¿«é€Ÿå¤„ç†éå¸¸åºå¤§çš„gitä»“åº“

å†…éƒ¨ä½¿ç”¨äº† microsoft/scalar<sup data-darkreader-inline-color="">[3]</sup> çš„ clone å‘½ä»¤

### focus

focuså‘½ä»¤ä¸»è¦ç”¨äºæˆ‘ä»¬å›¢é˜Ÿçš„monorepoä»“åº“ï¼Œå¯ä»¥æ ¹æ®ä¼ å…¥çš„workspaceæ¥å®‰è£…æ­¤workspaceå’Œå…¶ä¾èµ–çš„workspaceçš„ä¾èµ–ã€‚ç±»ä¼¼äº pnpm ä¸­çš„ pnpm install \\--filter ...package\\\_name<sup data-darkreader-inline-color="">[4]</sup> å‘½ä»¤ã€‚

-   ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨pnpmå‘½ä»¤ï¼Ÿ
    
    å› ä¸ºæˆ‘ä»¬å›¢é˜Ÿä¸­ä½¿ç”¨ berry/yarn3<sup data-darkreader-inline-color="">[5]</sup> æ¥ç®¡ç†monorepoï¼Œå®ƒä¹Ÿæ²¡æœ‰æä¾›ç±»ä¼¼äºpnpm install \\--filter ...package\\\_name<sup data-darkreader-inline-color="">[6]</sup> çš„å‘½ä»¤ã€‚yarn3åªæä¾›äº† yarn worspaces focus package\\\_name<sup data-darkreader-inline-color="">[7]</sup> å‘½ä»¤ï¼Œç„¶è€Œæ­¤å‘½ä»¤å¹¶ä¸ä¼šå®‰è£… package\_name ä¾èµ–çš„workspaceçš„ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°äº†hippo focuså‘½ä»¤æ¥è¾¾åˆ°ä¸pnpmä¸€æ ·çš„æ•ˆæœ
    
-   ä¸ºä»€ä¹ˆä¸ä½¿ç”¨pnpmæ¥ç®¡ç†monorepoï¼Ÿ
    
    å› ä¸ºå½“æ—¶pnpmæ²¡æœ‰æ”¯æŒpatchå‘½ä»¤ï¼Œè¿™å¯¹äºæˆ‘ä»¬éå¸¸é‡è¦ã€‚ï¼ˆç°åœ¨pnpmå·²ç»æ”¯æŒpatchå‘½ä»¤äº†ï¼Œåç»­æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†yarn3åˆ‡æ¢ä¸ºpnpmï¼‰
    

### list

listå‘½ä»¤ä¼šåˆ—å‡º `@hippo/cli` å†…ç½®äº†å“ªäº› toolkit

### help

cliå¸®åŠ©å‘½ä»¤

### version

æŸ¥çœ‹ cli ç‰ˆæœ¬çš„å‘½ä»¤

### create

ç†è®ºä¸Šcreateå‘½ä»¤åº”è¯¥æ”¾åˆ° toolkit ä¸­ï¼Œä½†æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç”¨æˆ·æƒ³è¦åˆ›å»ºå“ªç§toolkité¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½å°†æ­¤å‘½ä»¤æå‡åˆ° `@hippo/cli`ï¼Œè®©ç”¨æˆ·æ˜ç¡®é€‰æ‹©ä¸€ä¸ªtoolkitã€‚åŒæ—¶ä¹Ÿå¯ä»¥å…ˆåœ¨cliä¸­æ”¶é›†è¦åˆ›å»ºçš„é¡¹ç›®åç§°ç­‰ä¿¡æ¯ï¼Œæ¥ç€å°†æ”¶é›†çš„é¡¹ç›®ä¿¡æ¯ä¼ å…¥å¹¶è°ƒç”¨å¯¹åº”toolkitä¸­çš„createå‘½ä»¤ã€‚æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;BaseCommand,&nbsp;Command,&nbsp;Option,&nbsp;apis,&nbsp;TemplateData&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/api'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;find&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lodash'</span>;<br><br><span data-darkreader-inline-color="">class</span>&nbsp;CreateCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BaseCommand&nbsp;{<br>&nbsp;&nbsp;...<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;run()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è·å–toolkitåˆ—è¡¨</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;toolkits&nbsp;=&nbsp;toolkit.getList();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;ç”¨æˆ·é€‰æ‹©toolkit</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;response&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;prompts({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">'select'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">'toolkitType'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message:&nbsp;<span data-darkreader-inline-color="">'Please&nbsp;select&nbsp;the&nbsp;project&nbsp;type&nbsp;you&nbsp;want&nbsp;to&nbsp;use'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;choices:&nbsp;toolkits,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initial:&nbsp;<span data-darkreader-inline-color="">0</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;toolkitType&nbsp;=&nbsp;response.toolkitType;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;targetToolkit&nbsp;=&nbsp;find(toolkits,&nbsp;{&nbsp;value:&nbsp;toolkitType&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ”¶é›†é¡¹ç›®åç§°ã€æè¿°ç­‰ä¿¡æ¯</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;templateData&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;CreateCommand.getTemplateData(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetToolkit?.title<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è·å–å¯¹åº”toolkitçš„createå‘½ä»¤å¹¶æ‰§è¡Œ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;create&nbsp;=&nbsp;toolkit.requireModule(toolkitType,&nbsp;<span data-darkreader-inline-color="">'create'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;create(templateData);<br>&nbsp;&nbsp;}<br>}<br>
```

åŒæ—¶ `@hippo/cli` ä¼šæ ¹æ®å½“å‰æ‰§è¡Œå‘½ä»¤çš„cwdè·å–å¯¹åº”çš„toolkitå‘½ä»¤å¹¶æ³¨å†Œåˆ°cliä¸­ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªtoolkité¡¹ç›®ä¸­ï¼Œå½“è°ƒç”¨hippo buildã€hippo lintç­‰å·¥ä½œæµå‘½ä»¤æ—¶ï¼Œå°±ä¼šæ‰§è¡Œåˆ°ç›¸åº”çš„toolkitä¸­çš„å®ç°çš„å·¥ä½œæµå‘½ä»¤

> å½“ä¸€ä¸ªæ–°çš„toolkitå¼€å‘å®Œæ¯•åï¼Œ`@hippo/cli` å¯ä»¥å®‰è£…å®ƒä½œä¸ºä¸€ä¸ªå†…ç½®toolkitã€‚ä½†è¿™ç§æ–¹å¼éœ€è¦åœ¨æ¯æ¬¡æ–°å¢toolkitä¹‹åä¿®æ”¹ `@hippo/cli` ä»£ç å¹¶ä¸”å‘ç‰ˆï¼ŒåŒæ—¶ä½¿ç”¨æ–¹è¿˜éœ€è¦æ›´æ–°ï¼Œæ•ˆç‡æ¯”è¾ƒä½ã€‚
> 
> æ‰€ä»¥ä¸ºäº†ä¼˜åŒ–æ“ä½œæµç¨‹ï¼Œåœ¨ `toolkit.getList()` å’Œ `toolkit.requireModule` æ–¹æ³•ä¸­æˆ‘ä»¬ä¼šåŒæ—¶requireå½“å‰é¡¹ç›®çš„node-modulesç›®å½•ä¸­å®‰è£…çš„toolkitï¼Œè¿™æ„å‘³ç€é¡¹ç›®ä¸­åªéœ€è¦å®‰è£…å¯¹åº”çš„toolkitï¼Œhippo cliä¹Ÿä¼šresolveå®ƒä»¬å¹¶ä¸”æ³¨å†Œç›¸åº”çš„å‘½ä»¤

## 4.2 @hippo/api

æ­¤åŒ…ä¸»è¦æä¾›äº†ä¸€äº›å·¥å…·æ–¹æ³•å’Œå·¥ä½œæµå‘½ä»¤çš„æŠ½è±¡å®ç°ã€‚æŠ½è±¡å‘½ä»¤æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹

### BaseCommand

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Command,&nbsp;Option&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'clipanion'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;$&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'zx'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;*&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;apis&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../utils'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;BaseCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;Command&nbsp;{<br>&nbsp;&nbsp;verbose&nbsp;=&nbsp;Option.Boolean(<span data-darkreader-inline-color="">'--verbose'</span>,&nbsp;<span data-darkreader-inline-color="">false</span>,&nbsp;{&nbsp;hidden:&nbsp;<span data-darkreader-inline-color="">true</span>&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Set&nbsp;apis&nbsp;as&nbsp;an&nbsp;property<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;apis&nbsp;=&nbsp;apis;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;execute()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;$.verbose&nbsp;=&nbsp;<span data-darkreader-inline-color="">this</span>.verbose;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;<span data-darkreader-inline-color="">this</span>.run();<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;run():&nbsp;<span data-darkreader-inline-color="">void</span>;<br>}<br>
```

### BuildCommand

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Command&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'clipanion'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;BaseCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./BaseCommand'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;BuildCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BaseCommand&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;paths&nbsp;=&nbsp;[[<span data-darkreader-inline-color="">'build'</span>]];<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;usage&nbsp;=&nbsp;Command.Usage({<br>&nbsp;&nbsp;&nbsp;&nbsp;description:&nbsp;<span data-darkreader-inline-color="">'Build&nbsp;the&nbsp;resources'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;examples:&nbsp;[[<span data-darkreader-inline-color="">'Build&nbsp;the&nbsp;resources'</span>,&nbsp;<span data-darkreader-inline-color="">'$0&nbsp;build'</span>]],<br>&nbsp;&nbsp;});<br>}<br>
```

### TestCommand

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;argv&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'zx'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Command,&nbsp;Option&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'clipanion'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;runCLI&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'jest'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;omit&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lodash'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;{&nbsp;Config&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@jest/types'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;BaseCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./BaseCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;fs,&nbsp;createLogger&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../utils'</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;CI&nbsp;}&nbsp;=&nbsp;process.env;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;TestCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BaseCommand&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;paths&nbsp;=&nbsp;[[<span data-darkreader-inline-color="">'test'</span>]];<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;usage&nbsp;=&nbsp;Command.Usage({<br>&nbsp;&nbsp;&nbsp;&nbsp;description:&nbsp;<span data-darkreader-inline-color="">'Run&nbsp;unit&nbsp;test&nbsp;using&nbsp;Jest'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;examples:&nbsp;[[<span data-darkreader-inline-color="">'Run&nbsp;unit&nbsp;test&nbsp;using&nbsp;Jest'</span>,&nbsp;<span data-darkreader-inline-color="">'$0&nbsp;test'</span>]],<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;logger&nbsp;=&nbsp;createLogger(<span data-darkreader-inline-color="">'hippo-test'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;All&nbsp;the&nbsp;last&nbsp;args&nbsp;to&nbsp;pass&nbsp;to&nbsp;"Jest"&nbsp;directly<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;args&nbsp;=&nbsp;Option.Proxy();<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;jest&nbsp;configs<br>&nbsp;&nbsp;&nbsp;*&nbsp;@returns<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;getJestConfig():&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;Config.InitialOptions&gt;;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;run()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;toolkit&nbsp;dev&nbsp;function<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;jestConfigs&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;<span data-darkreader-inline-color="">this</span>.getJestConfig();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;jestCliArgs&nbsp;=&nbsp;omit(argv,&nbsp;[<span data-darkreader-inline-color="">'_'</span>]);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(jestConfigs)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">try</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.env.NODE_ENV&nbsp;===&nbsp;<span data-darkreader-inline-color="">null</span>&nbsp;||<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.env.NODE_ENV&nbsp;===&nbsp;<span data-darkreader-inline-color="">undefined</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;When&nbsp;we&nbsp;use&nbsp;jest&nbsp;in&nbsp;normal&nbsp;scenes,&nbsp;jest&nbsp;would&nbsp;add&nbsp;this&nbsp;env&nbsp;automatically&nbsp;in&nbsp;its&nbsp;bin(https://github.com/facebook/jest/blob/39667e3680fb463eb8caedfa7e1f9edb3f0b69a2/packages/jest-cli/bin/jest.js#L13).<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;In&nbsp;hippo&nbsp;we&nbsp;directly&nbsp;used&nbsp;runCLI&nbsp;from&nbsp;jest&nbsp;to&nbsp;run&nbsp;test,&nbsp;so&nbsp;this&nbsp;env&nbsp;variable&nbsp;is&nbsp;null&nbsp;in&nbsp;hippo.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.env.NODE_ENV&nbsp;=&nbsp;<span data-darkreader-inline-color="">'test'</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;We&nbsp;need&nbsp;add&nbsp;some&nbsp;options&nbsp;when&nbsp;it&nbsp;is&nbsp;in&nbsp;"CI"&nbsp;environment</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;ciArgs&nbsp;=&nbsp;CI<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxWorkers:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ci:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;{};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;results&nbsp;}&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;runCLI(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config:&nbsp;<span data-darkreader-inline-color="">JSON</span>.stringify(jestConfigs),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;We&nbsp;don't&nbsp;collect&nbsp;coverage&nbsp;by&nbsp;default</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coverage:&nbsp;<span data-darkreader-inline-color="">false</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...ciArgs,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...jestCliArgs,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;Config.Argv,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[fs.cwd]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Exit&nbsp;the&nbsp;process&nbsp;when&nbsp;these&nbsp;are&nbsp;failed&nbsp;tests</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;numFailedTests&nbsp;}&nbsp;=&nbsp;results;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(numFailedTests&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.exit(<span data-darkreader-inline-color="">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">catch</span>&nbsp;(e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.logger.error(<span data-darkreader-inline-color="">'%o'</span>,&nbsp;e);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.exit(<span data-darkreader-inline-color="">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>
```

testå‘½ä»¤ä½¿ç”¨jestæ¥è¿è¡Œï¼ŒåŒæ—¶åœ¨toolkit testå‘½ä»¤ä¸­åªéœ€è¦ç»§æ‰¿ `@hippo/api`ä¸­çš„TestCommandï¼Œç„¶åå®ç° `getJestConfig` æ–¹æ³•è¿”å›ç›¸åº”çš„jesté…ç½®å³å¯

### LintCommand

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;path&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'zx'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Command,&nbsp;Option&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'clipanion'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;*&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;t&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'typanion'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;filter&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lodash'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;ESLINT_FILE_EXT&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./constant'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;eslintCheck&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./eslint'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;typeCheck&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./typeCheck'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;print&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./print'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;BaseCommand&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../BaseCommand'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;createLogger,&nbsp;fs,&nbsp;git&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;getAddedFiles&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../../utils'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;HippoLintConfig&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../../interfaces'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;LintCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BaseCommand&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;paths&nbsp;=&nbsp;[[<span data-darkreader-inline-color="">'lint'</span>]];<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;usage&nbsp;=&nbsp;Command.Usage({<br>&nbsp;&nbsp;&nbsp;&nbsp;description:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'Check&nbsp;the&nbsp;code&nbsp;by&nbsp;ESLint,&nbsp;tsc&nbsp;according&nbsp;to&nbsp;the&nbsp;hippo&nbsp;type&nbsp;setting'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;examples:&nbsp;[[<span data-darkreader-inline-color="">'Lint&nbsp;a&nbsp;workspace'</span>,&nbsp;<span data-darkreader-inline-color="">'$0&nbsp;lint'</span>]],<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Tag&nbsp;if&nbsp;it&nbsp;is&nbsp;strict&nbsp;mode(warn&nbsp;message&nbsp;also&nbsp;trigger&nbsp;process.exit)<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;strict&nbsp;=&nbsp;Option.Boolean(<span data-darkreader-inline-color="">'--strict'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Auto&nbsp;Fix&nbsp;Option<br>&nbsp;&nbsp;&nbsp;*&nbsp;Only&nbsp;works&nbsp;for&nbsp;'ESLint'<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;fix&nbsp;=&nbsp;Option.Boolean(<span data-darkreader-inline-color="">'--fix'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;Check&nbsp;Commit&nbsp;Files<br>&nbsp;&nbsp;&nbsp;*&nbsp;Only&nbsp;works&nbsp;for&nbsp;'ESLint'<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;checkCommit&nbsp;=&nbsp;Option.Boolean(<span data-darkreader-inline-color="">'--check-commit'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Lint&nbsp;Source&nbsp;Option<br>&nbsp;&nbsp;&nbsp;*&nbsp;Only&nbsp;works&nbsp;for&nbsp;'ESLint'<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;src&nbsp;=&nbsp;Option.String(<span data-darkreader-inline-color="">'--src'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Limit&nbsp;the&nbsp;max&nbsp;warn&nbsp;numbers<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;maxWarnings&nbsp;=&nbsp;Option.String(<span data-darkreader-inline-color="">'--max-warnings'</span>,&nbsp;{&nbsp;validator:&nbsp;t.isNumber()&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Logger<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;logger&nbsp;=&nbsp;createLogger(<span data-darkreader-inline-color="">'hippo-lint'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;Lint&nbsp;Configs<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">abstract</span>&nbsp;getLintConfigs():&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;HippoLintConfig&gt;;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;run()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;lint&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;<span data-darkreader-inline-color="">this</span>.getLintConfigs();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Get&nbsp;the&nbsp;files&nbsp;from&nbsp;git&nbsp;diff</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;gitCommittedFiles&nbsp;=&nbsp;<span data-darkreader-inline-color="">this</span>.checkCommit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;getAddedFiles()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span data-darkreader-inline-color="">undefined</span>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.logger.debug(<span data-darkreader-inline-color="">'The&nbsp;committed&nbsp;files&nbsp;are&nbsp;%o'</span>,&nbsp;gitCommittedFiles);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Execute&nbsp;the&nbsp;type&nbsp;check.&nbsp;If&nbsp;you&nbsp;don't&nbsp;add&nbsp;this&nbsp;path&nbsp;in&nbsp;config,&nbsp;we&nbsp;won't&nbsp;do&nbsp;any&nbsp;type&nbsp;check<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;tscResults&nbsp;=&nbsp;lint?.lintConfig?.typescript<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;typeCheck(lint.lintConfig.typescript)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span data-darkreader-inline-color="">null</span>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;eslint&nbsp;files<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;eslintFiles&nbsp;=&nbsp;<span data-darkreader-inline-color="">this</span>.getLintFiles(ESLINT_FILE_EXT,&nbsp;gitCommittedFiles);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.logger.debug(<span data-darkreader-inline-color="">'The&nbsp;lint&nbsp;file&nbsp;pattern&nbsp;is&nbsp;%o'</span>,&nbsp;eslintFiles);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;eslintResults&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;eslintCheck(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fix:&nbsp;<span data-darkreader-inline-color="">this</span>.fix,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strict:&nbsp;<span data-darkreader-inline-color="">this</span>.strict,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eslintrc:&nbsp;lint?.lintConfig?.eslint&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;<span data-darkreader-inline-color="">string</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eslintIgnore:&nbsp;lint?.ignorePath?.eslint,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eslintFiles<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Print&nbsp;the&nbsp;result</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;errorCount,&nbsp;warningCount&nbsp;}&nbsp;=&nbsp;print({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eslint:&nbsp;eslintResults,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tsc:&nbsp;tscResults,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Exit&nbsp;the&nbsp;process&nbsp;when&nbsp;check&nbsp;commit&nbsp;and&nbsp;errorCount&nbsp;is&nbsp;not&nbsp;0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Exit&nbsp;the&nbsp;process&nbsp;when&nbsp;check&nbsp;commit&nbsp;and&nbsp;warnCount&nbsp;is&nbsp;not&nbsp;0&nbsp;and&nbsp;it&nbsp;is&nbsp;strict&nbsp;mode<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Exit&nbsp;the&nbsp;process&nbsp;when&nbsp;the&nbsp;warn&nbsp;count&nbsp;is&nbsp;more&nbsp;than&nbsp;the&nbsp;limit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCount&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>&nbsp;||<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span data-darkreader-inline-color="">this</span>.strict&nbsp;&amp;&amp;&nbsp;warningCount&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;||<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span data-darkreader-inline-color="">this</span>.maxWarnings&nbsp;&amp;&amp;&nbsp;warningCount&nbsp;-&nbsp;<span data-darkreader-inline-color="">this</span>.maxWarnings&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process.exit(<span data-darkreader-inline-color="">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;lint&nbsp;file&nbsp;pattern&nbsp;for&nbsp;different&nbsp;path<br>&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;{string[]}&nbsp;ext&nbsp;File&nbsp;extension&nbsp;list<br>&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;{string[]}&nbsp;files&nbsp;File&nbsp;List<br>&nbsp;&nbsp;&nbsp;*&nbsp;@returns<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;getLintFiles(ext:&nbsp;<span data-darkreader-inline-color="">string</span>[],&nbsp;files?:&nbsp;<span data-darkreader-inline-color="">string</span>[])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(files&nbsp;&amp;&amp;&nbsp;files.length)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;filter(files,&nbsp;<span>(<span>fileName</span>)&nbsp;=&gt;</span>&nbsp;ext.includes(path.extname(fileName)));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;pattern&nbsp;=&nbsp;<span data-darkreader-inline-color="">`**/*.{<span data-darkreader-inline-color="">${ext.map((e)&nbsp;=&gt;&nbsp;e.replace(<span data-darkreader-inline-color="">/^./</span>,&nbsp;<span data-darkreader-inline-color="">''</span>)).join(<span data-darkreader-inline-color="">','</span>)}</span>}`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;path.resolve(fs.cwd,&nbsp;<span data-darkreader-inline-color="">this</span>.src&nbsp;||&nbsp;fs.cwd,&nbsp;pattern);<br>&nbsp;&nbsp;}<br>}<br>
```

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ `@hippo/api` LintCommand ä¸­ï¼Œå†…éƒ¨ä¼šè°ƒç”¨Eslintå’Œ Typescript APIæ¥æ ¡éªŒä»£ç ï¼Œåœ¨toolkit lintå‘½ä»¤ä¸­åªéœ€è¦ç»§æ‰¿ `@hippo/api` ä¸­çš„LintCommandï¼Œç„¶åå®ç° `getLintConfigs` æ–¹æ³•ä¼ å…¥ç›¸åº”çš„eslintå’Œtypescripté…ç½®æ–‡ä»¶è·¯å¾„å³å¯

å…¶ä»– `@hippo/api` æŠ½è±¡å‘½ä»¤å®ç°é€»è¾‘å¤§åŒå°å¼‚ï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°äº†ã€‚

> ä»¥ä¸Šä»£ç åªæ˜¯æ ¸å¿ƒé€»è¾‘ï¼Œä¸åŒ…å«å®Œæ•´çš„é€»è¾‘é“¾è·¯

## 4.3 @hippo/toolkit-\*

å¼€å‘çš„toolkitåç§°å¿…é¡»è¦ä»¥ `@hippo/toolkit-` å¼€å¤´ã€‚toolkitéœ€è¦ä¾èµ– `@hippo/api` å¹¶ä¸”æŒ‰éœ€å®ç°å¯¹åº”çš„å·¥ä½œæµå‘½ä»¤ã€‚æ¯”å¦‚

`BuildCommand`

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;BuildCommand&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;BuildBaseCommand&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/api'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;BuildCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BuildBaseCommand&nbsp;{<br>&nbsp;&nbsp;logger&nbsp;=&nbsp;<span data-darkreader-inline-color="">this</span>.apis.createLogger(<span data-darkreader-inline-color="">'library-build'</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;run()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;do&nbsp;something...</span><br>&nbsp;&nbsp;}<br>}<br>
```

`LintCommand`

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;LintCommand&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;LintBaseCommand&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/api'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;path&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'path'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">LintCommand</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">LintBaseCommand</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;getLintConfigs()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">ignorePath</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">eslint</span>:&nbsp;path.resolve(__dirname,&nbsp;<span data-darkreader-inline-color="">'../../configs/.eslintignore'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">lintConfig</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">eslint</span>:&nbsp;path.resolve(__dirname,&nbsp;<span data-darkreader-inline-color="">'../../configs/.eslintrc.yml'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">typescript</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">extends</span>:&nbsp;path.resolve(__dirname,&nbsp;<span data-darkreader-inline-color="">'../../configs/tsconfig.json'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>}<br>
```

åŒæ—¶toolkité™¤äº†å·¥ä½œæµå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å®ç°å…¶ä»–éå·¥ä½œæµå‘½ä»¤ã€‚åªéœ€è¦ç»§æ‰¿ `@hippo/api` ä¸­çš„ `BaseCommand` , åŒæ—¶å¯¼å‡ºåˆ° `commands` å±æ€§ä¸­å³å¯ï¼ˆ`@hippo/cli` ä¼šä»toolkitçš„ `commands` å±æ€§ä¸­è·å–æ‰€æœ‰å‘½ä»¤ä¾æ¬¡æ³¨å†Œåˆ°cliä¸­ï¼‰

```
<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;BaseCommand,&nbsp;Option,&nbsp;Command&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/api'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">class</span>&nbsp;OtherCommand&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;BaseCommand&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;paths&nbsp;=&nbsp;[[<span data-darkreader-inline-color="">'other'</span>]];<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;run()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;do&nbsp;something...</span><br>&nbsp;&nbsp;}<br>}<br>
```

toolkit çš„å…¥å£æ–‡ä»¶ä¸€èˆ¬å¦‚ä¸‹ï¼š

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;displayName&nbsp;=&nbsp;<span data-darkreader-inline-color="">'Monorepo'</span>;<br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;description&nbsp;=&nbsp;<span data-darkreader-inline-color="">'A&nbsp;monorepo&nbsp;project'</span>;<br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;name&nbsp;=&nbsp;<span data-darkreader-inline-color="">'monorepo'</span>;<br><br><br><span data-darkreader-inline-color="">export</span>&nbsp;{&nbsp;version&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'../package.json'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;{&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;create&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./create'</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;*&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;commands&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./commands'</span>;<br>
```

> ç›®å‰æˆ‘ä»¬å†…ç½®äº†6ç§toolkit
> 
> ![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
> 
> 2023-06-30-17-36-35-image.png

## 5\. hippoè§„èŒƒ

ä»ä¸Šæ–‡å¾—çŸ¥ï¼Œåœ¨toolkit lintå‘½ä»¤ä¸­ï¼Œä¸€èˆ¬ä¼šè¿”å›ç›¸åº”çš„eslinté…ç½®æ–‡ä»¶ï¼Œeslinté…ç½®æ–‡ä»¶å…¶ä¸€èˆ¬ä¸º

```
<span data-darkreader-inline-color="">extends:</span>&nbsp;<span data-darkreader-inline-color="">'@hippo/eslint-config/recommended'</span><br>
```

## 5.1 @hippo/eslint-config

`@hippo/eslint-config` æ˜¯æˆ‘ä»¬æä¾›çš„ä¸€å¥— eslint è§„èŒƒï¼Œç›®å‰æˆ‘ä»¬å›¢é˜Ÿä¸¥æ ¼éµå¾ªæ­¤è§„èŒƒï¼Œå®ƒåŸºäºÂ eslint-config-airbnb-base<sup data-darkreader-inline-color="">[8]</sup> å¹¶ä¸”ä¿®æ”¹äº†ä¸€äº›æˆ‘ä»¬è®¤ä¸ºä¸åˆç†çš„è§„åˆ™ï¼ŒåŒæ—¶ä¹Ÿç»§æ‰¿äº†æˆ‘ä»¬å®ç° `@hippo/eslint-plugin` ã€‚

æ­¤å¤–ï¼Œ`@hippo/eslint-config`Â ä¹Ÿæ”¯æŒ `all-in-one`Â ç‰¹æ€§ï¼Œå³ä½¿ç”¨æ–¹ä¸éœ€è¦å®‰è£…ä»»ä½•Â `eslint-config-*`Â æˆ–Â `eslint-plugin`Â ä¾èµ–

> ç›®å‰ç¤¾åŒºä¸Šä¸»æµçš„ eslint configÂ éƒ½éœ€è¦ä½¿ç”¨æ–¹åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®‰è£…é¢å¤–çš„eslint pluginä¾èµ–ï¼Œæ¯”å¦‚
> 
> -   eslint-config-airbnb-base<sup data-darkreader-inline-color="">[9]</sup>
>     
> -   eslint-config-standard<sup data-darkreader-inline-color="">[10]</sup>
>     
> -   eslint-config-alloy<sup data-darkreader-inline-color="">[11]</sup>
>     
> -   ...
>     
> 
> ç„¶è€ŒÂ `@hippo/eslint-config`Â å†…ç½®äº†configå¿…è¦çš„eslint plugin
> 
> -   eslint-plugin-import<sup data-darkreader-inline-color="">[12]</sup>
>     
> -   eslint-plugin-react<sup data-darkreader-inline-color="">[13]</sup>
>     
> -   eslint-plugin-react-hooks<sup data-darkreader-inline-color="">[14]</sup>
>     
> -   eslint-plugin-react-native<sup data-darkreader-inline-color="">[15]</sup>
>     
> -   eslint-plugin-eslint-comments<sup data-darkreader-inline-color="">[16]</sup>
>     
> -   \\@typescript-eslint/eslint-plugin<sup data-darkreader-inline-color="">[17]</sup>
>     
> -   @hippo/eslint-plugin
>     
> 
> ä½¿ç”¨æ–¹åªéœ€è¦å®‰è£…Â `@hippo/eslint-config`Â å³å¯ï¼Œé™ä½å¿ƒæ™ºè´Ÿæ‹…

ç›®å‰Â `@hippo/eslint-config`Â æä¾›äº†å››ç§config setï¼Œåˆ†åˆ«ä¸º

### recommended

æä¾›ç»™nodeé¡¹ç›®æˆ–è€…çº¯JavaScripté¡¹ç›®ä½¿ç”¨

```
<span data-darkreader-inline-color="">require</span>(<span data-darkreader-inline-color="">'@rushstack/eslint-patch/modern-module-resolution'</span>);<br><br><span data-darkreader-inline-color="">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">extends</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'airbnb-base'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'eslint:recommended'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'plugin:@typescript-eslint/recommended'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'prettier'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'plugin:@hippo/recommended'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'plugin:eslint-comments/recommended'</span>,<br>&nbsp;&nbsp;],<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">reportUnusedDisableDirectives</span>:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">settings</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'import/resolver'</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'eslint-import-resolver-node'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'eslint-import-resolver-typescript'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Append&nbsp;'ts'&nbsp;extensions&nbsp;to&nbsp;Airbnb&nbsp;'import/extensions'&nbsp;setting</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'import/extensions'</span>:&nbsp;[<span data-darkreader-inline-color="">'.js'</span>,&nbsp;<span data-darkreader-inline-color="">'.mjs'</span>,&nbsp;<span data-darkreader-inline-color="">'.jsx'</span>,&nbsp;<span data-darkreader-inline-color="">'.ts'</span>,&nbsp;<span data-darkreader-inline-color="">'.tsx'</span>,&nbsp;<span data-darkreader-inline-color="">'.d.ts'</span>],<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">rules</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;The&nbsp;reason&nbsp;why&nbsp;Airbnb&nbsp;turned&nbsp;on&nbsp;this&nbsp;rule&nbsp;is&nbsp;that&nbsp;they&nbsp;discourage&nbsp;to&nbsp;use&nbsp;loops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Details&nbsp;in&nbsp;https://github.com/airbnb/javascript/issues/1103</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;That&nbsp;doesn't&nbsp;make&nbsp;sense&nbsp;to&nbsp;us&nbsp;since&nbsp;we&nbsp;allow&nbsp;to&nbsp;use&nbsp;`while`&nbsp;and&nbsp;early-return&nbsp;technique&nbsp;relies&nbsp;on&nbsp;`continue`&nbsp;in&nbsp;loops</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'no-continue'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;}<br>}<br>
```

### react-native

æä¾›ç»™react nativeé¡¹ç›®ä½¿ç”¨

```
<span data-darkreader-inline-color="">require</span>(<span data-darkreader-inline-color="">'@rushstack/eslint-patch/modern-module-resolution'</span>);<br><br><span data-darkreader-inline-color="">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">env</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react-native/react-native'</span>:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">extends</span>:&nbsp;[<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'./react'</span>),&nbsp;<span data-darkreader-inline-color="">'plugin:react-native/all'</span>],<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">settings</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'import/resolver'</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'./utils/aliasResolver'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'eslint-import-resolver-typescript'</span>),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'eslint-import-resolver-react-native'</span>)]:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;which&nbsp;extensions&nbsp;will&nbsp;be&nbsp;searched</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">extensions</span>:&nbsp;[<span data-darkreader-inline-color="">'.tsx'</span>,&nbsp;<span data-darkreader-inline-color="">'.ts'</span>,&nbsp;<span data-darkreader-inline-color="">'.js'</span>,&nbsp;<span data-darkreader-inline-color="">'.jsx'</span>,&nbsp;<span data-darkreader-inline-color="">'.mjs'</span>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">rules</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;<span data-darkreader-inline-color="">FIXME:</span>&nbsp;we&nbsp;might&nbsp;need&nbsp;to&nbsp;develop&nbsp;a&nbsp;similar&nbsp;but&nbsp;specific&nbsp;rule&nbsp;for&nbsp;react-native</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'@typescript-eslint/no-use-before-define'</span>:&nbsp;[<span data-darkreader-inline-color="">'error'</span>,&nbsp;{&nbsp;<span data-darkreader-inline-color="">variables</span>:&nbsp;<span data-darkreader-inline-color="">false</span>&nbsp;}],<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react-native/no-color-literals'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react-native/sort-styles'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br>&nbsp;&nbsp;},<br>};<br>
```

æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªé¢å¤–çš„ aliasResolverï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„ RNé¡¹ç›®ä¸­ä½¿ç”¨äº†åˆ«åï¼Œæ˜¯é€šè¿‡ babel-plugin-module-resolver<sup data-darkreader-inline-color="">[18]</sup> æ­¤babel pluginæ”¯æŒçš„ã€‚ä¸ºäº†è®©Â `eslint-plugin-import`Â ä¸­çš„éœ€è¦resolveæ–‡ä»¶çš„è§„åˆ™èƒ½è§£æåˆ°æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª resolver<sup data-darkreader-inline-color="">[19]</sup>ã€‚å…¶å†…éƒ¨åŸç†æ¯”è¾ƒç®€å•ä¸babel-plugin-module-resolver<sup data-darkreader-inline-color="">[20]</sup> åŸºæœ¬ä¸€è‡´ã€‚

### react

æä¾›ç»™ä¿æŒè€çš„JSX transformï¼ˆturned JSX intoÂ `React.createElement(...)`Â callsï¼‰çš„reacté¡¹ç›®ä½¿ç”¨

```
<span data-darkreader-inline-color="">require</span>(<span data-darkreader-inline-color="">'@rushstack/eslint-patch/modern-module-resolution'</span>);<br><br><span data-darkreader-inline-color="">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">extends</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'airbnb/rules/react'</span>,&nbsp;<span data-darkreader-inline-color="">//&nbsp;don't&nbsp;import&nbsp;a11y&nbsp;rules</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'airbnb/hooks'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'./recommended'</span>),<br>&nbsp;&nbsp;],<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">rules</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Since&nbsp;we&nbsp;already&nbsp;use&nbsp;TypeScript,&nbsp;we&nbsp;don't&nbsp;quite&nbsp;need&nbsp;this&nbsp;rule</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react/require-default-props'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Since&nbsp;we&nbsp;already&nbsp;use&nbsp;TypeScript,&nbsp;turning&nbsp;on&nbsp;this&nbsp;rule&nbsp;will&nbsp;conflict&nbsp;with&nbsp;ts&nbsp;type&nbsp;detection</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react/static-property-placement'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react/function-component-definition'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react/jsx-filename-extension'</span>:&nbsp;[<span data-darkreader-inline-color="">1</span>,&nbsp;{&nbsp;<span data-darkreader-inline-color="">extensions</span>:&nbsp;[<span data-darkreader-inline-color="">'.tsx'</span>]&nbsp;}],<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;No&nbsp;worries&nbsp;since&nbsp;we&nbsp;write&nbsp;in&nbsp;TypeScript</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">'react/jsx-props-no-spreading'</span>:&nbsp;<span data-darkreader-inline-color="">'off'</span>,<br>&nbsp;&nbsp;},<br>};<br>
```

### react-17

æä¾›ç»™ä½¿ç”¨äº†æ–°çš„Â new-jsx-transform<sup data-darkreader-inline-color="">[21]</sup>Â JSX transformçš„reacté¡¹ç›®ä½¿ç”¨

```
<span data-darkreader-inline-color="">require</span>(<span data-darkreader-inline-color="">'@rushstack/eslint-patch/modern-module-resolution'</span>);<br><br><span data-darkreader-inline-color="">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">extends</span>:&nbsp;[<span data-darkreader-inline-color="">require</span>.resolve(<span data-darkreader-inline-color="">'./react'</span>),&nbsp;<span data-darkreader-inline-color="">'plugin:react/jsx-runtime'</span>],<br>};<br>
```

### å¦‚ä½•æ”¯æŒ all-in-one ç‰¹æ€§ï¼Ÿ

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Â \\@rushstack/eslint-patch/modern-module-resolution<sup data-darkreader-inline-color="">[22]</sup>

æˆ‘ä»¬åœ¨æ¯ä¸ªconfig setä¹‹å‰ä¼šè°ƒç”¨

```
<span data-darkreader-inline-color="">require</span>(<span data-darkreader-inline-color="">'@rushstack/eslint-patch/modern-module-resolution'</span>);<br>
```

å®ƒå°†resolve `eslint-plugin-*` æˆ– `eslint-config-*` çš„æ–¹å¼ä»ç”¨æˆ·é¡¹ç›®ä¸­çš„node\_modulesæ”¹å˜ä¸ºæˆ‘ä»¬configä¸­çš„node\_modulesï¼Œä»è€Œå®Œç¾çš„æ”¯æŒ `all-in-one` ç‰¹æ€§

## 5.2 @hippo/eslint-plugin

`@hippo/eslint-plugin` å®ç°äº†ä¸€äº›æˆ‘ä»¬å›¢é˜Ÿçš„Eslint ruleï¼Œç”±äºç¯‡å¹…æœ‰é™è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚

å‚è€ƒï¼š

-   Feflow<sup data-darkreader-inline-color="">[23]</sup>
    
-   modernjs.dev/<sup data-darkreader-inline-color="">[24]</sup>
    
-   GitHub - yarnpkg/berry: ğŸ“¦ğŸˆ Active development trunk for Yarn âš’<sup data-darkreader-inline-color="">[25]</sup>
    

å…³äºæœ¬æ–‡  

## ä½œè€…ï¼šlcwlucky

https://juejin.cn/post/7250375753597943863

The End

å¦‚æœä½ è§‰å¾—è¿™ç¯‡å†…å®¹å¯¹ä½ æŒºæœ‰å¯å‘ï¼Œæˆ‘æƒ³è¯·ä½ å¸®æˆ‘ä¸‰ä¸ªå°å¿™ï¼š

1ã€ç‚¹ä¸ªÂ ã€Œåœ¨çœ‹ã€ï¼Œè®©æ›´å¤šçš„äººä¹Ÿèƒ½çœ‹åˆ°è¿™ç¯‡å†…å®¹

2ã€å…³æ³¨å®˜ç½‘Â https://muyiy.cnï¼Œè®©æˆ‘ä»¬æˆä¸ºé•¿æœŸå…³ç³»

3ã€å…³æ³¨å…¬ä¼—å·ã€Œé«˜çº§å‰ç«¯è¿›é˜¶ã€ï¼Œå…¬ä¼—å·åå°å›å¤Â ã€ŒåŠ ç¾¤ã€Â ï¼ŒåŠ å…¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¹¶é€ä½ ç²¾å¿ƒæ•´ç†çš„é«˜çº§å‰ç«¯é¢è¯•é¢˜ã€‚

ã€‹ã€‹é¢è¯•å®˜éƒ½åœ¨ç”¨çš„é¢˜åº“ï¼Œå¿«æ¥çœ‹çœ‹ã€Šã€Š  

```
<section data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" data-darkmode-bgcolor-15987645674728="rgb(25, 25, 25)" data-darkmode-original-bgcolor-15987645674728="rgb(255, 255, 255)" data-darkmode-color-15987645674728="rgb(163, 163, 163)" data-darkmode-original-color-15987645674728="rgb(62, 62, 62)" data-style="letter-spacing: 0px; white-space: normal; font-size: 16px; color: rgb(62, 62, 62); font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; widows: 1; line-height: 1.6;" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkmode-color="rgb(137, 137, 137)" data-darkmode-original-color="rgb(89, 89, 89)" data-darkmode-color-16030305897056="rgb(141, 141, 141)" data-darkmode-original-color-16030305897056="rgb(89, 89, 89)" data-darkmode-color-16057140139831="rgb(141, 141, 141)" data-darkmode-original-color-16057140139831="rgb(89, 89, 89)" data-darkreader-inline-outline=""><pre data-original-code="<br><br>The Endå¦‚æœä½ è§‰å¾—è¿™ç¯‡å†…å®¹å¯¹ä½ æŒºæœ‰å¯å‘ï¼Œæˆ‘æƒ³è¯·ä½ å¸®æˆ‘ä¸‰ä¸ªå°å¿™ï¼šç‚¹ä¸ªã€Œåœ¨çœ‹ã€ï¼Œè®©æ›´å¤šçš„äººä¹Ÿèƒ½çœ‹åˆ°è¿™ç¯‡å†…å®¹<br>å…³æ³¨å®˜ç½‘ https://muyiy.cnï¼Œè®©æˆ‘ä»¬æˆä¸ºé•¿æœŸå…³ç³»<br>å…³æ³¨å…¬ä¼—å·ã€Œé«˜çº§å‰ç«¯è¿›é˜¶ã€ï¼Œå…¬ä¼—å·åå°å›å¤ã€ŒåŠ ç¾¤ã€ åŠ å…¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ å¹¶é€ä½ ç²¾å¿ƒæ•´ç†çš„é«˜çº§å‰ç«¯é¢è¯•é¢˜ã€‚<br>ã€‹ã€‹é¢è¯•å®˜éƒ½åœ¨ç”¨çš„é¢˜åº“ï¼Œå¿«æ¥çœ‹çœ‹ã€Šã€Š                        é«˜çº§å‰ç«¯è¿›é˜¶ å‘èµ·äº†ä¸€ä¸ªè¯»è€…è®¨è®º         å‚ä¸è®¨è®º                                        <br>â€œåœ¨çœ‹â€å—ï¼Ÿåœ¨çœ‹å°±ç‚¹ä¸€ä¸‹å§<br>" data-snippet-id="ext.89a96a6ef2d46757b2677de8206703d5" data-snippet-saved="false" data-codota-status="done" data-darkmode-color-16030305897056="rgb(141, 141, 141)" data-darkmode-original-color-16030305897056="rgb(89, 89, 89)" data-darkmode-color="rgb(137, 137, 137)" data-darkmode-original-color="rgb(89, 89, 89)" data-darkmode-color-16057140139831="rgb(141, 141, 141)" data-darkmode-original-color-16057140139831="rgb(89, 89, 89)" data-darkreader-inline-outline=""><section data-darkmode-color-16030305897056="rgb(141, 141, 141)" data-darkmode-original-color-16030305897056="rgb(89, 89, 89)" data-style="padding-right: 10px; padding-left: 10px; letter-spacing: 0px; background-color: rgb(255, 255, 255); line-height: 1.6; word-break: break-word;" data-darkmode-color="rgb(137, 137, 137)" data-darkmode-original-color="rgb(89, 89, 89)" data-darkmode-color-16057140139831="rgb(141, 141, 141)" data-darkmode-original-color-16057140139831="rgb(89, 89, 89)" data-darkreader-inline-outline="" data-darkreader-inline-color="" data-tools="æ–°åª’ä½“æ’ç‰ˆ" data-id="13777" data-style-type="å…³æ³¨" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" data-darkmode-bgcolor-16018219266315="rgb(25, 25, 25)" data-darkmode-original-bgcolor-16018219266315="rgb(255, 255, 255)" data-darkmode-color-16018219266315="rgb(163, 163, 163)" data-darkmode-original-color-16018219266315="rgb(0,0,0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkmode-bgcolor-16020008769986="rgb(25, 25, 25)" data-darkmode-original-bgcolor-16020008769986="rgb(255, 255, 255)" data-darkmode-color-16020008769986="rgb(163, 163, 163)" data-darkmode-original-color-16020008769986="rgb(0,0,0)" data-darkmode-color-16021670869911="rgb(163, 163, 163)" data-darkmode-original-color-16021670869911="rgb(0,0,0)" data-darkmode-bgcolor-16021670869911="rgb(25, 25, 25)" data-darkmode-original-bgcolor-16021670869911="rgb(255, 255, 255)"><p data-tool="mdniceç¼–è¾‘å™¨" data-darkmode-color-16057140139831="rgb(141, 141, 141)" data-darkmode-original-color-16057140139831="rgb(89, 89, 89)" data-style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: rgb(89, 89, 89);" data-darkreader-inline-outline=""><span data-darkreader-inline-outline="" data-darkreader-inline-color="">æœ€åä¸è¦å¿˜äº†ç‚¹èµå‘¦ï¼</span></p></section></pre></section>
```