## 一、动态rem适配方案：适合H5项目的适配方案

### 1\. @media媒体查询适配

首先，我们需要设置一个根元素的基准值，这个基准值通常根据视口宽度进行计算。可以在项目的 CSS 文件中，通过媒体查询动态调整根元素的 `font-size`。

```
<span></span><code><span>html</span>&nbsp;{<br>&nbsp;&nbsp;<span>font-size</span>:&nbsp;<span>16px</span>;&nbsp;<span>/*&nbsp;默认基准值&nbsp;*/</span><br>}<br>...<br><span>@media</span>&nbsp;(<span>min-width:</span>&nbsp;<span>1024px</span>)&nbsp;{<br>&nbsp;&nbsp;<span>html</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>font-size</span>:&nbsp;<span>14px</span>;&nbsp;<span>/*&nbsp;适配较大屏幕&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br><span>@media</span>&nbsp;(<span>min-width:</span>&nbsp;<span>1440px</span>)&nbsp;{<br>&nbsp;&nbsp;<span>html</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>font-size</span>:&nbsp;<span>16px</span>;&nbsp;<span>/*&nbsp;适配超大屏幕&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br></code>
```

### 2\. PostCSS 插件（自动转换）实现 px2rem

手动转换 `px` 为 `rem` 可能很繁琐，因此可以使用 `PostCSS` 插件 `postcss-pxtorem` 来自动完成这一转换。

#### 2.1 安装 postcss-pxtorem

首先，在项目中安装 postcss-pxtorem 插件：

```
<span></span><code>npm&nbsp;install&nbsp;postcss-pxtorem&nbsp;--save-dev<br></code>
```

#### 2.2 配置 PostCSS

然后，在项目根目录创建或编辑 postcss.config.js 文件，添加 postcss-pxtorem 插件配置：

```
<span></span><code><span>/*&nbsp;postcss.config.cjs&nbsp;&nbsp;*/</span><br><span>module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span>plugins</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>'postcss-pxtorem'</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>rootValue</span>:&nbsp;<span>16</span>,&nbsp;<span>//&nbsp;基准值，对应于根元素的&nbsp;font-size</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>unitPrecision</span>:&nbsp;<span>5</span>,&nbsp;<span>//&nbsp;保留小数点位数</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>propList</span>:&nbsp;[<span>'*'</span>,&nbsp;<span>'!min-width'</span>,&nbsp;<span>'!max-width'</span>],&nbsp;<span>//&nbsp;排除&nbsp;min-width&nbsp;和&nbsp;max-width&nbsp;属性</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>selectorBlackList</span>:&nbsp;[],&nbsp;<span>//&nbsp;忽略的选择器</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>replace</span>:&nbsp;<span>true</span>,&nbsp;<span>//&nbsp;替换而不是添加备用属性</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>mediaQuery</span>:&nbsp;<span>false</span>,&nbsp;<span>//&nbsp;允许在媒体查询中转换&nbsp;px</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>minPixelValue</span>:&nbsp;<span>0</span>&nbsp;<span>//&nbsp;最小的转换数值</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>};<br><span>/*&nbsp;vite&nbsp;&nbsp;*/</span><br><span>export</span>&nbsp;<span>default</span>&nbsp;defineConfig({<br>&nbsp;&nbsp;<span>css</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>postcss</span>:&nbsp;<span>'./postcss.config.cjs'</span>,<br>&nbsp;&nbsp;}<br>})<br></code>
```

### 3\. 在 CSS/SCSS 中使用 px

在编写样式时，依然可以使用 `px` 进行布局：

```
<span></span><code><span>.container</span>&nbsp;{<br>&nbsp;&nbsp;<span>width</span>:&nbsp;<span>320px</span>;<br>&nbsp;&nbsp;<span>padding</span>:&nbsp;<span>16px</span>;<br>}<br><br><span>.header</span>&nbsp;{<br>&nbsp;&nbsp;<span>height</span>:&nbsp;<span>64px</span>;<br>&nbsp;&nbsp;<span>margin-bottom</span>:&nbsp;<span>24px</span>;<br>}<br></code>
```

### 4\. 构建项目

通过构建工具（如 `webpack/vite` ）运行项目时，`PostCSS` 插件会自动将 `px` 转换为 `rem`。

![Image](https://mmbiz.qpic.cn/sz_mmbiz_png/cAd6ObKOzEAs11w1fg8Y48aliaWQxSTozFWI1nqXkAT6hS7OEG2kvMvaepNDv0r0XQNkZAIqNpEa3C6vSWUQ3fA/640?wx_fmt=png&from=appmsg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

### 5\. 可以不用@media媒体查询，动态动态调整font-size

为了实现更动态的适配，可以通过 `JavaScript` 动态设置根元素的 `font-size`：

```
<span></span><code>/**utils/setRootFontSize**/<br>function setRootFontSize(): void {<br>     const docEl = document.documentElement;<br>     const clientWidth = docEl.clientWidth;<br>     if (!clientWidth) return;<br>     const baseFontSize = 16; // 基准字体大小<br>     const designWidth = 1920; // 设计稿宽度<br>     docEl.style.fontSize = (baseFontSize * (clientWidth / designWidth)) + 'px';<br>   }<br>   export default setRootFontSize;<br><br>/**utils/setRootFontSize**/<br>/**APP**/<br>import setRootFontSize from '../utils/setRootFontSize';<br>import { useEffect } from 'react';<br><br>export default function App() {<br>  useEffect(() =&gt; {<br>    // 设置根元素的字体大小<br>    setRootFontSize();<br>    // 窗口大小改变时重新设置<br>    window.addEventListener('resize', setRootFontSize);<br>    // 清除事件监听器<br>    return () =&gt; {<br>      window.removeEventListener('resize', setRootFontSize);<br>    };<br>  }, []);<br>  <br>  return (<br>    &lt;&gt;<br>      &lt;div&gt;<br>        &lt;MyRoutes /&gt;<br>      &lt;/div&gt;<br>    &lt;/&gt;<br>  )<br>}<br>/**APP**/<br></code>
```

这样，无论视口宽度如何变化，页面元素都会根据基准值动态调整大小，确保良好的适配效果。通过上述步骤，可以实现布局使用 `px`，并动态转换为 `rem` 的适配方案。这个方案不仅使得样式编写更加简洁，还提高了适配的灵活性。

注：如果你使用了 setRootFontSize 动态调整根元素的 `font-size`，就不再需要使用 @media 查询来调整根元素的字体大小了。这是因为 `setRootFontSize` 函数已经根据视口宽度动态调整了 font-size，从而实现了自适应。

1.  **动态调整根元素 `font-size` 的优势**：
    

-   更加灵活：可以实现更加平滑的响应式调整，而不是依赖固定的断点。
    
-   统一管理：所有的样式都依赖根元素的 font-size，维护起来更加简单。
    

3.  **`@media` 媒体查询的优势**：
    

-   尽管不再需要用 `@media` 查询来调整根元素的 `font-size`，但你可能仍然需要使用 `@media` 查询来处理其他的响应式设计需求，比如调整布局、隐藏或显示元素等。
    

这种方式简化了响应式设计，使得样式统一管理更加简单，同时保留了灵活性和适应性。

### 6\. 效果对比（非H5界面）

图一为界面`px` 适配，效果为图片，文字等大小固定不变。

图二为动态`rem`适配：整体随界面扩大而扩大，能够保持相对比例。

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Screen-2024-06-13-155704-ezgif.com-video-to-gif-converter

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

t11b673bcd6119f4e6a5e9509cf

### 7\. Tips

-   动态`rem`此方案比较适合H5屏幕适配
    
-   注意: `PostCSS` 转换`rem`应排除 `min-width` 、`max-width`、`min-height`和`max-height` ，以免影响整体界面
    

## 二、其他适配

### 1\. 弹性盒模型（Flexbox）

`Flexbox` 是一种布局模型，能够轻松地实现响应式布局。它允许元素根据容器的大小自动调整位置和大小。

```
<span></span><code>.container&nbsp;{<br>&nbsp;&nbsp;<span>display</span>:&nbsp;flex;<br>&nbsp;&nbsp;flex-wrap:&nbsp;wrap;<br>}<br><br>.item&nbsp;{<br>&nbsp;&nbsp;<span>flex</span>:&nbsp;<span>1</span>&nbsp;<span>1</span>&nbsp;<span>100</span>%;&nbsp;<span>/*&nbsp;默认情况下每个元素占满一行&nbsp;*/</span><br>}<br><br>@media&nbsp;(min-width:&nbsp;<span>600</span>px)&nbsp;{<br>&nbsp;&nbsp;.item&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>flex</span>:&nbsp;<span>1</span>&nbsp;<span>1</span>&nbsp;<span>50</span>%;&nbsp;<span>/*&nbsp;在较宽的屏幕上，每个元素占半行&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br><br>@media&nbsp;(min-width:&nbsp;<span>1024</span>px)&nbsp;{<br>&nbsp;&nbsp;.item&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>flex</span>:&nbsp;<span>1</span>&nbsp;<span>1</span>&nbsp;<span>33.33</span>%;&nbsp;<span>/*&nbsp;在更宽的屏幕上，每个元素占三分之一行&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br></code>
```

### 2\. 栅格系统（Grid System）

栅格系统是一种常见的响应式布局方案，广泛应用于各种框架（如 `Bootstrap`）。通过定义行和列，可以轻松地创建复杂的布局。

```
<span></span><code>.container&nbsp;{<br>&nbsp;&nbsp;<span>display</span>:&nbsp;grid;<br>&nbsp;&nbsp;grid-template-columns:&nbsp;<span>1</span>fr;&nbsp;<span>/*&nbsp;默认情况下每行一个列&nbsp;*/</span><br>&nbsp;&nbsp;gap:&nbsp;<span>10</span>px;<br>}<br><br>@media&nbsp;(min-width:&nbsp;<span>600</span>px)&nbsp;{<br>&nbsp;&nbsp;.container&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;grid-template-columns:&nbsp;<span>1</span>fr&nbsp;<span>1</span>fr;&nbsp;<span>/*&nbsp;在较宽的屏幕上，每行两个列&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br><br>@media&nbsp;(min-width:&nbsp;<span>1024</span>px)&nbsp;{<br>&nbsp;&nbsp;.container&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;grid-template-columns:&nbsp;<span>1</span>fr&nbsp;<span>1</span>fr&nbsp;<span>1</span>fr;&nbsp;<span>/*&nbsp;在更宽的屏幕上，每行三个列&nbsp;*/</span><br>&nbsp;&nbsp;}<br>}<br></code>
```

### 3\. 百分比和视口单位

使用百分比（`%`）、视口宽度（`vw`）、视口高度（`vh`）等单位，可以根据视口尺寸调整元素大小。

```
<span></span><code>&nbsp;&nbsp;<span>/*&nbsp;示例：百分比和视口单位&nbsp;*/</span><br>&nbsp;&nbsp;.container&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>width</span>:&nbsp;<span>100</span>%;<br>&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;<span>50</span>vh;&nbsp;<span>/*&nbsp;高度为视口高度的一半&nbsp;*/</span><br>}<br><br>.element&nbsp;{<br>&nbsp;&nbsp;<span>width</span>:&nbsp;<span>50</span>%;&nbsp;<span>/*&nbsp;宽度为容器的一半&nbsp;*/</span><br>&nbsp;&nbsp;height:&nbsp;<span>10</span>vw;&nbsp;<span>/*&nbsp;高度为视口宽度的&nbsp;10%&nbsp;*/</span><br>}<br></code>
```

### 4\. 响应式图片

根据设备分辨率和尺寸加载不同版本的图片，以提高性能和视觉效果。可以使用 srcset 和 sizes 属性。

```
<span></span><code>&nbsp;&nbsp;&lt;!--&nbsp;示例：响应式图片&nbsp;--&gt;<br>&nbsp;&nbsp;<span><span>&lt;<span>img</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>src</span>=<span>"small.jpg"</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>srcset</span>=<span>"medium.jpg&nbsp;600w,&nbsp;large.jpg&nbsp;1024w"</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>sizes</span>=<span>"(max-width:&nbsp;600px)&nbsp;100vw,&nbsp;(max-width:&nbsp;1024px)&nbsp;50vw,&nbsp;33.33vw"</span>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span>alt</span>=<span>"Responsive&nbsp;Image"</span>&gt;</span><br></span></code>
```

### 5\. CSS Custom Properties（CSS变量）

使用 CSS 变量可以更灵活地定义和调整样式，同时通过 `JavaScript` 动态改变变量值实现响应式设计。

```
<span></span><code>:root&nbsp;{<br>&nbsp;&nbsp;--main-padding:&nbsp;<span>20</span>px;<br>}<br><br>.container&nbsp;{<br>&nbsp;&nbsp;<span>padding</span>:&nbsp;<span>var</span>(--main-padding);<br>}<br><br>@media&nbsp;(min-width:&nbsp;<span>600</span>px)&nbsp;{<br>:root&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;--main-padding:&nbsp;<span>40</span>px;<br>&nbsp;&nbsp;}<br>}<br></code>
```

\- END \-

**如果您关注前端+AI 相关领域可以扫码加群交流**

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

## 关于奇舞团

奇舞团是 360 集团最大的大前端团队，非常重视人才培养，有工程师、讲师、翻译官、业务接口人、团队 Leader 等多种发展方向供员工选择，并辅以提供相应的技术力、专业力、通用力、领导力等培训课程。奇舞团以开放和求贤的心态欢迎各种优秀人才关注和加入奇舞团。  

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)