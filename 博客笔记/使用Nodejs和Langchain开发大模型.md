## å‰è¨€ï¼š

ç†Ÿæ‚‰ ChatGPT çš„åŒå­¦ä¸€å®šè¿˜çŸ¥é“ Langchain è¿™ä¸ªAIå¼€å‘æ¡†æ¶ã€‚ç”±äºå¤§æ¨¡å‹çš„çŸ¥è¯†ä»…é™äºå®ƒçš„è®­ç»ƒæ•°æ®å†…éƒ¨ï¼Œå®ƒæœ‰ä¸€ä¸ªå¼ºå¤§çš„â€œå¤§è„‘â€è€Œæ²¡æœ‰â€œæ‰‹è‡‚â€ï¼Œè€Œ Langchain è¿™ä¸ªæ¡†æ¶å‡ºç°çš„èƒŒæ™¯å°±æ˜¯è§£å†³å¤§æ¨¡å‹ç¼ºå°‘â€œæ‰‹è‡‚â€çš„é—®é¢˜ï¼Œä½¿å¾—å¤§æ¨¡å‹å¯ä»¥ä¸å¤–éƒ¨æ¥å£ï¼Œæ•°æ®åº“ï¼Œå‰ç«¯åº”ç”¨äº¤äº’ã€‚å¯ä»¥è¯´å¤§æ¨¡å‹è§£å†³äº†99%çš„æ™ºèƒ½åŒ–é—®é¢˜ï¼Œè€Œ Langchain å°±æ˜¯æ¥è§£å†³è¿™æœ€å1%å’Œå¤–éƒ¨åº”ç”¨çš„æ‰“é€šã€‚

Langchain åŒæ—¶æ”¯æŒ `python` å’Œ `nodejs` ï¼Œè¿™æ„å‘³ç€å³ä½¿ä¸ç†Ÿæ‚‰ python çš„å‰ç«¯æŠ€æœ¯æ ˆåŒå­¦ä¹Ÿèƒ½å¤Ÿæ— ç¼å‚ä¸åˆ°å¤§æ¨¡å‹äººå·¥æ™ºèƒ½åº”ç”¨çš„å¼€å‘ä¹‹ä¸­ã€‚

åœ¨æ­£å¼ä»‹ç» Langchain ä¹‹å‰ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹å•çº¯ä¾é ä¸€ä¸ªå¤§æ¨¡å‹è§£å†³ç”¨æˆ·éœ€æ±‚ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚

## å¤§è¯­è¨€æ¨¡å‹çš„ç¼ºé™·

### ç¼ºé™·1ï¼šæ¨¡å‹æ— æ³•æŒæ¡å®æ—¶èµ„è®¯

ChatGPT å¯ä»¥èŠå¤©ï¼Œè¿›è¡Œå¸¸è¯†é—®ç­”ï¼Œå†™æ–‡ç« ï¼Œè¿›è¡Œç¿»è¯‘ç­‰ç­‰ã€‚ä½†æ˜¯ç”±äºè®­ç»ƒä¸€ä¸ªå¤§æ¨¡å‹åºå¤§çš„æˆæœ¬ï¼ŒChatGPTï¼ˆåŒ…æ‹¬å…¶ä»–åŒç±»å‹å¤§è¯­è¨€æ¨¡å‹ï¼‰ï¼Œæ— æ³•åšåˆ°å®æ—¶å°†ä¸–ç•Œä¸Šå‘ç”Ÿçš„æ–°é—»è®­ç»ƒé›†æˆåˆ°æ¨¡å‹ä¸­ã€‚ChatGPT çš„çŸ¥è¯†æˆªæ­¢æ—¥æœŸæ˜¯2021å¹´9æœˆã€‚è¿™æ„å‘³ç€ ChatGPT åªåŒ…å«æˆªè‡³2021å¹´9æœˆä¹‹å‰çš„çŸ¥è¯†ã€‚

![Image](https://mmbiz.qpic.cn/mmbiz_png/lCQLg02gtibu8uzBAjcbAmPWjovicHic3LNsWKtkeKxcsXZGGvkEv2JdcYs2b2RgC1nlXHgTHPSvT4PqwhG1AqP0Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

> ç›´æ¥è¯¢é—®å»å¹´å‘ç”Ÿçš„æ–°é—»å¾—åˆ°çš„æ˜æ˜¾æ˜¯é”™è¯¯çš„ä¿¡æ¯ï¼Œè‹±å›½å¥³ç‹å·²äº2022å¹´9æœˆ8æ—¥å»ä¸–

### ç¼ºé™·2ï¼šã€Œä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ã€

å¤§è¯­è¨€æ¨¡å‹æ ¸å¿ƒåŸç†æ˜¯æ ¹æ®"æ¦‚ç‡"æ¥ä¸æ–­ç”Ÿæˆä¸‹ä¸€ä¸ª Token æ¥ç”Ÿæˆæ–°çš„å†…å®¹ã€‚åªè¦ä½ ç»™å‡ºçš„å¤§è‡´åˆä¹é€»è¾‘çš„æç¤ºè¯ï¼Œæ¨¡å‹å¯èƒ½ä¼šä¸€æœ¬æ­£ç»åœ°å¼€å§‹çç¼–ï¼Œé€šè¿‡æ¦‚ç‡æ¥ç”Ÿæˆæœ€åˆä¹é€»è¾‘çš„å†…å®¹ã€‚

![Image](https://mmbiz.qpic.cn/mmbiz_png/lCQLg02gtibu8uzBAjcbAmPWjovicHic3LNDWbe9O3oAbKhKOtptPkibbOvKVeCnhmyymRQgUMZwIiaqd4qLHpFG1Bg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

> çç¼–å†…å®¹ä¸¾ä¾‹ï¼Œçœ‹èµ·æ¥åˆä¹é€»è¾‘ä½†å®é™…ä¸Šéƒ½æ˜¯é”™è¯¯çš„

è¿™æ˜¯å› ä¸ºå¤§è¯­è¨€æ¨¡å‹å¹¶ä¸èƒ½åˆ¤æ–­ä»–æ‰€ç”Ÿæˆçš„å†…å®¹ç°å®ç”Ÿæ´»ä¸­æ˜¯å¦æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œä»–åªæ˜¯å•çº¯æ ¹æ®"æ¦‚ç‡"æ¥ç”Ÿæˆæœ€ç¬¦åˆè¯­è¨€ç»“æ„çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®å‰æ–‡çš„å†…å®¹å»ç”Ÿæˆåæ–‡çš„å†…å®¹ï¼Œå¹¶æ²¡æœ‰èƒ½åŠ›åˆ¤æ–­ç”Ÿæˆçš„å†…å®¹æ˜¯å¦å‡†ç¡®åˆä¹ç°å®åœºæ™¯ã€‚å¦‚æœä½ ç”¨ ChatGPT å†™è®ºæ–‡å¹¶ä¸”ä¸åŠ ä»¥ä¿®æ”¹çš„è¯ï¼ŒChatGPT ä¼šç»™ä½ ä¸€å †é”™è¯¯çš„å¼•ç”¨æ–‡çŒ®ï¼Œèƒ¡ç¼–ä¹±é€ çš„è®ºç‚¹ç­‰ç­‰ã€‚ç”šè‡³ä½ å¯ä»¥ç”¨ä»–æ¥ç”Ÿæˆä»¥å‡ä¹±çœŸçš„å‡æ–°é—»ç­‰ç­‰ã€‚è¿™äº›"ä»¥å‡ä¹±çœŸ"çš„å†…å®¹ï¼Œå¦‚æœä½¿ç”¨è€…æ²¡æœ‰ç›¸å…³èƒŒæ™¯çŸ¥è¯†ä¸åŠ ä»¥æŸ¥è¯çš„è¯ï¼Œå°†ä¼šå¯¹ä½¿ç”¨è€…é€ æˆæ¯”è¾ƒä¸¥é‡çš„è¯¯å¯¼ã€‚

### ç¼ºé™·3ï¼šé€»è¾‘è®¡ç®—èƒ½åŠ›çš„ç¼ºå¤±

è¿™ä¸€ç‚¹å…¶å®ä¹Ÿæ˜¯ä¸â€œæ¦‚ç‡â€è¿™ä¸€æ¨¡å‹åŸç†æœ‰å…³ç³»ï¼ŒèŠå¤©ï¼Œç”Ÿæˆæ–‡ç« æœ‰ä¸Šä¸‹æ–‡å°±èƒ½è·å¾—ä¸é”™çš„ç»“æœï¼Œä½†æ˜¯å¦‚æœæ˜¯å®Œæˆé€»è¾‘æ¨ç†ç±»çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å®Œæˆå°å­¦æ•°å­¦é¢˜ï¼Œè™½ç„¶èƒ½ç»™å‡ºæ­£ç¡®çš„æ–¹ç¨‹ç»„ï¼Œä½†æ˜¯è§£å‡ºæ¥çš„ç­”æ¡ˆå´æ˜¯é”™è¯¯çš„ï¼š

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

> é¸¡ç¬¼åŒå…”é—®é¢˜ï¼Œå¤§æ¨¡å‹æ— æ³•ç›´æ¥æ­£ç¡®åœ°è§£å‡ºæ–¹ç¨‹

è¿™æ˜¯å› ä¸º ChatGPT åªæ˜¯ä¸€ä¸ª**è¯­è¨€æ¨¡å‹**ï¼Œä»–åªæ˜¯å•çº¯æ ¹æ®å‰åæ–‡çš„å†…å®¹ç”Ÿæˆæœ€åƒæ ·çš„ç»“æœï¼Œåƒè§£æ–¹ç¨‹ç»“æœè¿™ç±»ä»»åŠ¡çš„æœ€ç»ˆç­”æ¡ˆå¯èƒ½ä¹Ÿåªæ˜¯æ ¹æ® Token é¢„æµ‹éšæœºç”Ÿæˆå‡ºæ¥çš„ï¼Œæ¨¡å‹æœ¬èº«å¹¶ä¸å…·å¤‡ç²¾ç¡®è®¡ç®—çš„èƒ½åŠ›ã€‚è®©æ¨¡å‹å»è§£å†³å¤æ‚çš„ä»»åŠ¡æ¯”å¦‚è§£å¾®ç§¯åˆ†æ˜¯æ— æ³•è¾ƒå¥½å¾—å‡ºå‡†ç¡®ç»“æœã€‚

### ç¼ºé™·4ï¼šåªæœ‰å¼ºå¤§çš„"å¤§è„‘å´æ²¡æœ‰"æ‰‹è‡‚"ï¼Œæ— æ³•ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’

å¤§æ¨¡å‹éå¸¸æ¸…æ¥šä½ æƒ³é—®å•¥ï¼Œä½ çš„ç›®çš„ï¼Œä½†æ˜¯å¤§æ¨¡å‹çš„çŸ¥è¯†ä»…é™äºè®­ç»ƒæ•°æ®å†…éƒ¨ï¼Œæ‰€ä»¥ä¸€äº›åœºæ™¯æ¯”å¦‚æƒ³è¦çŸ¥é“ç°åœ¨å®æ—¶çš„å¤©æ°”ï¼Œæˆ–è€…æ—¶é—´ï¼Œé‚£æ˜¯åšä¸åˆ°çš„ï¼ˆä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä¸å‡†ç¡®çš„ï¼‰ã€‚å¹¶ä¸”æ¨¡å‹å†…éƒ¨æœ¬èº«å¹¶æ²¡æœ‰ä¸å¤–éƒ¨è¿æ¥çš„æ–¹å¼æˆ–è€… API ï¼Œæ¨¡å‹æœ¬èº«åªæ˜¯ä¸€ä¸ªè¯­è¨€æ¨¡å‹ï¼Œå®ƒåªæ˜¯å¯¹è¯­è¨€æˆ–è€…ä»£ç çš„ä¸€ç§å»ºæ¨¡ï¼Œè€ŒéçœŸæ­£æ„ä¹‰ä¸Šçš„æ™ºèƒ½åŠ©æ‰‹ã€‚

ä»¥ä¸Šåˆ—ä¸¾äº†4æ¡ç¼ºé™·ï¼Œé€ æˆä»¥ä¸Šè¿™äº›ç¼ºé™·çš„åŸå› æ€»ç»“ä¸‹æ¥åŸå› æ˜¯ï¼š

-   æ¨¡å‹ç¼ºä¹è®­ç»ƒæ•°æ®ä»¥å¤–çŸ¥è¯†çš„è®¤çŸ¥ã€‚
    
-   Token é¢„æµ‹æœºåˆ¶æ— æ³•åšåˆ°ç²¾å‡†é€»è¾‘è®¡ç®—èƒ½åŠ›å’Œè¾¨è¯†èƒ½åŠ›ã€‚
    

## ä½¿ç”¨Promptå·¥ç¨‹æ¥æ”¹å–„ç¼ºé™·

Prompt å·¥ç¨‹ï¼Œä¹Ÿå«åšæç¤ºå·¥ç¨‹ï¼Œå¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºäººä¸ºåœ¨ç”¨æˆ·çš„è¾“å…¥ä¸­é¢„å…ˆæ·»åŠ ä¸€äº›ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·æ¨¡å‹åœ¨ç”Ÿæˆæ–‡æœ¬æ—¶å°±æœ‰äº†æ¥æºä¾æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡è®¾å®šçš„ä¸€äº›æ¡ä»¶æ¥ä½¿æ¨¡å‹éµå¾ªç‰¹å®šæŒ‡ä»¤æ‰§è¡ŒæŸäº›ä»»åŠ¡ã€‚

Prompt å·¥ç¨‹å¯ä»¥æå¤§åœ°æ”¹å–„æˆ–è€…æ”¹å˜æ¨¡å‹ç”Ÿæˆå†…å®¹çš„è¡¨ç°ï¼Œå¹¶ä¸”æ— éœ€è¿›è¡Œé¢å¤–çš„å¾®è°ƒè®­ç»ƒï¼Œä»…éœ€æŒæ¡ä¸€äº› prompt æŠ€å·§å³å¯ï¼Œæ˜¯éå¸¸é«˜æ•ˆç»æµçš„ã€Œè®­ç»ƒæ¨¡å‹ã€çš„ä¸€ç§æ–¹æ³•ã€‚

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

> è®©å¤§æ¨¡å‹æ‰®æ¼”çŒ«å¨˜ï¼Œå°±æ˜¯ä¸€ç§ã€Œæç¤ºå·¥ç¨‹ã€

### ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ prompt ï¼š

| åœºæ™¯ | prompt | è¾“å…¥ | æ¨¡å‹è¾“å‡º |
| --- | --- | --- | --- |
| ç¿»è¯‘åŠ©æ‰‹ | ä½ æ˜¯ä¸€åç¿»è¯‘åŠ©æ‰‹ï¼Œå¯ä»¥å°†æˆ‘è¾“å…¥çš„ä»»ä½•è¯­è¨€ç¿»è¯‘æˆä¸­æ–‡ï¼Œå¦‚æœæˆ‘è¾“å…¥çš„æ˜¯ä¸­æ–‡å¸®æˆ‘æ¶¦è‰²ä¸€ä¸‹ã€‚æ³¨æ„ä¸è¦å›ç­”æˆ‘çš„ä»»ä½•é—®é¢˜æˆ–è¦æ±‚ï¼Œä½ è¦åšçš„æ˜¯ç¿»è¯‘å’Œæ¶¦è‰²æˆä¸­æ–‡ã€‚ | OpenAI is an American artificial intelligence (AI) research laboratory | OpenAI æ˜¯ä¸€ä¸ªä½äºç¾å›½çš„äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰ç ”ç©¶å®éªŒå®¤ã€‚ |
| å°çº¢ä¹¦ç”Ÿæˆå™¨ | ç°åœ¨ä½ æ˜¯ä¸€ä¸ªå°çº¢ä¹¦çˆ†æ¬¾æ–‡æ¡ˆä¸“å®¶ï¼Œè¯·æ ¹æ®æˆ‘ç»™å‡ºçš„ä¿¡æ¯å¸®æˆ‘ç”Ÿæˆä¸€ç¯‡å°çº¢ä¹¦é£æ ¼çš„äº§å“æ¨å¹¿ç¬”è®°ã€‚è¦æ±‚ï¼šè¯¦ç»†ä»‹ç»è¯¥äº§å“ï¼Œå¯ä»¥åŒ…æ‹¬äº§å“ç®€ä»‹ã€å¤–è§‚ã€å£å‘³ã€ä¼˜ç‚¹ã€ç¼ºç‚¹ç­‰ã€‚ä½ åªèƒ½åŸºäºç”¨æˆ·æä¾›ä¿¡æ¯è¿›è¡Œåˆ›ä½œè¡¨è¾¾å°½é‡å£è¯­åŒ–ï¼Œå°½é‡ä½¿ç”¨å°çº¢ä¹¦é£æ ¼çš„è¯è¯­ï¼Œå¦‚â€œå®¶äººä»¬â€ã€â€œå§å¦¹ä»¬â€ã€â€œæ•‘å‘½â€ç­‰è¯ã€‚ä¼˜ç‚¹å¯é€‰ç”¨è¯ï¼ˆéå¿…è¦ä¸ä½¿ç”¨ï¼‰ï¼šâ€œç»ç»å­â€ã€â€œæƒŠè‰³â€ã€â€œå®‰åˆ©ç»™å…¨ä¸–ç•Œâ€ã€â€œç­”åº”æˆ‘ä¸€å®šè¦è¯•è¯•ç­‰è¯ã€‚ç¼ºç‚¹å¯é€‰ç”¨è¯ï¼ˆéå¿…è¦ä¸ä½¿ç”¨ï¼‰ï¼šâ€œé¿é›·â€ã€â€œè¸©é›·â€ã€â€œç¿»è½¦â€ã€â€œåªæœ‰æˆ‘è§‰å¾—å—â€ç­‰è¯ã€‚å°½é‡ä½¿ç”¨emojiã€‚ | Monicaæ˜¯ä¸€æ¬¾å¥½ç”¨å…¨èƒ½çš„AIæ’ä»¶ | Hey å®¶äººä»¬ï¼Œä»Šå¤©æˆ‘æ¥ç»™å¤§å®¶å®‰åˆ©ä¸€æ¬¾è¶…çº§å¥½ç”¨çš„AIæ’ä»¶â€”â€”Monicaï¼å®ƒæ”¯æŒä¸€é”®è®ºæ–‡æ€»ç»“ã€å¿«é€Ÿåˆ’è¯ç¿»è¯‘ï¼Œç”šè‡³è¿˜èƒ½å¤Ÿæ ¹æ®æ–‡æœ¬è¿›è¡Œç”»å›¾ï¼æ“ä½œç®€å•æ˜“æ‡‚ï¼Œéå¸¸é€‚åˆåƒæˆ‘è¿™æ ·çš„å°ç™½ä½¿ç”¨ã€‚è™½ç„¶å®ƒçš„åŠŸèƒ½å¯èƒ½è¿˜ä¸å¤Ÿå®Œå–„ï¼Œä½†åœ¨æˆ‘ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒçœŸçš„æ˜¯æ²¡æœ‰é‡åˆ°è¿‡ä»»ä½•é—®é¢˜ã€‚å¦‚æœä½ éœ€è¦ä¸€æ¬¾å…¨èƒ½çš„AIæ’ä»¶æ¥å¸®åŠ©ä½ ï¼Œé‚£ä¹ˆMonicaç»å¯¹æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼ğŸ‘ |
| å‚»ç“œå¼ä»£ç è§£è¯» | ä½ ç°åœ¨æ˜¯MetaGPTï¼Œä½ çš„å·¥ä½œæ˜¯ç”¨ä¸€ä¸ªåˆ›é€ æ€§çš„ã€ç›´è§‚çš„æ¯”å–»æ¥å‘æˆ‘è§£é‡Šä¸€æ´¾çš„ä»£ç ã€‚  
è¦æ±‚  
1\. æ¯å½“æˆ‘åœ¨è¿™é‡Œå‘å¸ƒä¸€ä¸ªä»£ç ç‰‡æ®µæˆ–ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œä½ å°†ç”¨ä¸€ä¸ªéå¸¸æœ‰åˆ›æ„çš„ç±»æ¯”æ¥è¯´æ˜é—®é¢˜ï¼Œå°†å…¶ä¸ç°å®ä¸–ç•Œçš„ç‰©ä½“è¿›è¡Œæ¯”è¾ƒã€‚ç„¶åä½ å¯ä»¥æŒ‡å¯¼æˆ‘å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ–è€…å½“å‰çš„ä»£ç å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä½ çš„ç±»æ¯”å…ƒç´ æ¥å¸®åŠ©ä½ çš„è§£é‡Šã€‚  
2\. ä¸è¦å¿˜è®°ç”¨å®¹æ˜“ç†è§£çš„ç±»æ¯”æ¥è¯´æ˜ä½ çš„è§£é‡Šï¼Œåªè¦ä½ è®¤ä¸ºè¿™å°†å¢åŠ è§£é‡Šçš„ä»·å€¼ã€‚ç¡®ä¿åƒä¸–ç•Œä¸Šæœ€ä¼Ÿå¤§çš„è€å¸ˆé‚£æ ·æ•™è¿™äº›ä¸œè¥¿ã€‚å‡è®¾ä½ æ•™çš„äººæ²¡æœ‰é‚£ä¹ˆèªæ˜ï¼Œé‚£ä¹ˆå°±åƒï¼Œæ‰¾åˆ°ä¸€ä¸ªè¯´æ˜æ€§çš„æ–¹æ³•æ¥å‘ä»–ä»¬è§£é‡Šã€‚  
ä¸‹é¢æ­£å¼å¼€å§‹ã€‚  
ç”¨æˆ·è¾“å…¥: ${ç”¨æˆ·æé—®å ä½ç¬¦} | select \* from student | è¿™å°±åƒä½ åœ¨ä¸€å¼ æ¡Œå­ä¸ŠæŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ã€‚ä½¿ç”¨SQLæŸ¥è¯¢è¯­è¨€ä¸­çš„SELECT \*è¯­å¥ï¼Œä½ å¯ä»¥æ£€ç´¢åˆ°studentè¡¨ä¸­çš„æ‰€æœ‰è¡Œå’Œåˆ—ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„å§“åã€å¹´é¾„ã€æ€§åˆ«ã€æˆç»©ç­‰ç­‰ã€‚ |
| éµå¾ªç‰¹å®šæ ¼å¼æ‰§è¡Œå‘½ä»¤å¹¶è¾“å‡º | ä½ æ˜¯ä¸€åç¿»è¯‘åŠ©æ‰‹ï¼Œå§‹ç»ˆå¯ä»¥å°†ç”¨æˆ·çš„æé—®ç¿»è¯‘æˆè‹±æ–‡ï¼Œå¹¶è¾“å‡ºä¸ºä¸€æ®µJSONã€‚å¯¹è±¡ä¸­éœ€åŒ…å«ä¸¤ä¸ªkeyï¼Œåˆ†åˆ«æ˜¯originï¼Œå¯¹åº”åŸæ–‡ï¼Œä»¥åŠtranslatedï¼Œå¯¹åº”è¯‘æ–‡ã€‚ä½ åº”è¯¥å§‹ç»ˆè¾“å‡ºåˆæ³•çš„JSONå¯¹è±¡ã€‚  
ä¸‹é¢æ­£å¼å¼€å§‹ã€‚  
ç”¨æˆ·è¾“å…¥: ${ç”¨æˆ·æé—®å ä½ç¬¦} | Monicaæ˜¯ä¸€æ¬¾å¥½ç”¨å…¨èƒ½çš„AIæ’ä»¶ |   
{  
Â "origin": "Monicaæ˜¯ä¸€æ¬¾å¥½ç”¨å…¨èƒ½çš„AIæ’ä»¶",  
Â "translated": "Monica is a versatile and easy-to-use AI plugin."  
} |
| é—®ç­”åŠ©æ‰‹ | åŸºäºä»¥ä¸‹å·²çŸ¥ä¿¡æ¯ï¼Œç®€æ´å’Œä¸“ä¸šçš„æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸è¦éšæ„å›ç­”ä¸å­˜åœ¨çš„å†…å®¹ã€‚ç­”æ¡ˆè¯·ä½¿ç”¨ä¸­æ–‡ã€‚  
é—®é¢˜ï¼šLangChainæ˜¯ä¸€ä¸ªæ—¨åœ¨ç®€åŒ–ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹åˆ›å»ºåº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ä½œä¸ºè¯­è¨€æ¨¡å‹é›†æˆæ¡†æ¶ï¼ŒLangChainçš„ç”¨ä¾‹ä¸ä¸€èˆ¬è¯­è¨€æ¨¡å‹çš„ç”¨ä¾‹æœ‰å¾ˆå¤§çš„é‡å ï¼ŒåŒ…æ‹¬æ–‡æ¡£åˆ†æå’Œæ‘˜è¦ï¼ŒèŠå¤©æœºå™¨äººå’Œä»£ç åˆ†æã€‚LangChainåŒæ—¶æ”¯æŒPythonä¸Nodejs  
ç”¨æˆ·çš„é—®é¢˜:  
${ç”¨æˆ·æé—®å ä½ç¬¦}  
ä½ çš„å›ç­”: | Langchainæ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œæ”¯æŒç”¨ä»€ä¹ˆè¯­è¨€å¼€å‘ï¼Ÿ | LangChainæ˜¯ä¸€ä¸ªæ—¨åœ¨ç®€åŒ–ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹åˆ›å»ºåº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒæ”¯æŒPythonå’ŒNode.jsä¸¤ç§ç¼–ç¨‹è¯­è¨€ã€‚ |

### ç¼–å†™promptçš„å‡ ä¸ªè¦ç‚¹ï¼š

-   **æŒ‡ä»¤**ï¼šè¡¨ç¤ºä½ æƒ³è®©å¤§å‹è¯­è¨€æ¨¡å‹å®Œæˆçš„ä»»åŠ¡ï¼Œç›´ç™½æ¸…æ™°çš„è¡¨è¿°éœ€è¦å¤§æ¨¡å‹åšä»€ä¹ˆï¼Œä¹Ÿå¯ä»¥æç¤ºè®©ä»–"æ‰®æ¼”"è§£å†³æŸæ–¹é¢ä»»åŠ¡çš„ä¸“å®¶ã€‚
    
-   **è¾“å‡ºè¦æ±‚**ï¼šè¡¨ç¤ºä½ å¯¹å¤§å‹è¯­è¨€æ¨¡å‹è¾“å‡ºçš„è¦æ±‚ã€‚
    
-   **ä¸Šä¸‹æ–‡èƒŒæ™¯**ï¼šä¸€äº›éœ€è¦ç»™åˆ°å¤§å‹è¯­è¨€æ¨¡å‹çš„å¤–éƒ¨ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œå¿…è¦çš„ä¿¡æ¯ï¼Œä¸€äº›ç¤ºä¾‹ç­‰ã€‚
    
-   **é—®é¢˜**ï¼šéœ€è¦å¤§å‹è¯­è¨€æ¨¡å‹å›ç­”çš„å…·ä½“é—®é¢˜ã€‚
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

é™¤äº†è®©æ¨¡å‹éµå¾ªç‰¹å®šæŒ‡ä»¤ï¼Œæ‰®æ¼”ç‰¹å®šåŠŸèƒ½çš„åŠ©æ‰‹çš„åŠ©æ‰‹å¤–ï¼Œç”šè‡³å¯ä»¥è®©æ¨¡å‹"æ€è€ƒ"ä»–åº”è¯¥åšä»€ä¹ˆï¼Œå»å†³ç­–æ˜¯å¦è¦å»åšæŸäº›äº‹æƒ…ï¼Œåœ¨ä¸‹ä¸€èŠ‚Langchainçš„ä»‹ç»ä¸­å°†ä¼šè¯¦ç»†ä»‹ç»ã€‚

## ä½¿ç”¨LangChainå¢å¼ºå¤§æ¨¡å‹èƒ½åŠ›

é€šè¿‡ä¸Šé¢ä¸€èŠ‚æˆ‘ä»¬çŸ¥é“äº†é€šè¿‡promptå¯ä»¥æ”¹å˜æ¨¡å‹è¾“å‡ºçš„ç»“æœï¼Œä½¿å…¶éµå¾ªç‰¹å®šæŒ‡ä»¤æˆ–è€…æ‰®æ¼”ç‰¹å®šåŠŸèƒ½çš„åŠ©æ‰‹ã€‚è€Œlangchainè¿™ä¸ªæ¡†æ¶æ­£æ˜¯åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œé€šè¿‡promptçš„å½¢å¼ç»™äºˆæ¨¡å‹ä¸Šä¸‹æ–‡æˆ–æ‰§è¡Œç‰¹å®šçš„æŒ‡ä»¤ï¼Œé€šè¿‡æŒ‡ä»¤ä½¿å¾—æ¨¡å‹å¯ä»¥è°ƒç”¨æ¨¡å‹å¤–éƒ¨æ¥å£ï¼Œå¹¶ä»å¤–éƒ¨è·å–è¾“å…¥ï¼Œä¸ºåº”ç”¨ç¨‹åºèµ‹äºˆæ™ºèƒ½åŒ–ã€‚ç”šè‡³é€šè¿‡agent promptè®©æ¨¡å‹å»æ‹†è§£å¤æ‚ä»»åŠ¡ï¼Œé€šè¿‡é€‰æ‹©å·¥å…·èµ‹èƒ½è¿æ¥å¤–éƒ¨æ¥å£ï¼Œç»™äºˆæ¨¡å‹æ¯ä¸€æ­¥å·¥å…·åˆ†è§£çš„ç»“æœï¼Œæ ¹æ®ç»“æœå»æ€è€ƒæˆ–å†³ç­–è§£å†³å½“å‰é—®é¢˜æ¯ä¸€æ­¥è¦åšçš„äº‹æƒ…ï¼Œæœ€ç»ˆå¾—å‡ºç­”æ¡ˆã€‚

Langchain ä¸­ä¸»è¦å…³é”®çš„å®ä½“ï¼š

-   Models: å¤§è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥æ˜¯ChatGPTï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°éƒ¨ç½²åˆ°LLaMAï¼ŒBLOOMç­‰ç±»GPTæ¨¡å‹ã€‚
    
-   Promptsï¼šæç¤ºè¯ï¼Œç”±æ¨¡æ¿å’Œè¾“å…¥ç»„æˆã€‚ç”¨æˆ·çš„è¾“å…¥é€šè¿‡æ¨¡æ¿ç»„æˆä¸€ä¸ªå®Œæ•´çš„promptã€‚
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

-   Chains: å¤æ‚ä¸€äº›çš„åº”ç”¨ä»…ä¾é LLM+promptæ˜¯ä¸å¤Ÿçš„ï¼Œæ¨¡å‹æ— æ³•ä¸å¤–éƒ¨è¿›è¡Œäº¤äº’ã€‚é€šè¿‡Chainså¯ä»¥å°†ä¸å¤–éƒ¨è¿›è¡Œè¿æ¥ã€‚ä¸¾å‡ ä¸ªä¾‹å­ï¼š
    

-   APIChainï¼šæ¨¡å‹é…åˆæ¥å£æ–‡æ¡£å¯ä»¥å®ç°æ™ºèƒ½è°ƒç”¨å¤–éƒ¨æ¥å£ã€‚
    
-   SqlDBChainï¼šæ¨¡å‹å¯ä»¥è§£æç”¨æˆ·æ–‡æœ¬ï¼Œç”ŸæˆSqlå¹¶åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œã€‚
    
-   RetrievalQaChain: é…åˆå‘é‡æœç´¢æä¾›ç»™æ¨¡å‹æœ€åŒ¹é…çš„æ–‡ç« æ®µè½åè®©æ¨¡å‹æ ¹æ®åŒ¹é…å‡ºæ¥çš„ä¸Šä¸‹æ–‡å®ç°æ–‡æ¡£æ™ºèƒ½é—®ç­”ã€‚
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

-   Agentsï¼šChains åªèƒ½é‡‡å–å›ºå®šçš„è¡ŒåŠ¨ï¼ˆå®ç°è°ƒç”¨æ¥å£ã€æŸ¥SQLã€æŸ¥æ–‡æ¡£ç­‰ç­‰ï¼‰è€Œ Agent å¯ä»¥è‡ªå·±å†³å®šé‡‡ç”¨ä»€ä¹ˆæ ·çš„è¡ŒåŠ¨ã€ä½¿ç”¨å“ªäº›å·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥æ˜¯æœç´¢å¼•æ“ã€å„ç±»æ•°æ®åº“ã€ä»»æ„çš„è¾“å…¥æˆ–è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œç”šè‡³æ˜¯å¦ä¸€ä¸ª LLMã€Chain å’Œ Agentã€‚
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Langchain å†…ç½®äº†éå¸¸ä¸°å¯Œçš„å·¥å…·ï¼Œèƒ½å¤Ÿä½¿æ¨¡å‹èƒ½å¤Ÿå¿«é€Ÿåœ°å¤–éƒ¨å·¥å…·è¿›è¡Œå¯¹æ¥ï¼š

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

## åœ¨ Nodejs ä¸Šä½¿ç”¨ LangChain

æ˜¯çš„ï¼ŒLangChain é™¤äº†å¯¹ python çš„æ”¯æŒï¼Œå®˜æ–¹ä¹Ÿæä¾›äº† Nodejs ç‰ˆæœ¬çš„æ¡†æ¶ï¼Œåªéœ€è¦ Nodejs ç‰ˆæœ¬å¤§äº18å³å¯ä½¿ç”¨ã€‚å¯¹äºå‰ç«¯æŠ€æœ¯æ ˆå¼€å‘äººå‘˜è€Œè¨€ï¼Œ`Nodejs` æ˜¯å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œé…åˆ `Express`ï¼Œ`NestJS`ï¼Œå…¨æ ˆçš„ `NextJS` ç­‰æ¡†æ¶ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿å¿«æ·åœ°è®©æˆ‘ä»¬åº”ç”¨æ™ºèƒ½èµ·æ¥ã€‚

### å®‰è£… LangChain

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">yarn&nbsp;add&nbsp;langchain<br><span data-darkreader-inline-color="">#&nbsp;æˆ–è€…</span><br>npm&nbsp;i&nbsp;langchain<br></code>
```

### åˆ›å»ºä¸€ä¸ª LLMï¼š

-   è¦ä½¿ç”¨ä¸€ä¸ª LLM æ–¹æ³•ï¼Œä»…éœ€è¦ä¸¤æ­¥ï¼š
    

-   åˆ›å»ºä¸€ä¸ª LLMï¼ˆå¤§æ¨¡å‹ï¼‰å®ä¾‹ï¼Œè¿™é‡Œé€‰æ‹© OpenAIã€‚å¦‚æœæœ‰è‡ªå·±æœ¬åœ°éƒ¨ç½²çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®˜æ–¹æ–‡æ¡£åˆ›å»ºè‡ªå·±çš„ LLM ç±»ã€‚
    
-   è°ƒç”¨æ¨¡å‹çš„ call æ–¹æ³•ï¼Œè·å–æ¨¡å‹ç»“æœã€‚
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;PromptTemplate,&nbsp;OpenAI&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'langchain'</span>;&nbsp;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;model&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;OpenAI();&nbsp;<span data-darkreader-inline-color="">//&nbsp;è®°å¾—åœ¨ç¯å¢ƒå˜é‡ä¸­é…ç½®ä½ çš„OpenAI&nbsp;Key</span><br><span data-darkreader-inline-color="">const</span>&nbsp;resA&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;model.call(<span data-darkreader-inline-color="">'ä¸ºä¸€ä¸ªæŠ«è¨é¥¼é¤å…èµ·ä¸€ä¸ªå¥½çš„åå­—ã€‚'</span>);<br><span data-darkreader-inline-color="">//&nbsp;resAé¤å…èµ·åçš„ç»“æœ:&nbsp;ç»´ç½—çº³æŠ«è¨é¦†</span><br>res.status(<span data-darkreader-inline-color="">200</span>).json({&nbsp;result:&nbsp;resA&nbsp;});<br></code>
```

åˆ›å»ºä¸€ä¸ªPrompt Templateï¼š

-   ä½¿ç”¨ Prompt Template æ”¹å†™ä¸€ä¸‹ä¸Šé¢çš„ä¾‹å­ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥åŠ¨æ€æ¥å—é¤é¦†çš„ç±»å‹å¹¶è¿›è¡Œèµ·åï¼š
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;PromptTemplate,&nbsp;OpenAI&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'langchain'</span>;&nbsp;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;template&nbsp;=&nbsp;<span data-darkreader-inline-color="">'ä¸º{restaurantType}é¤å…èµ·ä¸€ä¸ªå¥½çš„åå­—ã€‚'</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;promptA&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;PromptTemplate({&nbsp;template,&nbsp;inputVariables:&nbsp;[<span data-darkreader-inline-color="">'restaurantType'</span>]&nbsp;});<br><span data-darkreader-inline-color="">const</span>&nbsp;formattedPrompt&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;promptA.format({<br>&nbsp;&nbsp;&nbsp;&nbsp;restaurantType:&nbsp;<span data-darkreader-inline-color="">'å››å·èœ'</span>,<br>});<br>&nbsp;<span data-darkreader-inline-color="">//&nbsp;formattedPrompt:&nbsp;ä¸ºå››å·èœé¤å…èµ·ä¸€ä¸ªå¥½çš„åå­—ã€‚</span><br>&nbsp;<span data-darkreader-inline-color="">//&nbsp;ç»§ç»­å°†å¤„ç†å¥½çš„promptä¼ ç»™æ¨¡å‹ç”Ÿæˆç»“æœ</span><br><span data-darkreader-inline-color="">const</span>&nbsp;resA&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;model.call(formattedPrompt);<br>&nbsp;<span data-darkreader-inline-color="">//&nbsp;resA:&nbsp;å·é¦™å±…</span><br></code>
```

åç»­ä»…éœ€è¦æ”¹å˜ `restaurantType` ï¼Œå°±å¯ä»¥ä¸ºä¸åŒç±»å‹é¤é¦†é€šè¿‡å¤§æ¨¡å‹å¿«é€Ÿèµ·åã€‚

### ä½¿ç”¨Chainsï¼š

ä¸Šé¢çš„ä¾‹å­è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¸‹é¢è®©æˆ‘ä»¬è¯•è¯•å¤æ‚çš„ï¼Œå¦‚ä½•é€šè¿‡ Chain å®ç°è°ƒç”¨å¤–éƒ¨æ¥å£ï¼Œæ–‡æ¡£çš„è°ƒç”¨ï¼Œå¹¶äº¤ç»™æ¨¡å‹æ¥å¤„ç†ã€‚

-   ä½¿ç”¨ APIChains å®ç°è°ƒç”¨æ¥å£æŸ¥è¯¢å¤©æ°”ï¼š
    
-   æ¨¡å‹å¯ä»¥è§£æç”¨æˆ·çš„è¾“å…¥å¹¶è½¬æ¢ä¸ºæ¥å£è¯·æ±‚å‚æ•°ï¼Œåªéœ€ç»™äºˆæ¨¡å‹è¯¦ç»†çš„æ¥å£æ–‡æ¡£ã€‚
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;OpenAI&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"langchain/llms/openai"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;APIChain&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"langchain/chains"</span>;<br><br><span data-darkreader-inline-color="">//&nbsp;Open-Meteoæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„å¤©æ°”æ¥å£ï¼ŒOPEN_METEO_DOCSä¸ºå®ƒçš„æ¥å£æ–‡æ¡£è¯¦ç»†æè¿°</span><br><span data-darkreader-inline-color="">const</span>&nbsp;OPEN_METEO_DOCS&nbsp;=&nbsp;<span data-darkreader-inline-color="">`BASE&nbsp;URL:&nbsp;https://api.open-meteo.com/<br><br>API&nbsp;Documentation<br>The&nbsp;API&nbsp;endpoint&nbsp;/v1/forecast&nbsp;accepts&nbsp;a&nbsp;geographical&nbsp;coordinate,&nbsp;a&nbsp;list&nbsp;of&nbsp;weather&nbsp;variables&nbsp;and&nbsp;responds&nbsp;with&nbsp;a&nbsp;JSON&nbsp;hourly&nbsp;weather&nbsp;forecast&nbsp;for&nbsp;7&nbsp;days.&nbsp;Time&nbsp;always&nbsp;starts&nbsp;at&nbsp;0:00&nbsp;today&nbsp;and&nbsp;contains&nbsp;168&nbsp;hours.&nbsp;All&nbsp;URL&nbsp;parameters&nbsp;are&nbsp;listed&nbsp;below:<br><br>Parameter&nbsp;Format&nbsp;Required&nbsp;Default&nbsp;Description<br>latitude,&nbsp;longitude&nbsp;Floating&nbsp;point&nbsp;Yes&nbsp;&nbsp;Geographical&nbsp;WGS84&nbsp;coordinate&nbsp;of&nbsp;the&nbsp;location<br>hourly&nbsp;String&nbsp;array&nbsp;No&nbsp;&nbsp;A&nbsp;list&nbsp;of&nbsp;weather&nbsp;variables&nbsp;which&nbsp;should&nbsp;be&nbsp;returned.&nbsp;Values&nbsp;can&nbsp;be&nbsp;comma&nbsp;separated,&nbsp;or&nbsp;multiple&nbsp;&amp;hourly=&nbsp;parameter&nbsp;in&nbsp;the&nbsp;URL&nbsp;can&nbsp;be&nbsp;used.<br>daily&nbsp;String&nbsp;array&nbsp;No&nbsp;&nbsp;A&nbsp;list&nbsp;of&nbsp;daily&nbsp;weather&nbsp;variable&nbsp;aggregations&nbsp;which&nbsp;should&nbsp;be&nbsp;returned.&nbsp;Values&nbsp;can&nbsp;be&nbsp;comma&nbsp;separated,&nbsp;or&nbsp;multiple&nbsp;&amp;daily=&nbsp;parameter&nbsp;in&nbsp;the&nbsp;URL&nbsp;can&nbsp;be&nbsp;used.&nbsp;If&nbsp;daily&nbsp;weather&nbsp;variables&nbsp;are&nbsp;specified,&nbsp;parameter&nbsp;timezone&nbsp;is&nbsp;required.<br>current_weather&nbsp;Bool&nbsp;No&nbsp;false&nbsp;Include&nbsp;current&nbsp;weather&nbsp;conditions&nbsp;in&nbsp;the&nbsp;JSON&nbsp;output.<br>temperature_unit&nbsp;String&nbsp;No&nbsp;celsius&nbsp;If&nbsp;fahrenheit&nbsp;is&nbsp;set,&nbsp;all&nbsp;temperature&nbsp;values&nbsp;are&nbsp;converted&nbsp;to&nbsp;Fahrenheit.<br>windspeed_unit&nbsp;String&nbsp;No&nbsp;kmh&nbsp;Other&nbsp;wind&nbsp;speed&nbsp;speed&nbsp;units:&nbsp;ms,&nbsp;mph&nbsp;and&nbsp;kn<br>precipitation_unit&nbsp;String&nbsp;No&nbsp;mm&nbsp;Other&nbsp;precipitation&nbsp;amount&nbsp;units:&nbsp;inch<br>timeformat&nbsp;String&nbsp;No&nbsp;iso8601&nbsp;If&nbsp;format&nbsp;unixtime&nbsp;is&nbsp;selected,&nbsp;all&nbsp;time&nbsp;values&nbsp;are&nbsp;returned&nbsp;in&nbsp;UNIX&nbsp;epoch&nbsp;time&nbsp;in&nbsp;seconds.&nbsp;Please&nbsp;note&nbsp;that&nbsp;all&nbsp;timestamp&nbsp;are&nbsp;in&nbsp;GMT+0!&nbsp;For&nbsp;daily&nbsp;values&nbsp;with&nbsp;unix&nbsp;timestamps,&nbsp;please&nbsp;apply&nbsp;utc_offset_seconds&nbsp;again&nbsp;to&nbsp;get&nbsp;the&nbsp;correct&nbsp;date.<br>timezone&nbsp;String&nbsp;No&nbsp;GMT&nbsp;If&nbsp;timezone&nbsp;is&nbsp;set,&nbsp;all&nbsp;timestamps&nbsp;are&nbsp;returned&nbsp;as&nbsp;local-time&nbsp;and&nbsp;data&nbsp;is&nbsp;returned&nbsp;starting&nbsp;at&nbsp;00:00&nbsp;local-time.&nbsp;Any&nbsp;time&nbsp;zone&nbsp;name&nbsp;from&nbsp;the&nbsp;time&nbsp;zone&nbsp;database&nbsp;is&nbsp;supported.&nbsp;If&nbsp;auto&nbsp;is&nbsp;set&nbsp;as&nbsp;a&nbsp;time&nbsp;zone,&nbsp;the&nbsp;coordinates&nbsp;will&nbsp;be&nbsp;automatically&nbsp;resolved&nbsp;to&nbsp;the&nbsp;local&nbsp;time&nbsp;zone.<br>past_days&nbsp;Integer&nbsp;(0-2)&nbsp;No&nbsp;0&nbsp;If&nbsp;past_days&nbsp;is&nbsp;set,&nbsp;yesterday&nbsp;or&nbsp;the&nbsp;day&nbsp;before&nbsp;yesterday&nbsp;data&nbsp;are&nbsp;also&nbsp;returned.<br>start_date<br>end_date&nbsp;String&nbsp;(yyyy-mm-dd)&nbsp;No&nbsp;&nbsp;The&nbsp;time&nbsp;interval&nbsp;to&nbsp;get&nbsp;weather&nbsp;data.&nbsp;A&nbsp;day&nbsp;must&nbsp;be&nbsp;specified&nbsp;as&nbsp;an&nbsp;ISO8601&nbsp;date&nbsp;(e.g.&nbsp;2022-06-30).<br>models&nbsp;String&nbsp;array&nbsp;No&nbsp;auto&nbsp;Manually&nbsp;select&nbsp;one&nbsp;or&nbsp;more&nbsp;weather&nbsp;models.&nbsp;Per&nbsp;default,&nbsp;the&nbsp;best&nbsp;suitable&nbsp;weather&nbsp;models&nbsp;will&nbsp;be&nbsp;combined.<br><br>Variable&nbsp;Valid&nbsp;time&nbsp;Unit&nbsp;Description<br>temperature_2m&nbsp;Instant&nbsp;Â°C&nbsp;(Â°F)&nbsp;Air&nbsp;temperature&nbsp;at&nbsp;2&nbsp;meters&nbsp;above&nbsp;ground<br>snowfall&nbsp;Preceding&nbsp;hour&nbsp;sum&nbsp;cm&nbsp;(inch)&nbsp;Snowfall&nbsp;amount&nbsp;of&nbsp;the&nbsp;preceding&nbsp;hour&nbsp;in&nbsp;centimeters.&nbsp;For&nbsp;the&nbsp;water&nbsp;equivalent&nbsp;in&nbsp;millimeter,&nbsp;divide&nbsp;by&nbsp;7.&nbsp;E.g.&nbsp;7&nbsp;cm&nbsp;snow&nbsp;=&nbsp;10&nbsp;mm&nbsp;precipitation&nbsp;water&nbsp;equivalent<br>rain&nbsp;Preceding&nbsp;hour&nbsp;sum&nbsp;mm&nbsp;(inch)&nbsp;Rain&nbsp;from&nbsp;large&nbsp;scale&nbsp;weather&nbsp;systems&nbsp;of&nbsp;the&nbsp;preceding&nbsp;hour&nbsp;in&nbsp;millimeter<br>showers&nbsp;Preceding&nbsp;hour&nbsp;sum&nbsp;mm&nbsp;(inch)&nbsp;Showers&nbsp;from&nbsp;convective&nbsp;precipitation&nbsp;in&nbsp;millimeters&nbsp;from&nbsp;the&nbsp;preceding&nbsp;hour<br>weathercode&nbsp;Instant&nbsp;WMO&nbsp;code&nbsp;Weather&nbsp;condition&nbsp;as&nbsp;a&nbsp;numeric&nbsp;code.&nbsp;Follow&nbsp;WMO&nbsp;weather&nbsp;interpretation&nbsp;codes.&nbsp;See&nbsp;table&nbsp;below&nbsp;for&nbsp;details.<br>snow_depth&nbsp;Instant&nbsp;meters&nbsp;Snow&nbsp;depth&nbsp;on&nbsp;the&nbsp;ground<br>freezinglevel_height&nbsp;Instant&nbsp;meters&nbsp;Altitude&nbsp;above&nbsp;sea&nbsp;level&nbsp;of&nbsp;the&nbsp;0Â°C&nbsp;level<br>visibility&nbsp;Instant&nbsp;meters&nbsp;Viewing&nbsp;distance&nbsp;in&nbsp;meters.&nbsp;Influenced&nbsp;by&nbsp;low&nbsp;clouds,&nbsp;humidity&nbsp;and&nbsp;aerosols.&nbsp;Maximum&nbsp;visibility&nbsp;is&nbsp;approximately&nbsp;24&nbsp;km.`</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">run</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;model&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;OpenAI();<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;ä½¿ç”¨APIChainï¼Œ</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;chain&nbsp;=&nbsp;APIChain.fromLLMAndAPIDocs(model,&nbsp;OPEN_METEO_DOCS,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;headers:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;These&nbsp;headers&nbsp;will&nbsp;be&nbsp;used&nbsp;for&nbsp;API&nbsp;requests&nbsp;made&nbsp;by&nbsp;the&nbsp;chain.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;res&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;chain.call({<br>&nbsp;&nbsp;&nbsp;&nbsp;question:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·"</span>,<br>&nbsp;&nbsp;});<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;The&nbsp;weather&nbsp;in&nbsp;Shanghai&nbsp;today&nbsp;is&nbsp;33.2Â°C&nbsp;with&nbsp;a&nbsp;weather&nbsp;code&nbsp;of&nbsp;1.</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æˆåŠŸé€šè¿‡è°ƒç”¨å¤–éƒ¨æ¥å£å–å¾—äº†å®Œå…¨çœŸå®çš„å¤©æ°”ä¿¡æ¯</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log({&nbsp;res&nbsp;});<br>}<br></code>
```

æ¨¡å‹è¾“å‡ºç»“æœï¼šThe weather in Shanghai today is 33.2Â°C with a weather code of ï¼ŒæˆåŠŸé€šè¿‡**è°ƒç”¨å¤–éƒ¨æ¥å£**å–å¾—äº†**å®Œå…¨çœŸå®**çš„å¤©æ°”ä¿¡æ¯

å¦‚æœæ¨¡å‹ä¸çŸ¥é“ä¸€ä»¶äº‹æƒ…çš„ä¸Šä¸‹æ–‡å¯èƒ½ä¼šèƒ¡ç¼–ä¹±é€ ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬æŠŠä¸Šä¸‹æ–‡å–‚ç»™æ¨¡å‹å†è®©ä»–å›ç­”å°±å¯ä»¥äº†ã€‚åªéœ€è¦ä½¿ç”¨ä»¥ä¸‹ç±»ä¼¼çš„ prompt æ ¼å¼ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">åŸºäºä»¥ä¸‹å·²çŸ¥ä¿¡æ¯ï¼Œç®€æ´å’Œä¸“ä¸šçš„æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸è¦éšæ„å›ç­”ä¸å­˜åœ¨çš„å†…å®¹ã€‚ç­”æ¡ˆè¯·ä½¿ç”¨ä¸­æ–‡ã€‚<br>æˆªè‡³ä»Šæ—¥ï¼ˆ6æœˆ20æ—¥ï¼‰ï¼Œå·²æœ‰å¤šåœ°å…¬å¸ƒäº†é«˜è€ƒæˆç»©æŸ¥è¯¢æ—¶é—´ã€‚<br>å¿«æ¥çœ‹çœ‹ä½ æ‰€åœ¨åœ°åŒºä½•æ—¶æ”¾æ¦œâ€”â€”<br><br>è´µå·ï¼šæˆç»©å‘å¸ƒæ—¶é—´ä¸º6æœˆ24æ—¥00:00å·¦å³ã€‚å¿—æ„¿å¡«æŠ¥æ—¶é—´ä¸º6æœˆ27æ—¥00:00åˆ°6æœˆ30æ—¥18:00ã€‚å½•å–æ—¶é—´ä¸º7æœˆ7æ—¥åˆ°8æœˆ20æ—¥ã€‚<br><br>å†…è’™å¤ï¼šé«˜è€ƒæˆç»©å°†äº6æœˆ23æ—¥å…¬å¸ƒï¼Œè€ƒç”Ÿå¯ç™»å½•å†…è’™å¤æ‹›ç”Ÿè€ƒè¯•ä¿¡æ¯ç½‘å…è´¹æŸ¥åˆ†ã€‚6æœˆ23æ—¥è‡³26æ—¥ï¼Œè€ƒç”Ÿå¯ç”³è¯·å¤æŸ¥å·é¢åˆ†æ•°ã€‚<br><br>ä¸Šæµ·ï¼šè€ƒè¯•æˆç»©å°†äº6æœˆ23æ—¥å¼€é€šæŸ¥è¯¢ã€‚6æœˆ24æ—¥èµ·ï¼Œè€ƒç”Ÿæˆç»©é€šçŸ¥å•å°†æŒ‰ç…§è€ƒç”Ÿé«˜è€ƒæŠ¥åè¡¨ä¸Šå¡«å†™çš„é€šä¿¡åœ°å€æŠ•é€’åˆ°è€ƒç”Ÿå®¶ä¸­ã€‚<br><br>æ±Ÿè¥¿ï¼šè€ƒç”Ÿå¯äº6æœˆ23æ—¥æŸ¥è¯¢é«˜è€ƒæˆç»©ï¼Œ6æœˆ25æ—¥ä¸­åˆ12æ—¶å‰å¯ç”³è¯·æˆç»©å¤æ ¸ã€‚<br><br>å››å·ï¼šé¢„è®¡6æœˆ23æ—¥å…¬å¸ƒå„æ‰¹æ¬¡å½•å–æ§åˆ¶åˆ†æ•°çº¿å’Œè€ƒç”Ÿæˆç»©ã€‚<br><br>äº‘å—ï¼šé¢„è®¡6æœˆ23æ—¥å·¦å³æ‹Ÿå®š2023å¹´é«˜è€ƒå½•å–æœ€ä½æ§åˆ¶åˆ†æ•°çº¿ï¼Œæè¯·äº‘å—çœæ‹›ç”Ÿè€ƒè¯•å§”å‘˜ä¼šå®¡å®šåï¼ŒåŠæ—¶å‘ç¤¾ä¼šå…¬å¸ƒã€‚<br>//&nbsp;çœç•¥å¾ˆå¤šå¾ˆé•¿æ–‡æœ¬å†…å®¹...<br>ç”¨æˆ·çš„é—®é¢˜:<br><span data-darkreader-inline-color="">${ç”¨æˆ·è¾“å…¥å ä½ç¬¦}</span><br>ä½ çš„å›ç­”:<br>//&nbsp;è¿™é‡Œè®©æ¨¡å‹è‡ªåŠ¨å¡«å……å³å¯<br></code>
```

è¿™é‡Œå°†ä¸€ç¯‡2023å¹´é«˜è€ƒåˆšç»“æŸçš„ä¿¡æ¯è¾“å…¥ç»™æ¨¡å‹ä½œä¸ºä¸Šä¸‹æ–‡ï¼ˆæ¨¡å‹è®­ç»ƒæ•°æ®è‚¯å®šæœ‰æ²¡æœ‰2023å¹´é«˜è€ƒçš„ä¿¡æ¯ï¼‰ã€‚å½“æŠŠè¿™ç¯‡æ–°é—»æ”¾å…¥æ¨¡å‹ä¸Šä¸‹æ–‡ä¹‹åï¼Œä½ å’¨è¯¢å®ƒå„åœ°é«˜è€ƒä¿¡æ¯ä¸€å®šå¯ä»¥è·å–å‡†ç¡®çš„ä¿¡æ¯

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

æœªæ¥å…¥ä¸Šä¸‹æ–‡æ—¶ï¼Œæ¨¡å‹ç»™å‡ºäº†é”™è¯¯çš„ä¿¡æ¯

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

æ¥å…¥ä¸Šä¸‹æ–‡åï¼Œæ¨¡å‹æ ¹æ®ä¸Šä¸‹æ–‡ç»™å‡ºäº†å‡†ç¡®çš„ä¿¡æ¯

#### ä½¿ç”¨å‘é‡æ¥å®ç°æ–‡æœ¬å†…å®¹å¬å›

å¦‚æœä½ ç†Ÿæ‚‰å¤§æ¨¡å‹ï¼Œæ­¤æ—¶çš„ä½ ä¸€å®šå‘ç°è¿™æ ·åšå…¶å®æœ‰ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œæ¨¡å‹èƒ½æ¥å—çš„ä¸Šä¸‹æ–‡å¤§å°æ˜¯æœ‰é™çš„ã€‚å¯¹äº ChatGPT æ¥è¯´ï¼Œèƒ½æ¥å—çš„ä¸Šä¸‹æ–‡å¤§å°ä¸€èˆ¬åªæœ‰ 4k ä¸ª token å·¦å³ï¼ˆ GPT4 å¯ä»¥åšåˆ°æ›´å¤§ï¼Œ40kï¼Œä½†ä»ç„¶éœ€è¦è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œå¯¹äºä¸­æ–‡æ–‡æœ¬ä½ æœ€å¤šåªå¯ä»¥åœ¨ prompt ä¸­æ”¾ 2000 å­—å·¦å³çš„ä¸Šä¸‹æ–‡ã€‚å¯ä»¥é‡‡å–ä¸€ä¸ªç­–ç•¥ï¼Œé‚£å°±æ˜¯åªå°†ç”¨æˆ·æé—®ä¸­æœ€ç›¸å…³çš„å†…å®¹ä½œä¸ºæ¨¡å‹ä¸Šä¸‹æ–‡promptã€‚

è¿™ä¸ªè¦å¦‚ä½•å®ç°ï¼Ÿæ–¹æ³•æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ä¼ ç»Ÿçš„å…³é”®è¯åŒ¹é…ï¼Œæˆ–è€…ç”¨ `Elasticsearch` ç­‰å¼•æ“åšæ¨¡ç³ŠåŒ¹é…éƒ½å¯ä»¥ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸ªæ›´AIæ›´æ™ºèƒ½çš„æ–¹å¼ï¼šå‘é‡æœç´¢ã€‚

##### ä»€ä¹ˆæ˜¯å‘é‡æœç´¢ï¼Ÿ

æ¥å›å¿†ä¸€ä¸‹NLPåŸºç¡€çŸ¥è¯†ï¼Œè¦å¤„ç†è‡ªç„¶è¯­è¨€æ–‡æœ¬ï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å°†å®ƒåˆ†è¯åè½¬ä¸ºä¸€ä¸ªä¸ªtokenã€‚tokençš„ç¼–ç å®é™…ä¸Šæ˜¯ä»£è¡¨ç€ä¸€ç§one-hotå‘é‡ï¼Œç»´åº¦å¤ªå¤§äº†ï¼Œæ‰€ä»¥è¦å¯¹å®ƒè¿›è¡Œ embeddingï¼ˆè¯åµŒå…¥ï¼‰é™ç»´ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªnç»´çš„å‘é‡ã€‚

å°†ä¸€æ®µæ–‡æœ¬å‘é‡åŒ–ä¹‹åæ¯ä¸ªå‘é‡å¯ä»¥ç†è§£ä¸ºæ˜¯ n ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œä¸¤ä¸ªè¶Šç›¸ä¼¼çš„æ–‡æœ¬å®ƒä»¬åœ¨è¿™ä¸ªnç»´ç©ºé—´ä¸­çš„è·ç¦»å°±è¶Šè¿‘ã€‚æ‰¾å‡ºè·ç¦»æœ€è¿‘çš„ç‚¹çš„è¿‡ç¨‹å°±å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå‘é‡æœç´¢çš„è¿‡ç¨‹ã€‚æœ€å¸¸è§çš„ç®—æ³•æ˜¯æ¬§æ°è·ç¦»è®¡ç®—ï¼š

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

æ¬§å¼è·ç¦»

å¬èµ·æ¥æœ‰äº›å¤æ‚æ˜¯ä¸æ˜¯ï¼Œå…¶å®è®¸å¤šå·²ç»äº‹å…ˆå°è£…å¥½çš„å‘é‡æœç´¢å·¥å…·ï¼Œ**æ¯”å¦‚æ¥è‡ª Facebook çš„ Faiss ï¼Œå¼€æºçš„Chromaç­‰ç­‰**ï¼Œæˆ‘ä»¬ä»…éœ€äº†è§£åŸºæœ¬æ¦‚å¿µå³å¯ï¼Œå¹¶ä¸”ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä»…éœ€è‹¥å¹²è¡Œä»£ç å°±å¯ä»¥å®ç°å‘é‡æœç´¢çš„è¿‡ç¨‹ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹ä½¿ç”¨Faissé…åˆChainså®ç°æ–‡æœ¬åŒ¹é…å¬å›å®ç°æ™ºèƒ½é—®ç­”ï¼š

**ç¬¬ä¸€æ­¥ï¼šå°†æ–‡æœ¬åˆ†ä¸ºä¸€ä¸ªä¸ªã€å—ã€‘**

-   å¬å›åŒ¹é…åˆ°çš„å†…å®¹ç²’åº¦ï¼Œæ˜¯ä»¥ã€å—ã€‘ä¸ºå•ä½è¿›è¡Œçš„ã€‚ä¸€ä¸ªå—å¯ä»¥æ˜¯ä¸€å¥æ–‡æœ¬ï¼Œä¸€è¡Œæ–‡æœ¬ï¼Œä¸€æ®µæ–‡æœ¬ã€‚ç²’åº¦è¶Šç²—èƒ½åŒ…å«çš„ä¸Šä¸‹æ–‡å°±è¶Šå¤šï¼Œä½†æ˜¯å¯¹æ¨¡å‹ä¸Šä¸‹æ–‡å‹åŠ›å¤§å°å°±è¶Šå¤§ï¼Œè¾ƒå°çš„å—æœ‰æ—¶æ›´å®¹æ˜“åŒ¹é…æŸ¥è¯¢ã€‚
    
-   Langchainä¸­æœ‰ä¸€äº›ä¸“ç”¨çš„å·¥å…·ç±»æ¥åšè¿™äº›äº‹æƒ…å« `Text Splitters`ï¼Œå¯ä»¥å°†æ–‡æœ¬æŒ‰ç²’åº¦è¿›è¡Œåˆ†éš”ã€‚
    
-   åˆ›å»ºä¸€ä¸ªsplitterç¤ºä¾‹ï¼š
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;MarkdownTextSplitteræ˜¯ä¸€ä¸ªText&nbsp;Splittersçš„å®ç°ï¼Œç”¨æ¥å¿«é€Ÿå¯¹markdownæˆ–è€…çº¯æ–‡æœ¬åˆ†æ®µã€‚</span><br><span data-darkreader-inline-color="">const</span>&nbsp;splitter&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;MarkdownTextSplitter({<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">chunkSize</span>:&nbsp;<span data-darkreader-inline-color="">100</span>,&nbsp;<span data-darkreader-inline-color="">//&nbsp;ä¸€ä¸ªå—ä¸­æœ€å¤§çš„tokenæ•°é‡</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">chunkOverlap</span>:&nbsp;<span data-darkreader-inline-color="">50</span>,&nbsp;<span data-darkreader-inline-color="">//&nbsp;ç›¸é‚»å—ä¹‹é—´é‡å å­—ç¬¦çš„æ•°é‡ã€‚é»˜è®¤å€¼ä¸º200ä¸ªTokenã€‚å—å’Œå—ä¹‹é—´æ·»åŠ é‡å çš„æ–‡æœ¬æœ‰åŠ©äºæ¨¡å‹è·å–æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯</span><br>});<br><span data-darkreader-inline-color="">//&nbsp;å°†ä¸Šä¸‹æ–‡å‘é‡åŒ–</span><br><span data-darkreader-inline-color="">const</span>&nbsp;output&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;splitter.splitText(docText);<br></code>
```

-   `chunkOverlap` çš„ä½œç”¨ï¼Œå¯ä»¥ä½¿å—å’Œå—ä¹‹é—´å åŠ é‡å¤çš„åŒºåŸŸï¼Œä½¿å¾—å¬å›çš„æ–‡æœ¬èƒ½å¤Ÿè·å–æ›´å¤šå…³è”çš„ä¸Šä¸‹æ–‡ï¼Œè¾¾æˆæ›´å¥½çš„æ€»ç»“æ•ˆæœï¼š
    

-   ä¸‹å›¾æ˜¯è®¾ç½®äº† `chunkOverlap` å‚æ•°çš„ç¤ºä¾‹ï¼Œé€šè¿‡çº¢ã€é»„ã€è“ä¸‰ä¸ªæ¡†å°†æ–‡æœ¬åˆ†å‰²ä¸ºä¸‰ä¸ªå—å¹¶æ·»åŠ äº†é‡å çš„éƒ¨åˆ†ï¼ˆç¤ºä¾‹ï¼Œå®é™…å¹¶ä¸æ˜¯å®Œå…¨æŒ‰ç…§è¡Œæ¥åˆ†å‰²ï¼‰ï¼š
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

image.png

ä»¥ä¸Šé¢é«˜è€ƒæ–°é—»çš„ä¾‹å­ä¸¾ä¾‹ï¼Œåˆ†å‰²å¥½çš„æ–‡æœ¬ç»“æœæ˜¯ç±»ä¼¼ä»¥ä¸‹çš„å†…å®¹ã€‚

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">const</span>&nbsp;docs&nbsp;=&nbsp;[<br>&nbsp;<span data-darkreader-inline-color="">"é«˜è€ƒæŠ¥åäººæ•°è¿‘å¹´ä¸€ç›´å‘ˆç°æ˜æ˜¾çš„ä¸Šæ¶¨è¶‹åŠ¿ï¼Œé‚£ä¹ˆ2023å¹´å„çœé«˜è€ƒäººæ•°æ˜¯å¤šå°‘ï¼Ÿ2023å¹´å…¨å›½é«˜è€ƒäººæ•°èƒ½è¾¾åˆ°å¤šå°‘äººï¼Ÿ2023å…¨å›½å‚åŠ é«˜è€ƒäººæ•°æœ‰å¤šå°‘ï¼Ÿ2023å¹´é«˜è€ƒäººæ•°æ¯”2023å¹´å¤šå—ï¼Ÿå„çœå¸‚é«˜è€ƒäººæ•°æ’åå¦‚ä½•"</span>,<br>&nbsp;<span data-darkreader-inline-color="">"åˆ°å¤šå°‘äººï¼Ÿ2023å…¨å›½å‚åŠ é«˜è€ƒäººæ•°æœ‰å¤šå°‘ï¼Ÿ2023å¹´é«˜è€ƒäººæ•°æ¯”2023å¹´å¤šå—ï¼Ÿå„çœå¸‚é«˜è€ƒäººæ•°æ’åå¦‚ä½•ï¼Ÿåœ¨æœ¬æ–‡å°ç¼–æ•´ç†äº†å…¨å›½å„åœ°å†å¹´é«˜è€ƒäººæ•°ç»Ÿè®¡ä¸€è§ˆè¡¨ï¼Œå¹¶é™„ä¸Š2023å¹´å…¨å›½å„åœ°é«˜è€ƒäººæ•°æ’è¡Œæ¦œï¼Œå¯ä¾›åŒå­¦ä»¬"</span>,<br>&nbsp;<span data-darkreader-inline-color="">"ï¼Ÿåœ¨æœ¬æ–‡å°ç¼–æ•´ç†äº†å…¨å›½å„åœ°å†å¹´é«˜è€ƒäººæ•°ç»Ÿè®¡ä¸€è§ˆè¡¨ï¼Œå¹¶é™„ä¸Š2023å¹´å…¨å›½å„åœ°é«˜è€ƒäººæ•°æ’è¡Œæ¦œï¼Œå¯ä¾›åŒå­¦ä»¬å‚è€ƒã€‚"</span>,<br>&nbsp;<span data-darkreader-inline-color="">//&nbsp;...</span><br>]<br></code>
```

**ç¬¬äºŒæ­¥ï¼šå»ºç«‹å‘é‡æ•°æ®åº“**

-   åˆ›å»º embedding ç±»ï¼Œembedding ç±»å°±æ˜¯å…·ä½“åœ°å¦‚ä½•é€šè¿‡è®­ç»ƒå¥½çš„embeddingæ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡å€¼çš„classï¼š
    

-   åˆ›å»ºå‘é‡æ•°æ®åº“ï¼šå°†outputï¼Œmetadataï¼Œembeddingä¼ å…¥ `FaissStore`ã€‚embedding ç±»å°†è‡ªåŠ¨å¯¹æ¯ä¸€æ¡docï¼ˆåˆ†å‰²å¥½çš„å—ï¼‰è¿›è¡Œå‘é‡åŒ–ï¼Œè¿”å›ä¸€ä¸ªå‘é‡æ•°æ®åº“ç±»ã€‚
    
-   metadata ä¸ºå’Œ doc ç›¸å…³è”çš„å…ƒä¿¡æ¯ï¼ˆæ¯”å¦‚è¯´å¯¹åº”åŸæ–‡ç¬¬nè¡Œæ•°æ®ï¼Œç›¸å…³è”çš„å¯¹è±¡ç­‰ç­‰ï¼‰è‹¥ä¸éœ€è¦ç›´æ¥ä¼ outputä¹Ÿå¯ä»¥ã€‚
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;FaissStore&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'langchain/vectorstores/faiss'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;OpenAIEmbeddings&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'langchain/embeddings'</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;embedding&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;OpenAIEmbeddings()&nbsp;<span data-darkreader-inline-color="">//&nbsp;ä½¿ç”¨OpenAIçš„embeddingæ¨¡å‹</span><br><span data-darkreader-inline-color="">const</span>&nbsp;vectorStore&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;FaissStore.fromTexts(output,&nbsp;metadata,&nbsp;embedding);<br></code>
```

-   åœ¨å¯¼å…¥ Faiss å‰éœ€å®‰è£… `libomp`, å¦åˆ™å¯èƒ½ä¼šå‡ºç° lib æ‰¾ä¸åˆ°çš„æŠ¥é”™ã€‚åœ¨ mac ä¸Šå¯ä»¥ä¸€é”®é€šè¿‡ brew å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š`brew install libmop`ã€‚
    

**ç¬¬ä¸‰æ­¥ï¼šæœç´¢åŒ¹é…æ–‡æœ¬**

-   è®¾ç½®topKå¹¶è°ƒç”¨æœç´¢æ–¹æ³•ï¼Œä½¿ç”¨ `similaritySearchWithScore` æ–¹æ³•å°†ä¼šæŠŠæœ€åŒ¹é…çš„Kä¸ªå—è¿”å›å›æ¥ï¼š
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">const</span>&nbsp;prompt&nbsp;=&nbsp;<span data-darkreader-inline-color="">"æ¹–å—é«˜è€ƒæŠ¥åäººæ•°"</span><br><span data-darkreader-inline-color="">const</span>&nbsp;topK&nbsp;=&nbsp;<span data-darkreader-inline-color="">3</span>;<br><span data-darkreader-inline-color="">//&nbsp;æœç´¢æœ€ç›¸å…³çš„topKä¸ªå—</span><br><span data-darkreader-inline-color="">const</span>&nbsp;searchRes&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;vectorStore.similaritySearchWithScore(prompt,&nbsp;topK);<br><span data-darkreader-inline-color="">//&nbsp;åŒ¹é…å‰3çš„ç»“æœï¼š</span><br><span data-darkreader-inline-color="">//&nbsp;2023å¹´æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººã€‚å…¶ä¸­æ™®é€šé«˜è€ƒæŠ¥åäººæ•°50.97ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 1.27ä¸‡äººï¼ˆé¦–é€‰ç‰©ç†çš„è€ƒç”Ÿæœ‰30.93ä¸‡äººï¼Œå æ¯”60.68%ï¼›é¦–é€‰å†å²çš„è€ƒç”Ÿæœ‰20.04ä¸‡äººï¼Œå æ¯”39.3</span><br><span data-darkreader-inline-color="">//&nbsp;2023å¹´é«˜è€ƒä¸­ï¼Œæ²³å—çœçš„é«˜è€ƒäººæ•°è¾¾åˆ°äº†125ä¸‡ï¼Œæˆä¸ºå…¨å›½é«˜è€ƒäººæ•°æœ€å¤šçš„çœä»½ï¼Œ2023å››å·çœçš„é«˜è€ƒæŠ¥åäººæ•°è¶…è¿‡77ä¸‡äººï¼Œå¯¹æ¯”å»å¹´ï¼ˆ69.8ä¸‡ï¼‰æ¶¨äº†7.2ä¸‡ã€‚</span><br><span data-darkreader-inline-color="">//&nbsp;æµ·å—ä¸‰äºšå¸‚å‚åŠ é«˜è€ƒæŠ¥åäººæ•°å…±5946äººï¼Œæ¯”å»å¹´å¢åŠ äº†436äººã€‚å…¶ä¸­æ™®é€šç±»5170äººï¼Œè‰ºæœ¯ç±»496äººï¼Œä½“è‚²ç±»280äººï¼›åº”å±Šç”Ÿ5518äººï¼ˆå«ä¸­èŒç”Ÿ111äººï¼‰ï¼Œå¾€å±Šç”Ÿ428äººï¼›å¤–çœç±åŠ¡å·¥äººå‘˜éšè¿å­å¥³ï¼ˆå¼‚åœ°</span><br></code>
```

-   æˆåŠŸåœ¨åŸæ–‡ä¸­åŒ¹é…å¬å›äº†3æ¡ç»“æœï¼Œå…¶ä¸­ç¬¬ä¸€æ¡æ˜¯æœ€ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ã€‚
    

#### æ¥å…¥é—®ç­”Chainï¼Œå®ç°çŸ¥è¯†åº“é—®ç­”ï¼š

Langchainä¸­å†…ç½®äº†`StuffDocumentsChain`ï¼Œ`MapReduceDocumentsChain`ï¼Œè¿™äº›Chainé‡Œé¢å†…ç½®äº†å‘é‡æœç´¢ä»¥åŠæ‹¼æ¥ä¸ºpromptçš„è¿‡ç¨‹ã€‚

-   `StuffDocumentsChain` æ˜¯æœ€ç®€å•çš„å°†æ‰€æœ‰è¾“å…¥æ–‡æ¡£æ³¨å…¥åˆ°æç¤ºä¸­ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›é—®é¢˜çš„ç­”æ¡ˆã€‚å®ƒé€‚ç”¨äºå¯¹å°‘é‡æ–‡æ¡£è¿›è¡Œé—®ç­”ä»»åŠ¡ã€‚
    

-   ä½¿ç”¨è¿™ä¸ªchainæ—¶ï¼Œå®ƒä¼šå°†åŒ¹é…åˆ°çš„æ–‡æœ¬æ‹¼æ¥æˆä»¥ä¸‹æ ¼å¼çš„prompt:
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">ä½¿ç”¨ä¸‹é¢çš„ä¸Šä¸‹æ–‡æ¥å›ç­”æœ€åçš„é—®é¢˜ã€‚å¦‚æœæ‚¨ä¸çŸ¥é“ç­”æ¡ˆï¼Œè¯·ç›´æ¥è¯´ä¸çŸ¥é“ï¼Œä¸è¦è¯•å›¾ç¼–é€ ç­”æ¡ˆã€‚<br><br>2023å¹´æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººã€‚å…¶ä¸­æ™®é€šé«˜è€ƒæŠ¥åäººæ•°50.97ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 1.27ä¸‡äººï¼ˆé¦–é€‰ç‰©ç†çš„è€ƒç”Ÿæœ‰30.93ä¸‡äººï¼Œå æ¯”60.68%ï¼›é¦–é€‰å†å²çš„è€ƒç”Ÿæœ‰20.04ä¸‡äººï¼Œå æ¯”39.32%ï¼‰ï¼›å¯¹å£å‡å­¦è€ƒè¯•æŠ¥åäººæ•°16.69ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 1.49ä¸‡äººï¼›å°‘å¹´ç­ç­‰å…¶ä»–è€ƒç”Ÿçº¦0.74ä¸‡äººï¼Œä¸ä¸Šå¹´åŸºæœ¬æŒå¹³ã€‚<br><br>Question:&nbsp;æ¹–å—é«˜è€ƒäººæ•°æ˜¯å¤šå°‘ï¼Ÿ<br>Helpful&nbsp;Answer:<br></code>
```

-   `MapReduceDocumentsChain` è¿™ç§æ–¹æ³•æ¶‰åŠå¯¹æ¯ä¸ªæ•°æ®å—è¿è¡Œåˆå§‹æç¤ºï¼ˆå¯¹äºæ‘˜è¦ä»»åŠ¡ï¼Œè¿™å¯èƒ½æ˜¯è¯¥å—çš„æ‘˜è¦ï¼›å¯¹äºé—®ç­”ä»»åŠ¡ï¼Œè¿™å¯èƒ½æ˜¯ä»…åŸºäºè¯¥å—çš„ç­”æ¡ˆï¼‰ã€‚ç„¶åï¼Œè¿è¡Œä¸€ä¸ªä¸åŒçš„æç¤ºæ¥ç»„åˆæ‰€æœ‰åˆå§‹è¾“å‡ºã€‚ç®€å•æ¥è¯´å°±æ˜¯å¤šå—å†…å®¹æ€»ç»“æˆnå—åå°†è¿™nå—å†…å®¹æ‹¼èµ·æ¥å†æ€»ç»“ä¸€æ¬¡ã€‚ä¸€èˆ¬é€‚ç”¨äºChatPDFç­‰å¤§æ®µæ–‡æœ¬çš„åœºæ™¯ã€‚
    

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

image.png

ä½¿ç”¨`StuffDocumentsChain`å®ç°é—®ç­”ä»£ç ç¤ºä¾‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">const</span>&nbsp;llmA&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;OpenAI({});<br><span data-darkreader-inline-color="">const</span>&nbsp;chainA&nbsp;=&nbsp;loadQAStuffChain(llmA);<br><span data-darkreader-inline-color="">const</span>&nbsp;splitter&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;MarkdownTextSplitter({<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">chunkSize</span>:&nbsp;<span data-darkreader-inline-color="">100</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">chunkOverlap</span>:&nbsp;<span data-darkreader-inline-color="">50</span>,<br>});<br><span data-darkreader-inline-color="">//&nbsp;å»ºç«‹å‘é‡æ•°æ®åº“</span><br><span data-darkreader-inline-color="">const</span>&nbsp;docs&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;splitter.createDocuments([text]);<br><br><span data-darkreader-inline-color="">const</span>&nbsp;question&nbsp;=&nbsp;<span data-darkreader-inline-color="">'æ¹–å—é«˜è€ƒäººæ•°æ˜¯å¤šå°‘ï¼Ÿ'</span>;<br><span data-darkreader-inline-color="">//&nbsp;è°ƒç”¨chainï¼Œè¿›è¡Œå‘é‡åŒ¹é…å¹¶å›ç­”ç”¨æˆ·çš„æé—®</span><br><span data-darkreader-inline-color="">const</span>&nbsp;resA&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;chainA.call({<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">input_documents</span>:&nbsp;docs,&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ–‡æ¡£å—åˆ—è¡¨</span><br>&nbsp;&nbsp;question,&nbsp;<span data-darkreader-inline-color="">//&nbsp;ç”¨æˆ·æé—®</span><br>});<br><span data-darkreader-inline-color="">//&nbsp;resAé—®ç­”ç»“æœï¼šä¸Šæµ·çš„è€ƒç”Ÿå°†äº6æœˆ24æ—¥èµ·æ”¶åˆ°æˆç»©é€šçŸ¥å•æŠ•é€’åˆ°è€ƒç”Ÿå®¶ä¸­ã€‚</span><br></code>
```

#### å®ç°ä¸€ä¸ªè‡ªå·±çš„Chainsï¼š

Langchainå†…ç½®äº†ä¸€äº›å¦‚æ–‡æ¡£é—®ç­”Chainï¼Œæ•°æ®åº“Chainï¼ŒAPIChainä¸€äº›å¸¸ç”¨çš„Chainã€‚å¦‚æœè¿™äº›Chainä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªChainï¼Œç»§æ‰¿BaseChainå®ç°å…¶ä¸­çš„æ¥å£æ–¹æ³•å³å¯ï¼Œæ ¸å¿ƒå°±ä¸¤ç‚¹ï¼š

-   å®šä¹‰è¾“å…¥è¾“å‡ºçš„key
    
-   å®ç°\_callæ–¹æ³•ï¼Œå‘Šè¯‰æ¨¡å‹æ‹¿åˆ°è¾“å…¥åå»æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼ˆè®¿é—®è‡ªå·±çš„æ¥å£ï¼Œæ“ä½œæ•°æ®åº“ï¼Œè¿è¡Œç‰¹å®šæŒ‡ä»¤ç­‰ç­‰ï¼‰
    

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;BaseChain&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"langchain/chains"</span>;<br><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyCustomChain</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">BaseChain</span>&nbsp;</span>{<br>&nbsp;&nbsp;inputKeys&nbsp;=&nbsp;[<span data-darkreader-inline-color="">"input"</span>];<br>&nbsp;&nbsp;outputKeys&nbsp;=&nbsp;[<span data-darkreader-inline-color="">"output"</span>];<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">/**<br>&nbsp;&nbsp;&nbsp;*&nbsp;å®ç°_callæ–¹æ³•è°ƒç”¨å¤–éƒ¨çš„æ¥å£å¹¶è¿”å›ç»“æœ<br>&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;_call(inputs:&nbsp;Record&lt;string,&nbsp;any&gt;)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;input&nbsp;}&nbsp;=&nbsp;inputs;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è·å–è¾“å…¥ï¼Œå¹¶è°ƒç”¨å¤–éƒ¨æ¥å£</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;output&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;someAsyncFunction(input);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{&nbsp;output&nbsp;};<br>&nbsp;&nbsp;}<br>}<br></code>
```

### ä½¿ç”¨Agentsï¼š

Chainsçš„æµç¨‹ç›¸å¯¹è¾ƒä¸ºå›ºå®šï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå®ä¾‹æ¥çœ‹ä¸€ä¸‹Agentsçš„èƒ½åŠ›ã€‚

è¦ä½¿ç”¨ä¸€ä¸ªagentï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª`agent`ï¼Œä»¥åŠ`agent`æ‰€éœ€çš„`tools`ï¼š

-   å®šä¹‰è‹¥å¹²ä¸ªå·¥å…·`Tool`ï¼Œç”¨æ¥æ ‡è¯†agentæ‰€èƒ½ä½¿ç”¨çš„"å·¥å…·"ã€‚
    
-   ä¸€ä¸ª`LLMChain`ï¼Œå¹¶é€šè¿‡toolæ¥åˆ›å»ºchainå¯¹åº”çš„promptï¼Œä»¥åŠå®šä¹‰chainä½¿ç”¨çš„LLMå¤§æ¨¡å‹ã€‚
    
-   ä¸€ä¸ª`agent`ï¼Œå®šä¹‰agentçš„æ‰€éœ€çš„chainä»¥åŠè¾“å‡ºçš„parserï¼Œç”¨äºæ•è·æ¨¡å‹æ€è€ƒè¿‡ç¨‹ä»¥åŠé€‰æ‹©çš„toolã€‚
    
-   ä¸€ä¸ª`agentExecutor`ï¼Œå³agentæ‰§è¡Œå™¨ï¼Œä¼ å…¥agentå’Œtoolsç”¨äºæ‰§è¡Œagentã€‚
    

langchainå†…éƒ¨å°è£…äº†LLMChainå’Œagentå®ä¾‹çš„åˆ›å»ºä¸ºä¸€ä¸ªå·¥ä½œå‡½æ•°æ–¹æ³•ï¼Œä»…éœ€è¦å®šä¹‰æ‰€éœ€çš„toolsä¼ å…¥åˆ°å·¥å‚å‡½æ•°å³å¯è·å¾—ä¸€ä¸ªagentExecutorã€‚

#### Tool Prompts:

ä¸€ä¸ªToolséœ€è¦åŒ…å«ä¸‰ä¸ªå±æ€§ï¼š`name`ï¼Œ`description`ï¼Œ`_call`ã€‚å…¶ä¸­ `name` å’Œ `description` å…±åŒä½œä¸º `prompt` çš„ä¸€éƒ¨åˆ†ï¼Œ`_call` æ–¹æ³•åˆ™æ˜¯å…·ä½“æ¥å—ä»å·¥å…· prompt è§£æå‡ºæ¥çš„è¾“å…¥å¹¶å¼‚æ­¥è¿”å›è°ƒç”¨å¤–éƒ¨æ¥å£çš„è¾“å‡ºã€‚

ï¼ˆLangchainé»˜è®¤ä½¿ç”¨çš„promptéƒ½ä¸ºè‹±æ–‡ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œä¸‹é¢å±•ç¤ºæ—¶æŠŠ prompt éƒ½ç¿»è¯‘æˆäº†ä¸­æ–‡ï¼‰

**ä¸€ä¸ªå…¸å‹çš„"è®¡ç®—å™¨"Toolç±»å®ç°å¦‚ä¸‹**

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Parser&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"expr-eval"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Tool&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./base.js"</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">Calculator</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">Tool</span>&nbsp;</span>{<br><br>&nbsp;&nbsp;name&nbsp;=&nbsp;<span data-darkreader-inline-color="">"calculator"</span>;<br>&nbsp;&nbsp;description&nbsp;=&nbsp;<span data-darkreader-inline-color="">`ç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å·¥å…·ã€‚è¯¥å·¥å…·çš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç®€å•è®¡ç®—å™¨æ‰§è¡Œçš„æœ‰æ•ˆæ•°å­¦è¡¨è¾¾å¼ã€‚<br>`</span>;<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/**&nbsp;@ignore&nbsp;*/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">async</span>&nbsp;_call(input:&nbsp;string)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">try</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;Parser.evaluate(input).toString();<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">catch</span>&nbsp;(error)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">"I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;that."</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>}<br></code>
```

è¿™ä¸ª Tool ç±»çš„ descritption å¤§è‡´æè¿°äº†è¿™ä¸ªå·¥å…·æ˜¯ä¸€ä¸ª"è®¡ç®—å™¨"ï¼Œèƒ½å¤Ÿæ¥å—è¡¨è¾¾å¼çš„è¾“å…¥å¹¶ä¸”è¿”å›è®¡ç®—ç»“æœã€‚åœ¨ä½¿ç”¨agentsæ—¶ï¼Œæ¨¡å‹ä¼šæ ¹æ®æƒ…å†µæ™ºèƒ½åœ°é€‰æ‹©éœ€è¦æ‰§è¡Œçš„å·¥å…·ã€‚

agents ä¼šéå†æ‰€æœ‰æ³¨å†Œçš„ toolsï¼Œæ‹¼æ¥æˆä¸‹é¢è¿™ç§æ ¼å¼çš„ promptï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">è¯·å°½åŠ›å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š<br><br>vector-searchï¼šä¸€ä¸ªçŸ¥è¯†æœç´¢å·¥å…·ï¼Œå½“éœ€è¦ä»ä¿¡æ¯ä¸­æå–ä½ éœ€è¦çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚è‹¥ä¸èƒ½ç›´æ¥è·å–åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¯·å°è¯•è¿›è¡Œåˆ†è§£ã€‚<br>calculatorï¼šç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å·¥å…·ã€‚è¯¥å·¥å…·çš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç®€å•è®¡ç®—å™¨æ‰§è¡Œçš„æœ‰æ•ˆæ•°å­¦è¡¨è¾¾å¼ã€‚<br></code>
```

#### Agent prompts:

æœ‰äº†Toolsï¼Œè¯¥ç”¨ä½•ç§Promptå»æç¤ºæ¨¡å‹æ‰§è¡Œä½•ç§ä»»åŠ¡ï¼Ÿåœ¨ä¸Šé¢çš„å·¥å…·promptåŸºç¡€ä¸Šæˆ‘ä»¬ç»§ç»­æ‹¼æ¥ä»¥ä¸‹æ ¼å¼çš„prompt:

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">è¯·å°½åŠ›å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š<br><br>vector-searchï¼šä¸€ä¸ªçŸ¥è¯†æœç´¢å·¥å…·ï¼Œå½“éœ€è¦ä»ä¿¡æ¯ä¸­æå–ä½ éœ€è¦çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚è‹¥ä¸èƒ½ç›´æ¥è·å–åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¯·å°è¯•è¿›è¡Œåˆ†è§£ã€‚<br>calculatorï¼šç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å·¥å…·ã€‚è¯¥å·¥å…·çš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç®€å•è®¡ç®—å™¨æ‰§è¡Œçš„æœ‰æ•ˆæ•°å­¦è¡¨è¾¾å¼ã€‚<br><br>è¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼å›ç­”é—®é¢˜ï¼š<br>Question:&nbsp;ç”¨æˆ·çš„æé—®<br>Thought:&nbsp;ä½ åº”è¯¥æ€è€ƒå¦‚ä½•å›ç­”è¿™ä¸ªé—®é¢˜<br>Action:&nbsp;é€‰æ‹©ä¸€ä¸ªé€‚å½“çš„å·¥å…·æ¥å›ç­”é—®é¢˜ï¼Œåº”è¯¥æ˜¯ä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªï¼š[vector-search,&nbsp;calculator]<br>Action&nbsp;Input:&nbsp;è¾“å…¥åˆ°å·¥å…·ä¸­çš„å†…å®¹<br>Observation:&nbsp;å·¥å…·è¿”å›çš„ç»“æœ<br>...&nbsp;ï¼ˆThought/Action/Action&nbsp;Input/Observationå¯ä»¥é‡å¤Næ¬¡ï¼‰<br>Thought:&nbsp;æˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†<br>Final&nbsp;Answer:&nbsp;åŸå§‹é—®é¢˜çš„æœ€ç»ˆç­”æ¡ˆæ˜¯ä»€ä¹ˆ<br></code>
```

é€šè¿‡è¿™ä¸€æ®µç¥å¥‡çš„ prompt ï¼Œæ¨¡å‹å°±èƒ½å¤Ÿè¿›è¡Œæ€è€ƒå¹¶é€‰æ‹©è¯¥ç”¨ä»€ä¹ˆå·¥å…·å»è§£å†³ï¼Œå¹¶å°†å®ƒçš„ä¸­é—´æ€è€ƒè¿‡ç¨‹æ·»åŠ åˆ° prompt å½“ä¸­å»ã€‚æ¨¡å‹ä¼šä¸æ–­åœ°æ€è€ƒ--é€‰æ‹©å·¥å…·--è§‚å¯Ÿè¿è¡Œç»“æœï¼Œç›´åˆ°å¯ä»¥å¾—å‡ºæœ€åçš„ç­”æ¡ˆã€‚

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

#### Agents å®é™…ä¾‹å­ï¼š

ä¸‹é¢è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå®ä¾‹æ¥å±•ç¤ºä¸€ä¸‹ Agents æ‹†è§£ä»»åŠ¡ï¼Œé€æ­¥è·å–ç»“æœçš„è¿‡ç¨‹ã€‚å‡è®¾æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯ä»ä¸€ç¯‡æ–°é—»ä¸­æ±‚å‡ºç”˜è‚ƒçœåŠ æ¹–å—çœé«˜è€ƒäººæ•°æ•°é‡æ˜¯å¤šå°‘ã€‚

##### è·å–æ•°æ®å¹¶è¿›è¡Œå‘é‡åŒ–ï¼š

æ–°é—»çš„åŸå§‹æ–‡æœ¬ä½¿ç”¨è¿™ç¯‡æ–°é—»ï¼šhttps://www.sohu.com/a/681224993\_99946287ï¼Œå°†è¿™ç¯‡æ–°é—»çš„æ–‡æœ¬ä¸‹è½½ä¸‹æ¥å¹¶ä¿å­˜ä¸ºæ–‡æœ¬ï¼Œä¹‹åé€šè¿‡VectorStoreQAToolè¿›è¡Œå‘é‡åŒ–ã€‚

##### å®šä¹‰ä¸¤ä¸ª Tools ï¼š

vector-search: ä¸€ä¸ªçŸ¥è¯†æœç´¢å·¥å…·ï¼Œå½“éœ€è¦ä»ä¿¡æ¯ä¸­æå–ä½ éœ€è¦çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚è‹¥ä¸èƒ½ç›´æ¥è·å–åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¯·å°è¯•è¿›è¡Œåˆ†è§£ã€‚

calculator: ç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å·¥å…·ã€‚è¯¥å·¥å…·çš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç®€å•è®¡ç®—å™¨æ‰§è¡Œçš„æœ‰æ•ˆæ•°å­¦è¡¨è¾¾å¼ã€‚

##### åˆ›å»ºä¸€ä¸ª agents ï¼Œå¹¶æ‰§è¡Œï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;åˆ›å»ºå‘é‡æ•°æ®åº“</span><br><span data-darkreader-inline-color="">const</span>&nbsp;vectorStore&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;FaissStore.fromTexts(output,&nbsp;output,&nbsp;embedding);<br><br><span data-darkreader-inline-color="">//&nbsp;langchainå†…ç½®çš„VectorStoreQAToolæ²¡æœ‰æä¾›promptï¼Œè¿™é‡Œæ‰‹åŠ¨æä¾›</span><br><span data-darkreader-inline-color="">const</span>&nbsp;vecToolName&nbsp;=&nbsp;<span data-darkreader-inline-color="">'vector-search'</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;vecToolDescription&nbsp;=&nbsp;<span data-darkreader-inline-color="">'ä¸€ç§çŸ¥è¯†æœç´¢å·¥å…·ï¼Œç”¨äºä»å¤§é‡ä¿¡æ¯ä¸­æå–æ‰€éœ€ä¿¡æ¯ã€‚å¦‚æœæ— æ³•ç›´æ¥è·å¾—æœ‰ç”¨ä¿¡æ¯ï¼Œè¯·å°è¯•å°†å…¶åˆ†è§£ã€‚'</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;tools&nbsp;=&nbsp;[<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;å‘é‡æœç´¢å·¥å…·</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;VectorStoreQATool(vecToolName,&nbsp;vecToolDescription,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">llm</span>:&nbsp;llmA,<br>&nbsp;&nbsp;&nbsp;&nbsp;vectorStore,<br>&nbsp;&nbsp;}),<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è®¡ç®—å™¨å·¥å…·</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;Calculator(),<br>];<br><span data-darkreader-inline-color="">//&nbsp;åˆ›å»ºagentæ‰§è¡Œå™¨</span><br><span data-darkreader-inline-color="">const</span>&nbsp;executor&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;initializeAgentExecutorWithOptions(tools,&nbsp;llmA,&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">agentType</span>:&nbsp;<span data-darkreader-inline-color="">'zero-shot-react-description'</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">verbose</span>:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>});<br><br><span data-darkreader-inline-color="">//&nbsp;ç”¨æˆ·æé—®</span><br><span data-darkreader-inline-color="">const</span>&nbsp;input&nbsp;=&nbsp;<span data-darkreader-inline-color="">'æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°çš„ç»“æœ'</span>;<br><span data-darkreader-inline-color="">//&nbsp;ç»“æœ:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°ç»“æœä¸º931848</span><br><span data-darkreader-inline-color="">const</span>&nbsp;result&nbsp;=&nbsp;<span data-darkreader-inline-color="">await</span>&nbsp;executor.call({&nbsp;input&nbsp;});<br></code>
```

ç»è¿‡çº¦åå‡ ç§’çš„æ‰§è¡Œï¼Œæœ€åæˆåŠŸè·å–äº†æ­£ç¡®çš„ç»“æœï¼šæ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°ç»“æœä¸º931848

**è¿™åå‡ ç§’å½“ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæ¥æ‹†è§£ä¸€ä¸‹å‘é€ç»™æ¨¡å‹çš„ prompt ï¼š**

##### ç¬¬ä¸€æ­¥åˆå§‹çŠ¶æ€ï¼ŒAgent ä½¿ç”¨äº†ä»¥ä¸‹ promptï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">è¯·å°½åŠ›å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š<br><br>vector-searchï¼šä¸€ä¸ªçŸ¥è¯†æœç´¢å·¥å…·ï¼Œå½“éœ€è¦ä»ä¿¡æ¯ä¸­æå–ä½ éœ€è¦çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚è‹¥ä¸èƒ½ç›´æ¥è·å–åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè¯·å°è¯•è¿›è¡Œåˆ†è§£ã€‚<br>calculatorï¼šç”¨äºè®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å·¥å…·ã€‚è¯¥å·¥å…·çš„è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç®€å•è®¡ç®—å™¨æ‰§è¡Œçš„æœ‰æ•ˆæ•°å­¦è¡¨è¾¾å¼ã€‚<br><br>è¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼å›ç­”é—®é¢˜ï¼š<br><span data-darkreader-inline-color="">Question</span>:&nbsp;ç”¨æˆ·çš„æé—®<br><span data-darkreader-inline-color="">Thought</span>:&nbsp;ä½ åº”è¯¥æ€è€ƒå¦‚ä½•å›ç­”è¿™ä¸ªé—®é¢˜<br><span data-darkreader-inline-color="">Action</span>:&nbsp;é€‰æ‹©ä¸€ä¸ªé€‚å½“çš„å·¥å…·æ¥å›ç­”é—®é¢˜ï¼Œåº”è¯¥æ˜¯ä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªï¼š[vector-search,&nbsp;calculator]<br>Action&nbsp;Input:&nbsp;è¾“å…¥åˆ°å·¥å…·ä¸­çš„å†…å®¹<br><span data-darkreader-inline-color="">Observation</span>:&nbsp;å·¥å…·è¿”å›çš„ç»“æœ<br>...&nbsp;ï¼ˆThought/Action/Action&nbsp;Input/Observationå¯ä»¥é‡å¤Næ¬¡ï¼‰<br><span data-darkreader-inline-color="">Thought</span>:&nbsp;æˆ‘ç°åœ¨çŸ¥é“æœ€ç»ˆç­”æ¡ˆäº†<br>Final&nbsp;Answer:&nbsp;åŸå§‹é—®é¢˜çš„æœ€ç»ˆç­”æ¡ˆæ˜¯ä»€ä¹ˆ<br><br>å¼€å§‹ï¼<br><span data-darkreader-inline-color="">Question</span>:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°çš„ç»“æœï¼Œç”¨ä¸­æ–‡å›ç­”<br><span data-darkreader-inline-color="">Thought</span>:&nbsp;<br></code>
```

ä¸Šé¢çš„ prompt è®©æ¨¡å‹æ€è€ƒç¬¬ä¸€ä¸ªæ‰€éœ€è¦çš„å·¥å…·ï¼Œå¹¶å°†æ€è€ƒè¿‡ç¨‹æ”¾ç½®åœ¨ Thought ä¹‹åï¼Œéšåé€‰æ‹©åˆé€‚çš„å·¥å…·å’Œè§£ææ‰€éœ€çš„å·¥å…·è¾“å…¥ Action Input ï¼Œåœ¨è¿™é‡Œæ¨¡å‹çš„é€‰æ‹©æ˜¯çŸ¥è¯†åº“æœç´¢å·¥å…·ï¼Œå¹¶ä¸”å·¥å…·çš„è¾“å…¥åº”è¯¥ä¸ºæ¹–å—é«˜è€ƒæŠ¥åäººæ•°, ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°:

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">Thought:&nbsp;æˆ‘éœ€è¦æ‰¾åˆ°æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°<br>Action:&nbsp;vector-search<br>Action&nbsp;Input:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°,&nbsp;ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°<br></code>
```

##### ç¬¬äºŒæ­¥ï¼šæå–å…³è”æ–‡æœ¬ï¼š

ä½¿ç”¨ vector-search é…åˆå‘é‡æœç´¢ï¼Œæå–å…³è”çš„æ–‡æœ¬å¹¶è®©æ¨¡å‹æå–æ€»ç»“ä¿¡æ¯ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">ä½¿ç”¨ä¸‹é¢çš„ä¸Šä¸‹æ–‡æ¥å›ç­”æœ€åçš„é—®é¢˜ã€‚å¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œåªéœ€è¯´ä½ ä¸çŸ¥é“ï¼Œä¸è¦è¯•å›¾ç¼–é€ ç­”æ¡ˆã€‚<br><br>é«˜è€ƒæŠ¥åäººæ•°è¿‘å¹´ä¸€ç›´å‘ˆç°æ˜æ˜¾çš„ä¸Šæ¶¨è¶‹åŠ¿ï¼Œé‚£ä¹ˆ2023å¹´å„çœé«˜è€ƒäººæ•°æ˜¯å¤šå°‘ï¼Ÿ2023å¹´å…¨å›½é«˜è€ƒäººæ•°èƒ½è¾¾åˆ°å¤šå°‘äººï¼Ÿ2023å…¨å›½å‚åŠ é«˜è€ƒäººæ•°æœ‰å¤šå°‘ï¼Ÿ2023å¹´é«˜è€ƒäººæ•°æ¯”2023å¹´å¤šå—ï¼Ÿå„çœå¸‚é«˜è€ƒäººæ•°æ’åå¦‚ä½•ï¼Ÿåœ¨æœ¬æ–‡å°ç¼–æ•´ç†äº†å…¨å›½å„åœ°å†å¹´é«˜è€ƒäººæ•°ç»Ÿè®¡ä¸€è§ˆè¡¨ï¼Œå¹¶é™„ä¸Š2023å¹´å…¨å›½å„åœ°é«˜è€ƒäººæ•°æ’è¡Œæ¦œï¼Œå¯ä¾›åŒå­¦ä»¬å‚è€ƒã€‚<br>2023å¹´æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººã€‚å…¶ä¸­æ™®é€šé«˜è€ƒæŠ¥åäººæ•°50.97ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 1.27ä¸‡äººï¼ˆé¦–é€‰ç‰©ç†çš„è€ƒç”Ÿæœ‰30.93ä¸‡äººï¼Œå æ¯”60.68%ï¼›é¦–é€‰å†å²çš„è€ƒç”Ÿæœ‰20.04ä¸‡äººï¼Œå æ¯”39.32%ï¼‰ï¼›å¯¹å£å‡å­¦è€ƒè¯•æŠ¥åäººæ•°16.69ä¸‡äººï¼Œæ¯”ä¸Šå¹´å¢åŠ 1.49ä¸‡äººï¼›å°‘å¹´ç­ç­‰å…¶ä»–è€ƒç”Ÿçº¦0.74ä¸‡äººï¼Œä¸ä¸Šå¹´åŸºæœ¬æŒå¹³ã€‚<br>2023å¹´ç”˜è‚ƒçœé«˜è€ƒæŠ¥åäººæ•°å…±è®¡247848äººï¼Œæ¯”å»å¹´å¢åŠ 4600äººã€‚å…¶ä¸­ï¼Œå‚ä¸æ™®é€šé«˜è€ƒè€ƒåœºç¼–æ’è€ƒç”Ÿ196678äººï¼Œå…±è®¾ç½®15ä¸ªè€ƒåŒºï¼Œ195ä¸ªè€ƒç‚¹ï¼Œ6967ä¸ªè€ƒåœºã€‚ä¸å‚ä¸ç»Ÿä¸€é«˜è€ƒè€ƒåœºç¼–æ’è€ƒç”Ÿ51170äººï¼ŒåŒ…æ‹¬é«˜ç­‰èŒä¸šæ•™è‚²åˆ†ç±»è€ƒè¯•æ‹›ç”Ÿç»¼åˆè¯„ä»·å½•å–23068äººï¼Œä¸­èŒå‡å­¦è€ƒè¯•&nbsp;27965äººã€æ¶ˆé˜²å•æ‹›68äººï¼Œæ®‹éšœç”Ÿï¼ˆä¸å‚åŠ å…¨å›½ç»Ÿè€ƒï¼‰44äººï¼Œå•è®¾è€ƒåœº25äººã€‚<br>å¹¿ä¸œçœæ±•å¤´å¸‚å…¬å¸ƒäº†2023å¹´é«˜è€ƒæŠ¥åäººæ•°ï¼Œ2023å¹´é«˜è€ƒæŠ¥åäººæ•°ä¸ºï¼š5.4ä¸‡äººï¼Œç›¸æ¯”2023å¹´å¢åŠ äº†5000äºº+ï¼ŒæŠ¥åäººæ•°ä¸Šæ¶¨10%ã€‚<br>æµ·å—ä¸‰äºšå¸‚å‚åŠ é«˜è€ƒæŠ¥åäººæ•°å…±5946äººï¼Œæ¯”å»å¹´å¢åŠ äº†436äººã€‚å…¶ä¸­æ™®é€šç±»5170äººï¼Œè‰ºæœ¯ç±»496äººï¼Œä½“è‚²ç±»280äººï¼›åº”å±Šç”Ÿ5518äººï¼ˆå«ä¸­èŒç”Ÿ111äººï¼‰ï¼Œå¾€å±Šç”Ÿ428äººï¼›å¤–çœç±åŠ¡å·¥äººå‘˜éšè¿å­å¥³ï¼ˆå¼‚åœ°é«˜è€ƒï¼‰645äººï¼Œå æŠ¥è€ƒäººæ•°çš„10.8%ã€‚<br>ä»Šå¹´æ±Ÿè¥¿çœè¿‘54ä¸‡åè€ƒç”ŸæŠ¥åé«˜è€ƒã€‚<br><br>Question:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°,&nbsp;ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°<br>Helpful&nbsp;Answer:<br></code>
```

æ­¤å¤„ Helpful Answer ç”±æ¨¡å‹æ€»ç»“çš„å†…å®¹ï¼šæ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººï¼Œç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°å…±è®¡247848äººã€‚

##### ç¬¬ä¸‰æ­¥ï¼šè·å–äº†äººæ•°ç›¸å…³å¿…è¦ä¿¡æ¯ä¹‹åï¼Œæ¨¡å‹ä¼šæ™ºèƒ½åœ°é€‰æ‹©è°ƒç”¨è®¡ç®—å™¨å·¥å…·ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">Question:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°çš„ç»“æœï¼Œç”¨ä¸­æ–‡å›ç­”<br>Thought:&nbsp;æˆ‘éœ€è¦æ‰¾åˆ°æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°<br>Action:&nbsp;vector-search<br>Action&nbsp;Input:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°,&nbsp;ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°<br>Observation:&nbsp;&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººï¼Œç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°å…±è®¡247848äººã€‚<br>Thought:&nbsp;æˆ‘ç°åœ¨çŸ¥é“äº†æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å™¨è®¡ç®—å‡ºæœ€ç»ˆç»“æœ<br>Action:&nbsp;calculator<br>Action&nbsp;Input:&nbsp;68.4ä¸‡äºº&nbsp;+&nbsp;247848<br></code>
```

æ­¤å¤„ä¼šè°ƒç”¨ Caculator å®ä¾‹ä¸­çš„ `_call` æ–¹æ³•ï¼Œå°†68.4ä¸‡äºº + 247848ä¼ å…¥åˆ°è®¡ç®—å™¨å·¥å…·ä¸­å¹¶æ‰§è¡Œ`Parser.evaluate(input);`ä»£ç ï¼Œç”±æ­¤è·å–è¡¨è¾¾å¼**å‡†ç¡®**çš„è®¡ç®—ç»“æœã€‚

**å¾ˆæ˜æ˜¾ï¼Œ68.4ä¸‡äºº + 247848ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„è¡¨è¾¾å¼**ï¼Œåœ¨ä»£ç æ•è·å¼‚å¸¸ä¹‹åè¿”å›æ¨¡å‹ I don't know how to do thatï¼Œè®©æ¨¡å‹å°è¯•**çº é”™**ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">Question:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°çš„ç»“æœï¼Œç”¨ä¸­æ–‡å›ç­”<br>Thought:&nbsp;æˆ‘éœ€è¦æ‰¾åˆ°æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°<br>Action:&nbsp;vector-search<br>Action&nbsp;Input:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°,&nbsp;ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°<br>Observation:&nbsp;&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººï¼Œç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°å…±è®¡247848äººã€‚<br>Thought:&nbsp;æˆ‘ç°åœ¨çŸ¥é“äº†æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å™¨è®¡ç®—å‡ºæœ€ç»ˆç»“æœ<br>Action:&nbsp;calculator<br>Action&nbsp;Input:&nbsp;68.4ä¸‡äºº&nbsp;+&nbsp;247848<br>Observation:&nbsp;I&nbsp;don<span data-darkreader-inline-color="">'t&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;that.<br>Thought:æˆ‘éœ€è¦å°†æ•°å­—è½¬æ¢ä¸ºè®¡ç®—å™¨å¯ä»¥ç†è§£çš„æ ¼å¼ã€‚<br>Action:&nbsp;calculator<br>Action&nbsp;Input:&nbsp;684000&nbsp;+&nbsp;247848<br></span></code>
```

åœ¨è¿™ä¸€è½®æ€è€ƒä¸­ï¼Œæ¨¡å‹æ·»åŠ äº†æ€è€ƒå†…å®¹å¹¶å°è¯•çº æ­£è¡¨è¾¾å¼ï¼šæˆ‘éœ€è¦å°†æ•°å­—è½¬æ¢ä¸ºè®¡ç®—å™¨å¯ä»¥ç†è§£çš„æ ¼å¼ã€‚å¹¶æŠŠåˆšæ‰é”™è¯¯çš„è¡¨è¾¾å¼æˆåŠŸçº æ­£ä¸ºæ­£ç¡®çš„è¡¨è¾¾å¼ 684000 + 247848ã€‚

##### ç¬¬å››æ­¥ï¼šæ¨¡å‹è®¤ä¸ºæ‰€æœ‰å¿…è¦ä¿¡æ¯éƒ½è·å–åˆ°äº†ï¼Œæ€»ç»“è¾“å‡ºç­”æ¡ˆï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">Question:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°çš„ç»“æœï¼Œç”¨ä¸­æ–‡å›ç­”<br>Thought:&nbsp;æˆ‘éœ€è¦æ‰¾åˆ°æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°<br>Action:&nbsp;vector-search<br>Action&nbsp;Input:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°,&nbsp;ç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°<br>Observation:&nbsp;&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°å…±æœ‰68.4ä¸‡äººï¼Œç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°å…±è®¡247848äººã€‚<br>Thought:&nbsp;æˆ‘ç°åœ¨çŸ¥é“äº†æ¹–å—å’Œç”˜è‚ƒçš„é«˜è€ƒæŠ¥åäººæ•°ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å™¨è®¡ç®—å‡ºæœ€ç»ˆç»“æœ<br>Action:&nbsp;calculator<br>Action&nbsp;Input:&nbsp;68.4ä¸‡äºº&nbsp;+&nbsp;247848<br>Observation:&nbsp;I&nbsp;don<span data-darkreader-inline-color="">'t&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;that.<br>Thought:&nbsp;æˆ‘éœ€è¦å°†æ•°å­—è½¬æ¢ä¸ºè®¡ç®—å™¨å¯ä»¥ç†è§£çš„æ ¼å¼ã€‚<br>Action:&nbsp;calculator<br>Action&nbsp;Input:&nbsp;684000&nbsp;+&nbsp;247848<br>Observation:&nbsp;931848.<br>Thought:&nbsp;æˆ‘ç°åœ¨çŸ¥é“äº†æœ€ç»ˆç»“æœ<br>Final&nbsp;Answer:&nbsp;æ¹–å—é«˜è€ƒæŠ¥åäººæ•°åŠ ä¸Šç”˜è‚ƒé«˜è€ƒæŠ¥åäººæ•°ç»“æœä¸º931848<br></span></code>
```

ä»¥ä¸Šæ¨¡å‹æ‹†è§£ä»»åŠ¡ï¼Œé€‰æ‹©å·¥å…·çš„æ­¥éª¤æ€»ç»“å¦‚ä¸‹ï¼š

-   **é€‰æ‹©å‘é‡æœç´¢å·¥å…·ï¼Œè·å–é—®é¢˜å¯¹åº”çš„å…³è”ä¿¡æ¯ã€‚**
    
-   **æå–å…³è”ä¿¡æ¯ä¸­çš„æ–‡æœ¬ï¼Œå¹¶ç”Ÿæˆè¡¨è¾¾å¼è°ƒç”¨"è®¡ç®—å™¨"è¿è¡Œã€‚**
    
-   **è®¡ç®—è¡¨è¾¾å¼éæ³•ï¼Œå°è¯•è¿›è¡Œçº æ­£ã€‚**
    
-   **çº æ­£ä¸ºåˆæ³•è¡¨è¾¾å¼ä¹‹åæˆåŠŸè·å–æœ€ç»ˆç»“æœã€‚**
    

è‡³æ­¤ï¼Œä»¥ä¸Šé€šè¿‡å¤§æ¨¡å‹+å¤šè½® agent promptï¼Œåœ¨ç»è¿‡äº†å·¥å…·çš„é€‰æ‹©ï¼Œç”Ÿæˆå·¥å…·è¾“å…¥ï¼Œæ‰§è¡Œå¤–éƒ¨å·¥å…·ï¼Œæ™ºèƒ½çº é”™ç­‰æ­¥éª¤ä¹‹åï¼Œè®©æ¨¡å‹æœ‰ä¾æœ‰æ®åœ°è¿›è¡Œå¤šæ­¥æ€è€ƒè°ƒç”¨å¤–éƒ¨å·¥å…·å¹¶è§£å†³é—®é¢˜ï¼Œå¹¶å¾—å‡ºå‡†ç¡®çš„ç­”æ¡ˆã€‚

## æ€»ç»“ï¼š

é€šè¿‡ä¸Šé¢ç« èŠ‚ï¼Œä»‹ç»äº†å¤§æ¨¡å‹çš„ç¼ºé™·ã€prompt çš„èƒ½åŠ›ã€Langchain æ¡†æ¶æ ¸å¿ƒæ¦‚å¿µï¼Œä»¥åŠåœ¨ Nodejs ä¸­ LLM ã€Prompt Templateã€Chainsã€Agent ç­‰æ–¹æ³•çš„å®è·µï¼Œä½¿å¾—æ¨¡å‹æœ‰è¿æ¥å¤–éƒ¨ä¸–ç•Œçš„èƒ½åŠ›ã€‚

Langchainçœ‹ä¼¼å¾ˆå¼ºå¤§ï¼Œä½†å®é™…ä¸Šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯ä¼šæœ‰ä»¥ä¸‹å‡ ç‚¹æŒ‘æˆ˜ï¼š

-   **å®šåˆ¶åŒ–**ï¼šLangchain å†…ç½®çš„chainsï¼Œagents æ— æ³•è¦†ç›–æ‰€æœ‰çš„åœºæ™¯ï¼Œå¦‚æœå¸Œæœ›ä¸è‡ªå·±ä¸šåŠ¡åº”ç”¨æ·±åº¦ç»“åˆå¿…ç„¶éœ€è¦è‡ªå®šä¹‰è®¸å¤š chains å’Œ agentsï¼Œæ¥ä½¿æ¨¡å‹å®ç°å¤–éƒ¨ä¸šåŠ¡è‡ªå·±çš„æ¥å£å’Œä»»åŠ¡ç¼–æ’è°ƒåº¦ã€‚åœ¨è®¾è®¡è°ƒè¯• prompt çš„è¿‡ç¨‹ä¸­è¾“å‡ºå¯èƒ½ä¼šé‡åˆ°ä¸ç¬¦åˆé¢„æœŸã€ä¸éµå¾ªæ ¼å¼ã€æ²¡æœ‰ç†è§£ç”¨æˆ·æ„å›¾ç­‰ç­‰ã€‚å¦‚æœä¸ä½¿ç”¨ ChatGPT ä½¿ç”¨ç§æœ‰éƒ¨ç½²çš„å¤§æ¨¡å‹æ›´å®¹æ˜“ç¢°åˆ°ä»¥ä¸Šé—®é¢˜ã€‚
    
-   **æˆåŠŸç‡ä¸é€Ÿåº¦**ï¼šè‹¥æ˜¯æ¯”è¾ƒå¤æ‚çš„ä»»åŠ¡ï¼Œagents ä¼šæ‹†è§£å‡ºè¾ƒå¤šè½®æ¬¡çš„ä»»åŠ¡ï¼Œå®¹æ˜“å‡ºç°ä¸ç¬¦åˆé¢„æœŸçš„è¾“å‡ºï¼Œå‡ºç°æ‰§è¡Œå¤±è´¥ä¸ç¨³å®šç­‰é—®é¢˜ã€‚è‹¥å¤–éƒ¨æ¥å£è°ƒç”¨çš„æ—¶é—´è¾ƒé•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªagentsè¦èŠ±è¾ƒå¤šçš„æ—¶é—´æ‰§è¡Œã€‚
    
-   **ç§æœ‰æ¨¡å‹ä¸æ•°æ®å®‰å…¨**ï¼šä¼ä¸šå†…éƒ¨åº”ç”¨ç›´æ¥æ¥å…¥ ChatGPT å¯èƒ½æœ‰æ½œåœ¨çš„æ•°æ®å®‰å…¨é£é™©ï¼Œå› æ­¤ä¸€èˆ¬ä¼šé€‰æ‹©ç¤¾åŒºå¼€æºçš„å¤§æ¨¡å‹ã€‚è€Œç¤¾åŒºå¤§æ¨¡å‹çš„æ•ˆæœå¯èƒ½ä¸å¦‚ ChatGPTï¼Œéœ€è¦è°ƒè¯•ä¿®æ”¹ promptï¼Œä½¿ç”¨å¢åŠ  few-shot ç­‰æ‰‹æ®µæ¥è¾¾åˆ°æ¥è¿‘ ChatGPT çš„æ•ˆæœï¼Œå¢åŠ äº†å¤§æ¨¡å‹æ¥å…¥çš„æˆæœ¬ã€‚
    

ä½†æ€»ä½“æ¥è¯´ Langchain å¯ä»¥ä»¥è¾ƒä½çš„æˆæœ¬å¿«é€Ÿåœ°è®©æ¨¡å‹å®ç°çœŸæ­£çš„å¤šæ¨¡æ€æ‰§è¡Œå¤šç§å¤–éƒ¨ä»»åŠ¡ï¼Œå¹¶ä¸”éå¸¸æ˜“äºæ¥å…¥ä½¿ç”¨ï¼Œæ— éœ€å¤ªå¤šçš„AIç›¸å…³çŸ¥è¯†å°±å¯ä½¿å®ç°åº”ç”¨çš„æ™ºèƒ½åŒ–ã€‚

## å‚è€ƒèµ„æ–™ï¼š

-   https://mp.weixin.qq.com/s/3coFhAdzr40tozn8f9Dc-w
    
-   https://zhuanlan.zhihu.com/p/560981386
    
-   https://github.com/liaokongVFX/LangChain-Chinese-Getting-Started-Guide