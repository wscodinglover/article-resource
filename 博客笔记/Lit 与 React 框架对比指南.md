![Image](https://mmbiz.qpic.cn/mmbiz_gif/9RM1R8UKDIYY8YKWQb1pQKyM9Im9uPOgYyIMol0VVzwZEAzLB5hENg20iaIqCOXPWCfYmzNHcTOthwgicJgwGN5w/640?wx_fmt=gif&wxfrom=5&wx_lazy=1&tp=webp)å…³æ³¨ä¸‹æ–¹å…¬ä¼—å·ï¼Œè·å–æ›´å¤šçƒ­ç‚¹èµ„è®¯![Image](https://mmbiz.qpic.cn/mmbiz_gif/9RM1R8UKDIYY8YKWQb1pQKyM9Im9uPOgYyIMol0VVzwZEAzLB5hENg20iaIqCOXPWCfYmzNHcTOthwgicJgwGN5w/640?wx_fmt=gif&wxfrom=5&wx_lazy=1&tp=webp)

![Image](https://mmbiz.qpic.cn/mmbiz_png/9RM1R8UKDIZQInasUkYQqWXyl395x7ibxgfeJgib8kRqqByw5YdKeictQHpo3BIaC6GYib7a2NoOicvtLEAZ3VibQRBg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œé€‰æ‹©å‰ç«¯æ¡†æ¶å¯èƒ½æ˜¯ä¸€ä¸ªå›°éš¾çš„å†³å®šï¼Œå› ä¸ºæœ‰å¤ªå¤šçš„é€‰æ‹©ã€‚React æ˜¯æœ€å—æ¬¢è¿çš„é€‰æ‹©ä¹‹ä¸€ï¼Œå®ƒå·²ç»å»ºç«‹äº†è‰¯å¥½çš„åŸºç¡€ï¼Œåœ¨ 2022 å¹´çš„ JS çŠ¶æ€è°ƒæŸ¥ä¸­è·å¾—äº† 83% çš„æ»¡æ„åº¦ã€‚ä¸è¿‡ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å…·æœ‰æœ‰è¶£ç‰¹æ€§å’ŒåŠŸèƒ½çš„æ¡†æ¶å€¼å¾—ç ”ç©¶ã€‚

å¦‚æœä½ æœ‰é€‰æ‹©å›°éš¾ç—‡ï¼Œåœ¨ä¸ºä¸‹ä¸€ä¸ªé¡¹ç›®é€‰æ‹©æ¡†æ¶æ—¶ï¼Œå»ºè®®ä½ è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š

-   **æ¡†æ¶æ˜¯å¦å…·æœ‰æˆ‘æ‰€éœ€è¦çš„åŠŸèƒ½ï¼Ÿ**
    
-   **æ¡†æ¶çš„è¿è¡Œé€Ÿåº¦å¦‚ä½•ï¼Œæ˜¯å¦ä¼˜äºå…¶ä»–æ¡†æ¶ï¼Ÿ**
    
-   **æ¡†æ¶çš„æ˜“å­¦æ˜“ç”¨ç¨‹åº¦å¦‚ä½•ï¼Ÿ**
    
-   **æ¡†æ¶çš„ç¤¾åŒºè§„æ¨¡å¦‚ä½•ï¼Ÿ**
    

åœ¨ 2022 å¹´çš„ JS çŠ¶æ€è°ƒæŸ¥ä¸­ï¼ŒLit çš„æ€»ä½“æ»¡æ„åº¦ä¸º 70%ã€‚Lit æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ã€‚

![Image](https://mmbiz.qpic.cn/mmbiz_png/9RM1R8UKDIZQInasUkYQqWXyl395x7ibxiaRPN1pgECnG8PHaZFJTBcY3zKMAFeuhRvY9cFZjqggyYKKreU4e0bQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

åœ¨è°·æ­Œçš„æ”¯æŒä¸‹ï¼ŒLit.jsÂ æ˜¯ç°ä»£Â JavaScript æ¡†æ¶çš„å¿«é€Ÿæ›¿ä»£å“ã€‚å®ƒå»ºç«‹åœ¨WebÂ ComponentsÂ ä¹‹ä¸Šï¼Œåªå ç”¨æå°‘çš„æ¨¡æ¿ç©ºé—´ï¼Œè€Œè¿™æ­£æ˜¯å›°æ‰°ç°ä»£ JavaScript æ¡†æ¶çš„é—®é¢˜æ‰€åœ¨ã€‚

Lit.js ç”± Google æ”¯æŒï¼Œæ˜¯ç°ä»£ JavaScript æ¡†æ¶çš„å¿«é€Ÿæ›¿ä»£å“ã€‚å®ƒå»ºç«‹åœ¨ `Web Components` ä¹‹ä¸Šï¼Œåªå ç”¨æå°‘çš„æ¨¡æ¿ç©ºé—´ï¼Œè€Œè¿™æ­£æ˜¯å›°æ‰°ç°ä»£ JavaScript æ¡†æ¶çš„é—®é¢˜æ‰€åœ¨ã€‚

æœ¬æ–‡é¦–å…ˆå¯¹ Lit åšä¸€ä¸ªåŸºæœ¬çš„ä»‹ç»ï¼Œä»è¯­æ³•ã€æ¨¡ç‰ˆã€ç»„ä»¶ã€hookã€ç”Ÿå‘½å‘¨æœŸç­‰æ–¹é¢ä¸ React åšä¸€ä¸ªå¯¹æ¯”ï¼Œæœ€åè®¨è®ºåœ¨ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸­æ˜¯å¦è¦é€‰æ‹© Litã€‚

-   **Lit åŸºæœ¬ä»‹ç»**
    
-   **Lit ä¸ React å…¨æ–¹ä½å¯¹æ¯”**
    
-   **å¦‚ä½•é€‰æ‹©ï¼Ÿ**
    

## 1.Lit åŸºæœ¬ä»‹ç»

Lit æ˜¯ Google æä¾›çš„ä¸€ç»„å¼€æºåº“ï¼Œå¯å¸®åŠ©å¼€å‘è€…æ„å»ºå¿«é€Ÿã€è½»é‡ä¸”é€‚ç”¨äºä»»ä½•æ¡†æ¶çš„ç»„ä»¶ã€‚å€ŸåŠ© Litï¼Œæ‚¨å¯ä»¥æ„å»ºå¯å…±äº«çš„ç»„ä»¶ã€åº”ç”¨ã€è®¾è®¡ç³»ç»Ÿç­‰ã€‚

Lit ä¸åŒäºå…¶ä»–å‰ç«¯æ¡†æ¶çš„ç‰¹ç‚¹ï¼š

-   LitElement åŸºç±»æ˜¯å¯¹åŸç”Ÿ HTMLElement æ–¹ä¾¿è€Œé€šç”¨çš„æ‰©å±•ã€‚è¯¥ç±»å¯æ‰©å±•ç”¨äºå®šä¹‰è‡ªå·±çš„ç»„ä»¶
    
-   å¯Œæœ‰è¡¨ç°åŠ›ä¸”å£°æ˜å¼çš„æ¨¡æ¿ä½¿å¾—å®šä¹‰ç»„ä»¶çš„æ¸²æŸ“æ–¹å¼å˜å¾—å®¹æ˜“ã€‚
    
-   å“åº”å¼å±æ€§æ˜¯ Lit ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚å½“å“åº”å¼å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚
    
-   ä½œç”¨åŸŸæ ·å¼æœ‰åŠ©äºä¿æŒCSSé€‰æ‹©å™¨çš„ç®€å•æ€§ï¼Œç¡®ä¿ç»„ä»¶æ ·å¼ä¸ä¼šå½±å“å…¶ä»–ä¸Šä¸‹æ–‡ã€‚
    
-   æ”¯æŒåŸç”Ÿ JavaScriptã€TypeScript å’Œäººæ€§åŒ–ï¼ˆè£…é¥°å™¨å’Œç±»å‹å£°æ˜ï¼‰
    

åˆšåˆš Lit å›¢é˜Ÿå‘å¸ƒäº†æœ€æ–°ä¸€ä¸ªå¤§ç‰ˆæœ¬ Lit 3.0ï¼Œå¸¦æ¥äº†ä¸€äº›é‡å¤§å˜åŒ–ï¼š

-   ä¸å†æ”¯æŒ IE11ã€‚
    
-   Litçš„ npm æ¨¡å—ç°å·²å‘å¸ƒä¸º ES2021ã€‚
    
-   åˆ é™¤äº† Lit 2.0 ç‰ˆæœ¬ä¸­åºŸå¼ƒçš„ APIã€‚
    
-   SSR hydrationæ”¯æŒæ¨¡å—å·²ç§»è‡³ `@lit-labs/ssr-client` åŒ…ã€‚
    
-   åœ¨TypeScript å®éªŒæ€§è£…é¥°å™¨å’Œæ ‡å‡†è£…é¥°å™¨ä¹‹é—´ç»Ÿä¸€è£…é¥°å™¨è¡Œä¸ºã€‚
    
-   ä¸å†æ”¯æŒ Babel è£…é¥°å™¨ "2018-09" ç‰ˆæœ¬
    

æ›´å¤šä¿¡æ¯è¯¦è§ï¼š[å‰ç«¯å¿«è®¯ï½œLit 3.0 å·²å‘å¸ƒï¼Œå†è§ IEï¼Œä½ å¥½ TC39 è£…é¥°å™¨ï¼](http://mp.weixin.qq.com/s?__biz=MzI2NjUxODkzOA==&mid=2247484910&idx=1&sn=98e277d7e6a869b14d664944a978ecf1&chksm=ea8dad1bddfa240d5fcd3da08e3c370048ede761374c155fab9221604b00c78f77e9b3d317d2&scene=21#wechat_redirect)

## 2.Lit ä¸ React å¯¹æ¯”

Lit çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŠŸèƒ½åœ¨å¾ˆå¤šæ–¹é¢ä¸ React ç±»ä¼¼ï¼ŒReactè‡ª2013å¹´ä»¥æ¥ä¸€ç›´å­˜åœ¨ï¼Œå¹¶ä¸”æ¯”Litæ›´ä¸ºæµè¡Œï¼ŒLit ä¹Ÿä¸å…¶å­˜åœ¨ä¸€äº›é‡è¦çš„åŒºåˆ«å’Œå·®å¼‚ï¼š

### 2.1.åŒ…çš„ä½“ç§¯

Lit éå¸¸å°ï¼šç»ç¼©å‡å¤§å°å’Œ gzip å‹ç¼©åå¯å‡è‡³ 5kb å·¦å³ï¼Œè€Œ React + ReactDOM çš„å¤§å°è¶…è¿‡ 40kbã€‚

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

### 2.2.æ¸²æŸ“æ€§èƒ½

åœ¨å¯¹ Lit çš„æ¨¡æ¿ç³»ç»Ÿ lit-html ä¸ React çš„ VDOM è¿›è¡Œå¯¹æ¯”çš„å…¬å¼€åŸºå‡†æµ‹è¯•ä¸­ï¼Œlit-html åœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹æ¯” React å¿« 8-10%ï¼Œåœ¨æ¯”è¾ƒå¸¸è§çš„ç”¨ä¾‹ä¸­å¿« 50% ä»¥ä¸Šã€‚

LitElementï¼ˆLit çš„ç»„ä»¶åŸºç±»ï¼‰ç»™ lit-html å¢åŠ çš„å¼€é”€æä½ï¼Œä½†åœ¨å†…å­˜ç”¨é‡ã€äº¤äº’æ—¶é—´å’Œå¯åŠ¨ç”¨æ—¶ç­‰ç»„ä»¶ç‰¹æ€§çš„å¯¹æ¯”ä¸­å´æ¯” React çš„æ€§èƒ½é«˜ 16-30%ã€‚

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

### 2.3.ç¼–è¯‘æ„å»º

å€ŸåŠ©æ–°çš„æµè§ˆå™¨åŠŸèƒ½ï¼ˆä¾‹å¦‚ ES æ¨¡å—å’Œå¸¦æ ‡è®°æ¨¡æ¿å­—é¢é‡ï¼‰ï¼ŒLit ä¸éœ€è¦ç¼–è¯‘å³å¯è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è„šæœ¬æ ‡è®°ã€æµè§ˆå™¨å’ŒæœåŠ¡å™¨è®¾ç½®å¼€å‘ç¯å¢ƒï¼Œç„¶å Lit ä¾¿å¯æ­£å¸¸è¿è¡Œã€‚

å€ŸåŠ© ES æ¨¡å—ä»¥åŠ Skypack æˆ– UNPKG ç­‰ç°ä»£ CDNï¼Œæ‚¨ç”šè‡³æœ‰å¯èƒ½æ— éœ€ NPM å³å¯å¼€å§‹ä½¿ç”¨ Litï¼

ä¸è¿‡ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨ä»å¯æ„å»ºå¹¶ä¼˜åŒ– Lit ä»£ç ï¼ŒLit å°±æ˜¯å¸¸è§„ JavaScriptï¼Œä¸éœ€è¦æ¡†æ¶ä¸“ç”¨çš„ CLIï¼Œä¹Ÿä¸éœ€è¦æ„å»ºå¤„ç†ã€‚

### 2.4.ä¸æ¡†æ¶æ— å…³

Lit çš„ç»„ä»¶ä»¥ä¸€ç»„åä¸º Web Components çš„ç½‘é¡µæ ‡å‡†ä¸ºåŸºç¡€æ„å»ºã€‚è¿™æ„å‘³ç€ï¼Œåœ¨ Lit ä¸­æ„å»ºç»„ä»¶å¯ç¡®ä¿åœ¨å½“å‰å’Œæœªæ¥çš„æ¡†æ¶ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚å¦‚æœå®ƒæ”¯æŒ HTML å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒå°±æ”¯æŒ Web Componentsã€‚

æ¡†æ¶äº’æ“ä½œæ€§æ–¹é¢çš„å”¯ä¸€é—®é¢˜æ˜¯æœ‰äº›æ¡†æ¶å¯¹ DOM çš„æ”¯æŒæœ‰é™åˆ¶ã€‚React å°±æ˜¯å…¶ä¸­ä¸€ç§æ¡†æ¶ï¼Œä¸è¿‡å®ƒé€šè¿‡å¼•ç”¨æä¾›äº†è§£å†³åŠæ³•ï¼Œä½† React ä¸­çš„å¼•ç”¨å¹¶ä¸æ˜¯è®©äººæ„‰å¿«çš„å¼€å‘è€…ä½“éªŒã€‚

Lit 3.0 å‘å¸ƒçš„ `@lit/react` çš„é¡¹ç›®ï¼Œå®ƒä¼šè‡ªåŠ¨è§£ææ‚¨çš„ Lit ç»„ä»¶å¹¶ç”Ÿæˆ React å°è£…å®¹å™¨ï¼Œè®©æ‚¨æ— éœ€ä½¿ç”¨å¼•ç”¨ã€‚

### 2.5.TypeScript æ”¯æŒ

è™½ç„¶æ‚¨å¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™æ‰€æœ‰ Lit ä»£ç ï¼Œä½† Lit æ˜¯ä½¿ç”¨ TypeScript ç¼–å†™çš„ï¼Œè€Œä¸” Lit å›¢é˜Ÿä¹Ÿå»ºè®®å¼€å‘è€…ä½¿ç”¨ TypeScriptï¼

Lit å›¢é˜Ÿä¸€ç›´ä¸ Lit ç¤¾åŒºåˆä½œæ¥å¸®åŠ©ç»´æŠ¤é¡¹ç›®ï¼Œå³ä½¿ç”¨ `lit-analyzer` å’Œ `lit-plugin` åœ¨å¼€å‘ä¸­å’Œæ„å»ºæ—¶å®ç° TypeScript ç±»å‹æ£€æŸ¥å’Œ Lit æ¨¡æ¿æ™ºèƒ½æ„ŸçŸ¥ã€‚

### 2.6.å¼€å‘è€…å·¥å…·å†…ç½®

Lit ç»„ä»¶å°±æ˜¯ DOM ä¸­çš„ HTML å…ƒç´ ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä¸ºäº†æ£€æŸ¥ç»„ä»¶ï¼Œæ‚¨ä¹Ÿä¸éœ€è¦ä¸ºæµè§ˆå™¨å®‰è£…ä»»ä½•å·¥å…·æˆ–æ‰©å±•ç¨‹åºã€‚åªéœ€æ‰“å¼€ `DevTools`ï¼Œé€‰æ‹©æŸä¸ªå…ƒç´ ï¼Œç„¶åæµè§ˆå…¶å±æ€§æˆ–çŠ¶æ€å³å¯ã€‚

### 2.7.æŠ•å…¥äº§å‡ºæ¯”

ä½¿ç”¨ Lit ä¸éœ€è¦å¤§é‡çš„æŠ•å…¥ï¼æ‚¨å¯ä»¥åœ¨ Lit ä¸­æ„å»ºç»„ä»¶å¹¶å°†å…¶æ·»åŠ åˆ°ç°æœ‰é¡¹ç›®ä¸­ã€‚å¦‚æœä¸å–œæ¬¢è¿™äº›ç»„ä»¶ï¼Œé‚£ä¹ˆæ‚¨ä¸å¿…ç«‹åˆ»è½¬æ¢æ•´ä¸ªåº”ç”¨ï¼Œå› ä¸ºç½‘é¡µç»„ä»¶å¯åœ¨å…¶ä»–æ¡†æ¶ä¸­å·¥ä½œï¼

### 2.8.åŠŸèƒ½ç‰¹æ€§

#### 1ï¼‰JSX å’Œæ¨¡æ¿

JSX æ˜¯ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œå…¶åŠŸèƒ½ç±»ä¼¼äºæ¨¡æ¿è¯­è¨€ï¼Œä½†å…·æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½ã€‚React ç”¨æˆ·å¯ä»¥ä½¿ç”¨ JSX åœ¨ JavaScript ä»£ç ä¸­è½»æ¾ç¼–å†™æ¨¡æ¿ã€‚Lit æ¨¡æ¿çš„ä½œç”¨ä¸æ­¤ç±»ä¼¼ï¼Œåªæ˜¯å°†ç»„ä»¶ UI è¡¨è¿°ä¸ºå…¶çŠ¶æ€çš„å‡½æ•°ã€‚

ä¸‹é¢æ˜¯ React ä¸­çš„ JSX æ¨¡æ¿ç¤ºä¾‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">'react'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;ReactDOM&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'react-dom'</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;name&nbsp;=&nbsp;<span data-darkreader-inline-color="">'World'</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;el&nbsp;=&nbsp;(<br>&nbsp;&nbsp;<span><span>&lt;&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">h1</span>&gt;</span>Hello,&nbsp;{name}<span>&lt;/<span data-darkreader-inline-color="">h1</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span>How&nbsp;are&nbsp;you?&nbsp;<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;<span>&lt;/&gt;</span></span><br>);<br>ReactDOM.render(<br>&nbsp;&nbsp;el,<br>&nbsp;&nbsp;mountNode<br>);<br></code>
```

ä¸‹é¢æ˜¯ Lit ä¸­çš„ JSX æ¨¡æ¿ç¤ºä¾‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{html,&nbsp;render}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lit'</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;name&nbsp;=&nbsp;<span data-darkreader-inline-color="">'World'</span>;<br><span data-darkreader-inline-color="">const</span>&nbsp;el&nbsp;=&nbsp;html`<span><br>&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">h1</span>&gt;</span>Hello,&nbsp;</span><span data-darkreader-inline-color="">${name}</span><span><span>&lt;/<span data-darkreader-inline-color="">h1</span>&gt;</span><br>&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span>How&nbsp;are&nbsp;you?<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span>`</span>;<br><br>render(<br>&nbsp;&nbsp;el,<br>&nbsp;&nbsp;mountNode<br>);<br></code>
```

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ï¼ŒLit ä¸éœ€è¦ React ç‰‡æ®µæ¥åœ¨å…¶æ¨¡æ¿ä¸­ç»„åˆå¤šä¸ªå…ƒç´ ã€‚ç›¸åï¼ŒLit æ¨¡æ¿ä½¿ç”¨ HTML æ ‡è®°çš„æ¨¡æ¿å­—é¢è¿›è¡ŒåŒ…è£…ã€‚

### 2ï¼‰ç»„ä»¶å’Œå±æ€§

ç»„ä»¶æ˜¯è‡ªåŒ…å«çš„ã€å¯é‡ç”¨çš„ä»£ç ç‰‡æ®µã€‚å®ƒä»¬æ‰§è¡Œçš„æ“ä½œä¸ JavaScript å‡½æ•°ç›¸åŒï¼Œä½†å®ƒä»¬å¯ä»¥ç‹¬ç«‹å·¥ä½œå¹¶è¿”å› HTMLã€‚React ç»„ä»¶åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ã€‚

**ç±»ç»„ä»¶ï¼š**

Lit ç»„ä»¶çš„ç­‰æ•ˆç‰©æ˜¯ LitElementï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº Lit HTML æ¨¡æ¿ç¼–å†™ç»„ä»¶çš„ç»ä½³æ–¹å¼ã€‚LitElement éµå¾ªé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰èŒƒä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªåŸºç±»ï¼Œå¸®åŠ©æ‚¨ç®¡ç†å…¶å±æ€§å’Œå„ç§å±æ€§APIã€‚

**å‡½æ•°ç»„ä»¶ï¼š**

Lit ä¸ä½¿ç”¨ JSXï¼Œæ‰€ä»¥æ²¡æœ‰ä¸ React å‡½æ•°ç»„ä»¶ä¸€ä¸€å¯¹åº”çš„å¯¹åº”å…³ç³»ã€‚ä½†æ˜¯ï¼Œå¯ä»¥æ›´ç®€å•åœ°ç¼–å†™ä¸€ä¸ªæ¥å—å±æ€§å¹¶æ ¹æ®è¿™äº›å±æ€§æ¸²æŸ“ DOM çš„å‡½æ•°ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ª React å‡½æ•°ç»„ä»¶çš„ç¤ºä¾‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">Welcome</span>(<span>props</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span><span>&lt;<span data-darkreader-inline-color="">h1</span>&gt;</span>Hello,&nbsp;{props.name}<span>&lt;/<span data-darkreader-inline-color="">h1</span>&gt;</span></span>;<br>}<br><br><span data-darkreader-inline-color="">const</span>&nbsp;el&nbsp;=&nbsp;<span>&lt;<span data-darkreader-inline-color="">Welcome</span>&nbsp;<span data-darkreader-inline-color="">name</span>=<span data-darkreader-inline-color="">"World"</span>/&gt;</span><br>ReactDOM.render(<br>&nbsp;&nbsp;el,<br>&nbsp;&nbsp;mountNode<br>);<br></code>
```

ä¸‹é¢æ˜¯ä¸€ä¸ª Lit å‡½æ•°ç»„ä»¶çš„ç¤ºä¾‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{html,&nbsp;render}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lit'</span>;<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">Welcome</span>(<span>props</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;html`<span><span>&lt;<span data-darkreader-inline-color="">h1</span>&gt;</span>Hello,&nbsp;</span><span data-darkreader-inline-color="">${props.name}</span><span><span>&lt;/<span data-darkreader-inline-color="">h1</span>&gt;</span>`</span>;<br>}<br><br>render(<br>&nbsp;&nbsp;Welcome({<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'World}),<br>&nbsp;&nbsp;document.body.querySelector('</span>#root<span data-darkreader-inline-color="">')<br>);<br></span></code>
```

#### 3ï¼‰çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ

`state` æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶æ•°æ®æˆ–ä¿¡æ¯çš„ React å¯¹è±¡ã€‚ç»„ä»¶çš„çŠ¶æ€å¯ä»¥éšæ—¶é—´å˜åŒ–ã€‚æ¯å½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚

Lit çš„å“åº”æ€§å±æ€§æ˜¯ React çŠ¶æ€å’Œå±æ€§çš„ç»“åˆä½“ã€‚å½“å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå“åº”æ€§å±æ€§å¯ä»¥è§¦å‘ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¹¶å¯ä»¥é€‰æ‹©æ€§åœ°è¯»å–æˆ–å†™å…¥å±æ€§ã€‚å“åº”æ€§å±æ€§æœ‰ä¸¤ç§å˜ä½“ï¼š

-   å…¬å…±å“åº”æ€§å±æ€§
    
-   å†…éƒ¨å“åº”çŠ¶æ€
    

Reactä¸­çš„å“åº”æ€§å±æ€§å®ç°å¦‚ä¸‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;React&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'react'</span>;<br><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">React</span>.<span data-darkreader-inline-color="">Component</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">constructor</span>(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">super</span>(props)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.state&nbsp;=&nbsp;{<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'there'</span>}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;componentWillReceiveProps(nextProps)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">this</span>.props.name&nbsp;!==&nbsp;nextProps.name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.setState({<span data-darkreader-inline-color="">name</span>:&nbsp;nextProps.name})<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br></code>
```

Lit çš„å“åº”å¼å±æ€§ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{LitElement}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lit'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{property}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'lit/decorators.js'</span>;<br><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">LitElement</span>&nbsp;</span>{<br>&nbsp;&nbsp;@property()&nbsp;name&nbsp;=&nbsp;<span data-darkreader-inline-color="">'there'</span>;<br>}<br></code>
```

å†…éƒ¨å“åº”çŠ¶æ€æŒ‡çš„æ˜¯ä¸æš´éœ²ç»™ç»„ä»¶å…¬å…± API çš„å“åº”å¼å±æ€§ã€‚è¿™äº›çŠ¶æ€å±æ€§ç¼ºä¹ç›¸åº”çš„å±æ€§ï¼Œå¹¶ä¸”ä¸æ‰“ç®—åœ¨ç»„ä»¶å¤–éƒ¨ä½¿ç”¨ã€‚ç»„ä»¶çš„å†…éƒ¨å“åº”çŠ¶æ€åº”è¯¥ç”±ç»„ä»¶è‡ªèº«ç¡®å®šã€‚

React å’Œ Lit æœ‰ç›¸ä¼¼çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å°è€Œæ˜¾è‘—çš„å·®å¼‚ã€‚è®©æˆ‘ä»¬æ›´ä»”ç»†åœ°çœ‹ä¸€äº›è¿™äº›æ¡†æ¶å…±åŒæ‹¥æœ‰çš„æ–¹æ³•ã€‚

**aï¼‰`constructor`**

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;React</span><br><span data-darkreader-inline-color="">import</span>&nbsp;React&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'react'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;Chart&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'chart.js'</span>;<br><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">React</span>.<span data-darkreader-inline-color="">Component</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">constructor</span>(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">super</span>(props);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.state&nbsp;=&nbsp;{&nbsp;<span data-darkreader-inline-color="">counter</span>:&nbsp;<span data-darkreader-inline-color="">0</span>&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>._privateProp&nbsp;=&nbsp;<span data-darkreader-inline-color="">'private'</span>;<br>&nbsp;&nbsp;}<br>}<br><br><span data-darkreader-inline-color="">//&nbsp;Lit</span><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">LitElement</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">static</span>&nbsp;<span data-darkreader-inline-color="">get</span>&nbsp;properties()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{&nbsp;<span data-darkreader-inline-color="">counter</span>:&nbsp;{<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">Number</span>}&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">constructor</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.counter&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>._privateProp&nbsp;=&nbsp;<span data-darkreader-inline-color="">'private'</span>;<br>&nbsp;&nbsp;}<br>}<br></code>
```

**bï¼‰`render`**

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;React</span><br>render()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span><span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span>Hello&nbsp;World<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span></span><br>}<br><br><span data-darkreader-inline-color="">//&nbsp;Lit</span><br>render()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;html`<span><span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span>Hello&nbsp;World<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span>`</span>;<br>}<br></code>
```

**cï¼‰`componentDidMount` vs `firstUpdated` and `connectedCallback`**

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;React</span><br>componentDidMount()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>._chart&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;Chart(<span data-darkreader-inline-color="">this</span>.chartElRef.current,&nbsp;{...});<br>}<br><br>componentDidMount()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.window.addEventListener(<span data-darkreader-inline-color="">'resize'</span>,&nbsp;<span data-darkreader-inline-color="">this</span>.boundOnResize);<br>}<br><br><span data-darkreader-inline-color="">//&nbsp;Lit</span><br>firstUpdated()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>._chart&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;Chart(<span data-darkreader-inline-color="">this</span>.chartEl,&nbsp;{...});<br>}<br><br>connectedCallback()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">super</span>.connectedCallback();<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.window.addEventListener(<span data-darkreader-inline-color="">'resize'</span>,&nbsp;<span data-darkreader-inline-color="">this</span>.boundOnResize);<br>}<br></code>
```

**dï¼‰`componentWillUnmount` vs `disconnectedCallback`**

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;React</span><br>componentWillUnmount()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.window.removeEventListener(<span data-darkreader-inline-color="">'resize'</span>,&nbsp;<span data-darkreader-inline-color="">this</span>.boundOnResize);<br>}<br><br><span data-darkreader-inline-color="">//&nbsp;Lit</span><br>disconnectedCallback()&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">super</span>.disconnectedCallback();<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.window.removeEventListener(<span data-darkreader-inline-color="">'resize'</span>,&nbsp;<span data-darkreader-inline-color="">this</span>.boundOnResize);<br>}<br></code>
```

#### 4ï¼‰React Hooks vs LitElement

Hooks æ˜¯ä¸€ç§å…è®¸ React å‡½æ•°ç»„ä»¶ â€œè¿æ¥åˆ°â€ React çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸç‰¹æ€§çš„å‡½æ•°ã€‚Hooks ä¸èƒ½åœ¨ç±»ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒä»¬å…è®¸æˆ‘ä»¬åœ¨ä¸ä½¿ç”¨ç±»çš„æƒ…å†µä¸‹ä½¿ç”¨Reactã€‚

ä¸ React ä¸åŒï¼ŒLit ä¸æä¾›ä¸€ç§ä»å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰å…ƒç´ çš„æ–¹å¼ï¼Œä½†æ˜¯ LitElement é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³äº†å¤§å¤šæ•°ä¸Reactç±»ç»„ä»¶çš„ä¸»è¦é—®é¢˜ï¼š

-   åœ¨æ„é€ å‡½æ•°ä¸­ä¸æ¥å—å‚æ•°
    
-   è‡ªåŠ¨ç»‘å®šæ‰€æœ‰@eventç»‘å®šï¼ˆé€šå¸¸æ˜¯åˆ°è‡ªå®šä¹‰å…ƒç´ çš„å¼•ç”¨ï¼‰
    
-   å°†ç±»å±æ€§å®ä¾‹åŒ–ä¸ºç±»æˆå‘˜
    

ä¸‹é¢æ˜¯Hooksåœ¨Reactä¸­çš„ç¤ºä¾‹ï¼ˆåœ¨åˆ›å»ºHooksæ—¶çš„æ—¶é—´ç‚¹ä¸Šï¼‰ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;React&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'react'</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;ReactDOM&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'react-dom'</span>;<br><br><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">React</span>.<span data-darkreader-inline-color="">Component</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">constructor</span>(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">super</span>(props);&nbsp;<span data-darkreader-inline-color="">//&nbsp;Leaky&nbsp;implementation</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.state&nbsp;=&nbsp;{<span data-darkreader-inline-color="">count</span>:&nbsp;<span data-darkreader-inline-color="">0</span>};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>._chart&nbsp;=&nbsp;<span data-darkreader-inline-color="">null</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Deemed&nbsp;messy</span><br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;render()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><span>&lt;&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span>Num&nbsp;times&nbsp;clicked&nbsp;{count}<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">button</span>&nbsp;<span data-darkreader-inline-color="">onClick</span>=<span data-darkreader-inline-color="">{this.clickCallback}</span>&gt;</span>click&nbsp;me<span>&lt;/<span data-darkreader-inline-color="">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;/&gt;</span></span><br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;clickCallback()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Errors&nbsp;because&nbsp;`this`&nbsp;no&nbsp;longer&nbsp;refers&nbsp;to&nbsp;the&nbsp;component</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.setState({<span data-darkreader-inline-color="">count</span>:&nbsp;<span data-darkreader-inline-color="">this</span>.count&nbsp;+&nbsp;<span data-darkreader-inline-color="">1</span>});<br>&nbsp;&nbsp;}<br>}<br></code>
```

å®ç°ç›¸åŒçš„ï¼Œä½¿ç”¨ LitElement:

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyEl</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">LitElement</span>&nbsp;</span>{<br>&nbsp;&nbsp;@property({<span data-darkreader-inline-color="">type</span>:&nbsp;<span data-darkreader-inline-color="">Number</span>})&nbsp;count&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;No&nbsp;need&nbsp;for&nbsp;constructor&nbsp;to&nbsp;set&nbsp;state</span><br>&nbsp;&nbsp;private&nbsp;_chart&nbsp;=&nbsp;<span data-darkreader-inline-color="">null</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Public&nbsp;class&nbsp;fields&nbsp;introduced&nbsp;to&nbsp;JS&nbsp;in&nbsp;2019</span><br><br>&nbsp;&nbsp;render()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;html<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Num&nbsp;times&nbsp;clicked&nbsp;${count}&lt;<span data-darkreader-inline-color="">/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;@click=${this.clickCallback}&gt;click&nbsp;me&lt;/</span>button&gt;<span data-darkreader-inline-color="">`;<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;private&nbsp;clickCallback()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;No&nbsp;error&nbsp;because&nbsp;`</span><span data-darkreader-inline-color="">this</span><span data-darkreader-inline-color="">`&nbsp;refers&nbsp;to&nbsp;component<br>&nbsp;&nbsp;&nbsp;&nbsp;this.count++;<br>&nbsp;&nbsp;}<br>}<br></span></code>
```

#### 5ï¼‰React å’Œ Lit ä¸­çš„ Ref

Refs æ˜¯ React å‡½æ•°ï¼Œå®ƒå…è®¸æˆ‘ä»¬è®¿é—® DOM å…ƒç´ å’Œæˆ‘ä»¬åˆ›å»ºçš„ä»»ä½• React å…ƒç´ ã€‚å½“æˆ‘ä»¬æƒ³åœ¨ä¸ä½¿ç”¨é“å…·çš„æƒ…å†µä¸‹æ›´æ”¹å­ç»„ä»¶çš„å€¼æ—¶ï¼Œå°±ä¼šç”¨åˆ°å®ƒä»¬ã€‚

åœ¨ Lit ä¸­ï¼Œä½¿ç”¨ @query å’Œ @queryAll è£…é¥°å™¨åˆ›å»º refsã€‚è¿™äº›è£…é¥°å™¨å‡ ä¹åˆ†åˆ«ç­‰åŒäº querySelector å’Œ querySelectorAllï¼Œå¹¶ç›´æ¥å‘ˆç°åˆ° DOMã€‚

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;React</span><br><span data-darkreader-inline-color="">const</span>&nbsp;RefsExample&nbsp;=&nbsp;<span>(<span>props</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;inputRef&nbsp;=&nbsp;React.useRef(<span data-darkreader-inline-color="">null</span>);<br>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;onButtonClick&nbsp;=&nbsp;React.useCallback(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;inputRef.current?.focus();<br>&nbsp;},&nbsp;[inputRef]);<br><br>&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;<span><span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">input</span>&nbsp;<span data-darkreader-inline-color="">type</span>=<span data-darkreader-inline-color="">{</span>"<span data-darkreader-inline-color="">text</span>"}&nbsp;<span data-darkreader-inline-color="">ref</span>=<span data-darkreader-inline-color="">{inputRef}</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">br</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">button</span>&nbsp;<span data-darkreader-inline-color="">onClick</span>=<span data-darkreader-inline-color="">{onButtonClick}</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Click&nbsp;to&nbsp;focus&nbsp;on&nbsp;the&nbsp;input&nbsp;above!<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">button</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span></span><br>&nbsp;);<br>};<br><br><br><span data-darkreader-inline-color="">//&nbsp;Lit:&nbsp;ä½¿ç”¨&nbsp;@query&nbsp;è£…é¥°å™¨</span><br>@customElement(<span data-darkreader-inline-color="">"my-element"</span>)<br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyElement</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">LitElement</span>&nbsp;</span>{<br>&nbsp;&nbsp;@query(<span data-darkreader-inline-color="">'input'</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;Define&nbsp;the&nbsp;query</span><br>&nbsp;&nbsp;inputEl!:&nbsp;HTMLInputElement;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Declare&nbsp;the&nbsp;prop</span><br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Declare&nbsp;the&nbsp;click&nbsp;event&nbsp;listener</span><br>&nbsp;&nbsp;onButtonClick()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;Use&nbsp;the&nbsp;query&nbsp;to&nbsp;focus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.inputEl.focus();<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;render()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;html<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=<span data-darkreader-inline-color="">"text"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">br</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Bind&nbsp;the&nbsp;click&nbsp;listener&nbsp;--&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span><span>&lt;<span data-darkreader-inline-color="">button</span>&nbsp;@<span data-darkreader-inline-color="">click</span>=<span data-darkreader-inline-color="">${this.onButtonClick}</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Click&nbsp;to&nbsp;focus&nbsp;on&nbsp;the&nbsp;input&nbsp;above!<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">button</span>&gt;</span></span><br>&nbsp;&nbsp;&nbsp;;<br>&nbsp;&nbsp;}<br>}<br><br></code>
```

## 3.å¦‚ä½•é€‰æ‹©ï¼Ÿ

æ¯ä¸ªæ¡†æ¶éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚Reactæ”¯æ’‘ç€è®¸å¤šå¤§å…¬å¸çš„ç½‘ç»œåº”ç”¨ï¼Œå¦‚Facebookã€Twitterå’ŒAirbnbã€‚å®ƒè¿˜æ‹¥æœ‰åºå¤§çš„å¼€å‘è€…å’Œè´¡çŒ®è€…ç¤¾åŒºã€‚

å¦‚æœä½ ç›®å‰æ­£åœ¨ä½¿ç”¨ React å¹¶å¯¹æ­¤é€‰æ‹©æ„Ÿåˆ°æ»¡æ„ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºæ‚¨æ²¡æœ‰ä»»ä½•ç†ç”±æ”¹ç”¨å…¶ä»–æ¡†æ¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¼€å‘çš„é¡¹ç›®éœ€è¦éå¸¸å¿«çš„æ€§èƒ½ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨ Litã€‚

å¦‚æœä½ åœ¨å…¬å¸å†…éƒ¨é¡¹ç›®æœ‰å®è·µçš„æœºä¼šï¼Œå»ºè®®ä½ è¯•è¯• Litï¼Œä¹Ÿè®¸ä½ ä¼šæ…¢æ…¢å–œæ¬¢ä¸Šå®ƒğŸ˜ï¼