```
<section><mp-common-profile data-pluginname="mpprofile" data-id="MzAxMTMyOTk3MA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/e93fo6YQKNmP3YCibFqeuFenfGuV6cesicX6UicG1VZwLlibogEJmbSRNoSwx8JxuQ06WKJXgz5xyv20jicbGTUbwxw/300?wx_fmt=png&amp;wxfrom=19" data-nickname="React" data-alias="react_native" data-signature="互联网从业者，专注于 React系列精彩内容推荐。关注大前端、Node技术全栈、Flutter、WebAssembly、鸿蒙（harmonyOS）、小程序等互联网科技领域最前沿技术，定期分享个人创业经验。" data-from="0" data-is_biz_ban="0" data-origin_num="50" data-isban="0" data-biz_account_status="0" data-index="0"></mp-common-profile></section><p data-style="outline: 0px; color: rgb(0, 0, 0); font-size: 16px; white-space: normal; font-family: system-ui, -apple-system, &quot;system-ui&quot;, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; letter-spacing: 0.544px; text-align: center; visibility: visible;" data-darkreader-inline-outline="" data-darkreader-inline-color=""><span data-darkreader-inline-outline="" data-darkreader-inline-color="">点击上方&nbsp;</span><span data-darkreader-inline-outline=""><span data-darkreader-inline-outline="" data-darkreader-inline-color="">React</span></span><span data-darkreader-inline-outline="" data-darkreader-inline-color="">，关注公众号</span><span data-darkreader-inline-outline="" data-darkreader-inline-color=""></span></p><p data-style="outline: 0px; color: rgb(34, 34, 34); font-size: 16px; white-space: normal; font-family: system-ui, -apple-system, &quot;system-ui&quot;, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; letter-spacing: 0.544px; text-align: center; word-spacing: 0.8px; visibility: visible;" data-darkreader-inline-outline="" data-darkreader-inline-color=""><span data-darkreader-inline-outline="" data-darkreader-inline-color="">回复</span><span data-style="outline: 0px; color: rgb(0, 0, 0); caret-color: rgb(51, 51, 51); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 14px; letter-spacing: 0.544px; word-spacing: 2px; visibility: visible;" data-darkreader-inline-outline="" data-darkreader-inline-color=""><span data-darkreader-inline-outline="" data-darkreader-inline-color="">加群</span></span><span data-darkreader-inline-outline="" data-darkreader-inline-color="">，加入技术交流群交流</span></p>
```

## 前言

日常开发中，面对各种不同的需求，我们经常会用到以前开发过的一些工具函数，把这些工具函数收集起来，将大大提高我们的开发效率。

## 1、校验数据类型

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;typeOf&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span>obj</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">Object</span>.prototype.toString.call(obj).slice(<span data-darkreader-inline-color="">8</span>,&nbsp;<span data-darkreader-inline-color="">-1</span>).toLowerCase()<br>}<br>复制代码<br>
```

**示例：**

```
typeOf(<span data-darkreader-inline-color="">'树哥'</span>)&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;string</span><br>typeOf([])&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;array</span><br>typeOf(<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Date</span>())&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;date</span><br>typeOf(<span data-darkreader-inline-color="">null</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;null</span><br>typeOf(<span data-darkreader-inline-color="">true</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;boolean</span><br>typeOf(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{&nbsp;})&nbsp;<span data-darkreader-inline-color="">//&nbsp;function</span><br>复制代码<br>
```

## 2、防抖

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;debounce&nbsp;=&nbsp;<span>(<span>(</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;timer&nbsp;=&nbsp;<span data-darkreader-inline-color="">null</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span>(<span>callback,&nbsp;wait&nbsp;=&nbsp;<span data-darkreader-inline-color="">800</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;timer&amp;&amp;clearTimeout(timer)<br>&nbsp;&nbsp;&nbsp;&nbsp;timer&nbsp;=&nbsp;setTimeout(callback,&nbsp;wait)<br>&nbsp;&nbsp;}<br>})()<br>复制代码<br>
```

**示例：**

如 vue 中使用

```
methods:&nbsp;{<br>&nbsp;&nbsp;loadList()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;debounce(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'加载数据'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span data-darkreader-inline-color="">500</span>)<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

## 3、节流

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;throttle&nbsp;=&nbsp;<span>(<span>(</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;last&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span>(<span>callback,&nbsp;wait&nbsp;=&nbsp;<span data-darkreader-inline-color="">800</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;now&nbsp;=&nbsp;+<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Date</span>()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(now&nbsp;-&nbsp;last&nbsp;&gt;&nbsp;wait)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last&nbsp;=&nbsp;now<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>})()<br>复制代码<br>
```

## 4、手机号脱敏

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;hideMobile&nbsp;=&nbsp;<span>(<span>mobile</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;mobile.replace(<span data-darkreader-inline-color="">/^(\d{3})\d{4}(\d{4})$/</span>,&nbsp;<span data-darkreader-inline-color="">"$1****$2"</span>)<br>}<br>复制代码<br>
```

## 5、开启全屏

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;launchFullscreen&nbsp;=&nbsp;<span>(<span>element</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(element.requestFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;element.requestFullscreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(element.mozRequestFullScreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;element.mozRequestFullScreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(element.msRequestFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;element.msRequestFullscreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(element.webkitRequestFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;element.webkitRequestFullScreen()<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

## 6、关闭全屏

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;exitFullscreen&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">document</span>.exitFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.exitFullscreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">document</span>.msExitFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.msExitFullscreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">document</span>.mozCancelFullScreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.mozCancelFullScreen()<br>&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">document</span>.webkitExitFullscreen)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.webkitExitFullscreen()<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

## 7、大小写转换

**参数：**

-   str 待转换的字符串
    
-   type 1-全大写 2-全小写 3-首字母大写
    

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;turnCase&nbsp;=&nbsp;<span>(<span>str,&nbsp;type</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">switch</span>&nbsp;(type)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">1</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;str.toUpperCase()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">2</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;str.toLowerCase()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">3</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//return&nbsp;str[0].toUpperCase()&nbsp;+&nbsp;str.substr(1).toLowerCase()&nbsp;//&nbsp;substr&nbsp;已不推荐使用</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;str[<span data-darkreader-inline-color="">0</span>].toUpperCase()&nbsp;+&nbsp;str.substring(<span data-darkreader-inline-color="">1</span>).toLowerCase()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">default</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;str<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

**示例：**

```
turnCase(<span data-darkreader-inline-color="">'vue'</span>,&nbsp;<span data-darkreader-inline-color="">1</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;VUE</span><br>turnCase(<span data-darkreader-inline-color="">'REACT'</span>,&nbsp;<span data-darkreader-inline-color="">2</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;react</span><br>turnCase(<span data-darkreader-inline-color="">'vue'</span>,&nbsp;<span data-darkreader-inline-color="">3</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;Vue</span><br>复制代码<br>
```

## 8、解析URL参数

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;getSearchParams&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;searchPar&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;URLSearchParams(<span data-darkreader-inline-color="">window</span>.location.search)<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;paramsObj&nbsp;=&nbsp;{}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;(<span data-darkreader-inline-color="">const</span>&nbsp;[key,&nbsp;value]&nbsp;<span data-darkreader-inline-color="">of</span>&nbsp;searchPar.entries())&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;paramsObj[key]&nbsp;=&nbsp;value<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;paramsObj<br>}<br>复制代码<br>
```

**示例：**

```
<span data-darkreader-inline-color="">//&nbsp;假设目前位于&nbsp;https://****com/index?id=154513&amp;age=18;</span><br>getSearchParams();&nbsp;<span data-darkreader-inline-color="">//&nbsp;{id:&nbsp;"154513",&nbsp;age:&nbsp;"18"}</span><br>复制代码<br>
```

## 9、判断手机是Andoird还是IOS

```
<span data-darkreader-inline-color="">/**&nbsp;<br>&nbsp;*&nbsp;1:&nbsp;ios<br>&nbsp;*&nbsp;2:&nbsp;android<br>&nbsp;*&nbsp;3:&nbsp;其它<br>&nbsp;*/</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;getOSType=<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;u&nbsp;=&nbsp;navigator.userAgent,&nbsp;app&nbsp;=&nbsp;navigator.appVersion;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;isAndroid&nbsp;=&nbsp;u.indexOf(<span data-darkreader-inline-color="">'Android'</span>)&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">-1</span>&nbsp;||&nbsp;u.indexOf(<span data-darkreader-inline-color="">'Linux'</span>)&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">-1</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;isIOS&nbsp;=&nbsp;!!u.match(<span data-darkreader-inline-color="">/\(i[^;]+;(&nbsp;U;)?&nbsp;CPU.+Mac&nbsp;OS&nbsp;X/</span>);<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isIOS)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">1</span>;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isAndroid)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">2</span>;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">3</span>;<br>}<br>复制代码<br>
```

## 10、数组对象根据字段去重

**参数：**

-   arr 要去重的数组
    
-   key 根据去重的字段名
    

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;uniqueArrayObject&nbsp;=&nbsp;<span>(<span>arr&nbsp;=&nbsp;[],&nbsp;key&nbsp;=&nbsp;<span data-darkreader-inline-color="">'id'</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(arr.length&nbsp;===&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;<span data-darkreader-inline-color="">return</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;list&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;map&nbsp;=&nbsp;{}<br>&nbsp;&nbsp;arr.forEach(<span>(<span>item</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(!map[item[key]])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map[item[key]]&nbsp;=&nbsp;item<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br>&nbsp;&nbsp;list&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.values(map)<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;list<br>}<br>复制代码<br>
```

**示例：**

```
<span data-darkreader-inline-color="">const</span>&nbsp;responseList&nbsp;=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'树哥'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'黄老爷'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'张麻子'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'黄老爷'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'张麻子'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'树哥'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'树哥'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'黄老爷'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'张麻子'</span>&nbsp;},<br>]<br><br>uniqueArrayObject(responseList,&nbsp;<span data-darkreader-inline-color="">'id'</span>)<br><span data-darkreader-inline-color="">//&nbsp;[{&nbsp;id:&nbsp;1,&nbsp;name:&nbsp;'树哥'&nbsp;},{&nbsp;id:&nbsp;2,&nbsp;name:&nbsp;'黄老爷'&nbsp;},{&nbsp;id:&nbsp;3,&nbsp;name:&nbsp;'张麻子'&nbsp;}]</span><br>复制代码<br>
```

## 11、滚动到页面顶部

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;scrollToTop&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;height&nbsp;=&nbsp;<span data-darkreader-inline-color="">document</span>.documentElement.scrollTop&nbsp;||&nbsp;<span data-darkreader-inline-color="">document</span>.body.scrollTop;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(height&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">window</span>.requestAnimationFrame(scrollToTop);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">window</span>.scrollTo(<span data-darkreader-inline-color="">0</span>,&nbsp;height&nbsp;-&nbsp;height&nbsp;/&nbsp;<span data-darkreader-inline-color="">8</span>);<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

## 12、滚动到元素位置

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;smoothScroll&nbsp;=&nbsp;<span><span>element</span>&nbsp;=&gt;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.querySelector(element).scrollIntoView({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">behavior</span>:&nbsp;<span data-darkreader-inline-color="">'smooth'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>};<br>复制代码<br>
```

**示例：**

```
smoothScroll(<span data-darkreader-inline-color="">'#target'</span>);&nbsp;<span data-darkreader-inline-color="">//&nbsp;平滑滚动到&nbsp;ID&nbsp;为&nbsp;target&nbsp;的元素</span><br>复制代码<br>
```

## 13、uuid

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;uuid&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;temp_url&nbsp;=&nbsp;URL.createObjectURL(<span data-darkreader-inline-color="">new</span>&nbsp;Blob())<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;uuid&nbsp;=&nbsp;temp_url.toString()<br>&nbsp;&nbsp;URL.revokeObjectURL(temp_url)&nbsp;<span data-darkreader-inline-color="">//释放这个url</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;uuid.substring(uuid.lastIndexOf(<span data-darkreader-inline-color="">'/'</span>)&nbsp;+&nbsp;<span data-darkreader-inline-color="">1</span>)<br>}<br>复制代码<br>
```

**示例：**

```
uuid()&nbsp;<span data-darkreader-inline-color="">//&nbsp;a640be34-689f-4b98-be77-e3972f9bffdd</span><br>复制代码<br>
```

> 不过要吐槽一句的是，uuid一般应由后端来进行生成

## 14、金额格式化

**参数：**

-   {number} number：要格式化的数字
    
-   {number} decimals：保留几位小数
    
-   {string} dec\_point：小数点符号
    
-   {string} thousands\_sep：千分位符号
    

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;moneyFormat&nbsp;=&nbsp;<span>(<span>number,&nbsp;decimals,&nbsp;dec_point,&nbsp;thousands_sep</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;number&nbsp;=&nbsp;(number&nbsp;+&nbsp;<span data-darkreader-inline-color="">''</span>).replace(<span data-darkreader-inline-color="">/[^0-9+-Ee.]/g</span>,&nbsp;<span data-darkreader-inline-color="">''</span>)<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;n&nbsp;=&nbsp;!<span data-darkreader-inline-color="">isFinite</span>(+number)&nbsp;?&nbsp;<span data-darkreader-inline-color="">0</span>&nbsp;:&nbsp;+number<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;prec&nbsp;=&nbsp;!<span data-darkreader-inline-color="">isFinite</span>(+decimals)&nbsp;?&nbsp;<span data-darkreader-inline-color="">2</span>&nbsp;:&nbsp;<span data-darkreader-inline-color="">Math</span>.abs(decimals)<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;sep&nbsp;=&nbsp;<span data-darkreader-inline-color="">typeof</span>&nbsp;thousands_sep&nbsp;===&nbsp;<span data-darkreader-inline-color="">'undefined'</span>&nbsp;?&nbsp;<span data-darkreader-inline-color="">','</span>&nbsp;:&nbsp;thousands_sep<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;dec&nbsp;=&nbsp;<span data-darkreader-inline-color="">typeof</span>&nbsp;dec_point&nbsp;===&nbsp;<span data-darkreader-inline-color="">'undefined'</span>&nbsp;?&nbsp;<span data-darkreader-inline-color="">'.'</span>&nbsp;:&nbsp;dec_point<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;s&nbsp;=&nbsp;<span data-darkreader-inline-color="">''</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;toFixedFix&nbsp;=&nbsp;<span><span data-darkreader-inline-color="">function</span>(<span>n,&nbsp;prec</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;k&nbsp;=&nbsp;<span data-darkreader-inline-color="">Math</span>.pow(<span data-darkreader-inline-color="">10</span>,&nbsp;prec)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">''</span>&nbsp;+&nbsp;<span data-darkreader-inline-color="">Math</span>.ceil(n&nbsp;*&nbsp;k)&nbsp;/&nbsp;k<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;s&nbsp;=&nbsp;(prec&nbsp;?&nbsp;toFixedFix(n,&nbsp;prec)&nbsp;:&nbsp;<span data-darkreader-inline-color="">''</span>&nbsp;+&nbsp;<span data-darkreader-inline-color="">Math</span>.round(n)).split(<span data-darkreader-inline-color="">'.'</span>)<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;re&nbsp;=&nbsp;<span data-darkreader-inline-color="">/(-?\d+)(\d{3})/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">while</span>&nbsp;(re.test(s[<span data-darkreader-inline-color="">0</span>]))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;s[<span data-darkreader-inline-color="">0</span>]&nbsp;=&nbsp;s[<span data-darkreader-inline-color="">0</span>].replace(re,&nbsp;<span data-darkreader-inline-color="">'$1'</span>&nbsp;+&nbsp;sep&nbsp;+&nbsp;<span data-darkreader-inline-color="">'$2'</span>)<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;((s[<span data-darkreader-inline-color="">1</span>]&nbsp;||&nbsp;<span data-darkreader-inline-color="">''</span>).length&nbsp;&lt;&nbsp;prec)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;s[<span data-darkreader-inline-color="">1</span>]&nbsp;=&nbsp;s[<span data-darkreader-inline-color="">1</span>]&nbsp;||&nbsp;<span data-darkreader-inline-color="">''</span><br>&nbsp;&nbsp;&nbsp;&nbsp;s[<span data-darkreader-inline-color="">1</span>]&nbsp;+=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Array</span>(prec&nbsp;-&nbsp;s[<span data-darkreader-inline-color="">1</span>].length&nbsp;+&nbsp;<span data-darkreader-inline-color="">1</span>).join(<span data-darkreader-inline-color="">'0'</span>)<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;s.join(dec)<br>}<br>复制代码<br>
```

**示例：**

```
moneyFormat(<span data-darkreader-inline-color="">10000000</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;10,000,000.00</span><br>moneyFormat(<span data-darkreader-inline-color="">10000000</span>,&nbsp;<span data-darkreader-inline-color="">3</span>,&nbsp;<span data-darkreader-inline-color="">'.'</span>,&nbsp;<span data-darkreader-inline-color="">'-'</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;10-000-000.000</span><br>复制代码<br>
```

## 15、存储操作

```
<span><span data-darkreader-inline-color="">class</span>&nbsp;<span data-darkreader-inline-color="">MyCache</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">constructor</span>(isLocal&nbsp;=&nbsp;true)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.storage&nbsp;=&nbsp;isLocal&nbsp;?&nbsp;localStorage&nbsp;:&nbsp;sessionStorage<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;setItem(key,&nbsp;value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">typeof</span>&nbsp;(value)&nbsp;===&nbsp;<span data-darkreader-inline-color="">'object'</span>)&nbsp;value&nbsp;=&nbsp;<span data-darkreader-inline-color="">JSON</span>.stringify(value)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.storage.setItem(key,&nbsp;value)<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;getItem(key)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">try</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">JSON</span>.parse(<span data-darkreader-inline-color="">this</span>.storage.getItem(key))<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">catch</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">this</span>.storage.getItem(key)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;removeItem(key)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.storage.removeItem(key)<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;clear()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">this</span>.storage.clear()<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;key(index)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">this</span>.storage.key(index)<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;length()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">this</span>.storage.length<br>&nbsp;&nbsp;}<br>}<br><br><span data-darkreader-inline-color="">const</span>&nbsp;localCache&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;MyCache()<br><span data-darkreader-inline-color="">const</span>&nbsp;sessionCache&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;MyCache(<span data-darkreader-inline-color="">false</span>)<br><br><span data-darkreader-inline-color="">export</span>&nbsp;{&nbsp;localCache,&nbsp;sessionCache&nbsp;}<br>复制代码<br>
```

**示例：**

```
localCache.getItem(<span data-darkreader-inline-color="">'user'</span>)<br>sessionCache.setItem(<span data-darkreader-inline-color="">'name'</span>,<span data-darkreader-inline-color="">'树哥'</span>)<br>sessionCache.getItem(<span data-darkreader-inline-color="">'token'</span>)<br>localCache.clear()<br>复制代码<br>
```

## 16、下载文件

**参数：**

-   api 接口
    
-   params 请求参数
    
-   fileName 文件名
    

```
<span data-darkreader-inline-color="">const</span>&nbsp;downloadFile&nbsp;=&nbsp;<span>(<span>api,&nbsp;params,&nbsp;fileName,&nbsp;type&nbsp;=&nbsp;<span data-darkreader-inline-color="">'get'</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;axios({<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">method</span>:&nbsp;type,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">url</span>:&nbsp;api,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">responseType</span>:&nbsp;<span data-darkreader-inline-color="">'blob'</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">params</span>:&nbsp;params<br>&nbsp;&nbsp;}).then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;str&nbsp;=&nbsp;res.headers[<span data-darkreader-inline-color="">'content-disposition'</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(!res&nbsp;||&nbsp;!str)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;suffix&nbsp;=&nbsp;<span data-darkreader-inline-color="">''</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;截取文件名和文件类型</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(str.lastIndexOf(<span data-darkreader-inline-color="">'.'</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName&nbsp;?&nbsp;<span data-darkreader-inline-color="">''</span>&nbsp;:&nbsp;fileName&nbsp;=&nbsp;<span data-darkreader-inline-color="">decodeURI</span>(str.substring(str.indexOf(<span data-darkreader-inline-color="">'='</span>)&nbsp;+&nbsp;<span data-darkreader-inline-color="">1</span>,&nbsp;str.lastIndexOf(<span data-darkreader-inline-color="">'.'</span>)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suffix&nbsp;=&nbsp;str.substring(str.lastIndexOf(<span data-darkreader-inline-color="">'.'</span>),&nbsp;str.length)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;如果支持微软的文件下载方式(ie10+浏览器)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">window</span>.navigator.msSaveBlob)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">try</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;blobObject&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;Blob([res.data]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">window</span>.navigator.msSaveBlob(blobObject,&nbsp;fileName&nbsp;+&nbsp;suffix);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">catch</span>&nbsp;(e)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(e);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;其他浏览器</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;url&nbsp;=&nbsp;<span data-darkreader-inline-color="">window</span>.URL.createObjectURL(res.data)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;link&nbsp;=&nbsp;<span data-darkreader-inline-color="">document</span>.createElement(<span data-darkreader-inline-color="">'a'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link.style.display&nbsp;=&nbsp;<span data-darkreader-inline-color="">'none'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link.href&nbsp;=&nbsp;url<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link.setAttribute(<span data-darkreader-inline-color="">'download'</span>,&nbsp;fileName&nbsp;+&nbsp;suffix)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.body.appendChild(link)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;link.click()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">document</span>.body.removeChild(link)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">window</span>.URL.revokeObjectURL(link.href);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}).catch(<span>(<span>err</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(err.message);<br>&nbsp;&nbsp;})<br>}<span data-darkreader-inline-color="">`<br>复制代码<br></span>
```

**使用：**

```
downloadFile(<span data-darkreader-inline-color="">'/api/download'</span>,&nbsp;{id},&nbsp;<span data-darkreader-inline-color="">'文件名'</span>)<br>复制代码<br>
```

## 17、时间操作

关于时间操作，没必要自己再写一大串代码了，强烈推荐使用 day.js<sup data-darkreader-inline-color="">[2]</sup>

> Day.js 是一个仅 2kb 大小的轻量级 JavaScript 时间日期处理库，下载、解析和执行的JavaScript更少，为代码留下更多的时间。

## 18、深拷贝

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;clone&nbsp;=&nbsp;<span><span>parent</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;判断类型</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;isType&nbsp;=&nbsp;<span>(<span>obj,&nbsp;type</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">typeof</span>&nbsp;obj&nbsp;!==&nbsp;<span data-darkreader-inline-color="">"object"</span>)&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;typeString&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.prototype.toString.call(obj);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;flag;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">switch</span>&nbsp;(type)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">"Array"</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;typeString&nbsp;===&nbsp;<span data-darkreader-inline-color="">"[object&nbsp;Array]"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">"Date"</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;typeString&nbsp;===&nbsp;<span data-darkreader-inline-color="">"[object&nbsp;Date]"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">case</span>&nbsp;<span data-darkreader-inline-color="">"RegExp"</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;typeString&nbsp;===&nbsp;<span data-darkreader-inline-color="">"[object&nbsp;RegExp]"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">default</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;flag;<br>&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;处理正则</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;getRegExp&nbsp;=&nbsp;<span><span>re</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">var</span>&nbsp;flags&nbsp;=&nbsp;<span data-darkreader-inline-color="">""</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(re.global)&nbsp;flags&nbsp;+=&nbsp;<span data-darkreader-inline-color="">"g"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(re.ignoreCase)&nbsp;flags&nbsp;+=&nbsp;<span data-darkreader-inline-color="">"i"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(re.multiline)&nbsp;flags&nbsp;+=&nbsp;<span data-darkreader-inline-color="">"m"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;flags;<br>&nbsp;&nbsp;};<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;维护两个储存循环引用的数组</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;parents&nbsp;=&nbsp;[];<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;children&nbsp;=&nbsp;[];<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;_clone&nbsp;=&nbsp;<span><span>parent</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(parent&nbsp;===&nbsp;<span data-darkreader-inline-color="">null</span>)&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">null</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">typeof</span>&nbsp;parent&nbsp;!==&nbsp;<span data-darkreader-inline-color="">"object"</span>)&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;parent;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;child,&nbsp;proto;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isType(parent,&nbsp;<span data-darkreader-inline-color="">"Array"</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;对数组做特殊处理</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child&nbsp;=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isType(parent,&nbsp;<span data-darkreader-inline-color="">"RegExp"</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;对正则对象做特殊处理</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">RegExp</span>(parent.source,&nbsp;getRegExp(parent));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(parent.lastIndex)&nbsp;child.lastIndex&nbsp;=&nbsp;parent.lastIndex;<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isType(parent,&nbsp;<span data-darkreader-inline-color="">"Date"</span>))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;对Date对象做特殊处理</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Date</span>(parent.getTime());<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;处理对象原型</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proto&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.getPrototypeOf(parent);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;利用Object.create切断原型链</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.create(proto);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;处理循环引用</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;index&nbsp;=&nbsp;parents.indexOf(parent);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(index&nbsp;!=&nbsp;<span data-darkreader-inline-color="">-1</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;如果父数组存在本对象,说明之前已经被引用过,直接返回此对象</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;children[index];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;parents.push(parent);<br>&nbsp;&nbsp;&nbsp;&nbsp;children.push(child);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;(<span data-darkreader-inline-color="">let</span>&nbsp;i&nbsp;<span data-darkreader-inline-color="">in</span>&nbsp;parent)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;递归</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child[i]&nbsp;=&nbsp;_clone(parent[i]);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;child;<br>&nbsp;&nbsp;};<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;_clone(parent);<br>};<br><br>复制代码<br>
```

> 此方法存在一定局限性：一些特殊情况没有处理: 例如Buffer对象、Promise、Set、Map。

**如果确实想要完备的深拷贝，推荐使用 lodash 中的 cloneDeep 方法。**

## 19、模糊搜索

**参数：**

-   list 原数组
    
-   keyWord 查询的关键词
    
-   attribute 数组需要检索属性
    

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;fuzzyQuery&nbsp;=&nbsp;<span>(<span>list,&nbsp;keyWord,&nbsp;attribute&nbsp;=&nbsp;<span data-darkreader-inline-color="">'name'</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;reg&nbsp;=&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">RegExp</span>(keyWord)<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;arr&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;(<span data-darkreader-inline-color="">let</span>&nbsp;i&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;&nbsp;i&nbsp;&lt;&nbsp;list.length;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(reg.test(list[i][attribute]))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr.push(list[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;arr<br>}<br>复制代码<br>
```

**示例：**

```
<span data-darkreader-inline-color="">const</span>&nbsp;list&nbsp;=&nbsp;[<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'树哥'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'黄老爷'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'张麻子'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">4</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'汤师爷'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">5</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'胡万'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">6</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'花姐'</span>&nbsp;},<br>&nbsp;&nbsp;{&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">7</span>,&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'小梅'</span>&nbsp;}<br>]<br>fuzzyQuery(list,&nbsp;<span data-darkreader-inline-color="">'树'</span>,&nbsp;<span data-darkreader-inline-color="">'name'</span>)&nbsp;<span data-darkreader-inline-color="">//&nbsp;[{id:&nbsp;1,&nbsp;name:&nbsp;'树哥'}]</span><br>复制代码<br>
```

## 20、遍历树节点

```
<span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;foreachTree&nbsp;=&nbsp;<span>(<span>data,&nbsp;callback,&nbsp;childrenName&nbsp;=&nbsp;<span data-darkreader-inline-color="">'children'</span></span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">for</span>&nbsp;(<span data-darkreader-inline-color="">let</span>&nbsp;i&nbsp;=&nbsp;<span data-darkreader-inline-color="">0</span>;&nbsp;i&nbsp;&lt;&nbsp;data.length;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;callback(data[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(data[i][childrenName]&nbsp;&amp;&amp;&nbsp;data[i][childrenName].length&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreachTree(data[i][childrenName],&nbsp;callback,&nbsp;childrenName)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br>复制代码<br>
```

**示例：**

假设我们要从树状结构数据中查找 id 为 9 的节点

```
<span data-darkreader-inline-color="">const</span>&nbsp;treeData&nbsp;=&nbsp;[{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'一级&nbsp;1'</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">children</span>:&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">4</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'二级&nbsp;1-1'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">children</span>:&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">9</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'三级&nbsp;1-1-1'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">10</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'三级&nbsp;1-1-2'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}]<br>&nbsp;&nbsp;}]<br>&nbsp;},&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'一级&nbsp;2'</span>,<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">children</span>:&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">5</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'二级&nbsp;2-1'</span><br>&nbsp;&nbsp;},&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">6</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'二级&nbsp;2-2'</span><br>&nbsp;&nbsp;}]<br>&nbsp;&nbsp;},&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'一级&nbsp;3'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">children</span>:&nbsp;[{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">7</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'二级&nbsp;3-1'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">id</span>:&nbsp;<span data-darkreader-inline-color="">8</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;<span data-darkreader-inline-color="">'二级&nbsp;3-2'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}]<br>}],<br><br><span data-darkreader-inline-color="">let</span>&nbsp;result<br>foreachTree(data,&nbsp;(item)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(item.id&nbsp;===&nbsp;<span data-darkreader-inline-color="">9</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;item<br>&nbsp;&nbsp;}<br>})<br><span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">'result'</span>,&nbsp;result)&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;{id:&nbsp;9,label:&nbsp;"三级&nbsp;1-1-1"}&nbsp;&nbsp;&nbsp;</span><br>复制代码
```

\---END---

来自：掘金，作者：呛再首

链接：https://juejin.cn/post/7132714583399071758

欢迎关注「React」

号内回复

 "精选" ，将为您推送 历史精选文章"react" ，将为您推送 React.js 相关的学习资料 "学习指南" ，将为您推送 React-Native学习指南 "vue" ，将为您推送vue.js 相关文章 "小程序" ，将为您推送小程序相关文章 "微信小商店"，将为您推送小程序相关文章 "加群" ，添加群主好友拉你进群

加我私人微信，拉你进 React进阶、面试交流群，互相监督学习进步等！

![Image](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

“在看和转发”就是最大的支持