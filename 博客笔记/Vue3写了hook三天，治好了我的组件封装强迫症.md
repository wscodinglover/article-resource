å¤§å‚æŠ€æœ¯Â Â é«˜çº§å‰ç«¯Â Â Nodeè¿›é˜¶

ç‚¹å‡»ä¸Šæ–¹Â ç¨‹åºå‘˜æˆé•¿æŒ‡åŒ—ï¼Œå…³æ³¨å…¬ä¼—å·

å›å¤1ï¼ŒåŠ å…¥é«˜çº§Nodeäº¤æµç¾¤

> ä½œè€…ï¼šèƒŒå¯¹ç–¾é£
> 
> åŸæ–‡ï¼šhttps://juejin.cn/post/7181712900094951483

æˆ‘ä»¥å‰å¾ˆå–œæ¬¢å°è£…ç»„ä»¶ï¼Œä»€ä¹ˆä¸œè¥¿ä¸å–œæ¬¢åˆ«äººçš„ï¼Œæ€»å–œæ¬¢è‡ªå·±ææï¼Œè¿™è®©äººå¾ˆæœ‰æˆå°±æ„Ÿï¼Œè™½ç„¶æ˜¯é‡å¤é€ è½®å­ï¼Œä½†æ˜¯èƒ½ä»æ— èŠçš„crudä¸šåŠ¡ä¸­æš‚æ—¶è§£è„±å‡ºæ¥ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿç®—æ˜¯ä¸€ç§ä¼‘æ¯ï¼Œç›¸ä¿¡æœ‰å¾ˆå¤šäººè·Ÿæˆ‘ä¸€æ ·æœ‰è¿™ä¸ªä¹ æƒ¯ã€‚Â 

è¿™ç§ä¹ æƒ¯åœ¨ç‹¬ç«‹å¼€å‘æ—¶æ— æ‰€è°“ï¼Œæ¯•ç«Ÿæ²¡äººä¼šå…³å¿ƒä½ å’‹å®ç°çš„ï¼Œä½†æ˜¯åœ¨è·Ÿäººåˆä½œæ—¶å°±ç»™åˆ«äººé€ æˆäº†å¾ˆå¤§çš„å›°æ‰°äº†ï¼Œæ¯•ç«Ÿæ¯ä¸ªäººå°è£…çš„ä¸œè¥¿éƒ½æ˜¯æ ¹æ®è‡ªå·±ä¹ æƒ¯æ¥çš„ï¼Œåˆ«äººçœ‹ç€å¤šå°‘ä¼šæœ‰ç‚¹ä¸é¡ºçœ¼ï¼Œè€Œä¸”è‡ªå·±å°è£…çš„ç»„ä»¶å¤§æ¦‚ç‡ä¹Ÿæ˜¯æ²¡æœ‰å†™æ–‡æ¡£å’Œæ³¨é‡Šçš„ï¼Œæ‰€ä»¥é¡¹ç›®å…¶ä»–æˆå‘˜çš„ä½¿ç”¨ç‡ä¹Ÿä¸ä¼šå¤ªé«˜ï¼Œæ‰€ä»¥ä»Šå¤©ï¼Œæˆ‘è¯•ç€è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦å¤–ï¼Œæˆ‘è¿˜åœ¨ä¸€äº›ç¾¤é‡Œçœ‹åˆ°æœ‰äººæŠ±æ€¨vue3ä¸å¦‚vue2å¥½ç”¨ï¼Œä¸»è¦æ˜¯é€‚åº”ä¸äº†setupå†™æ³•ï¼Œå¸Œæœ›è¿™ç¯‡åšå®¢èƒ½æ”¹å˜ä½ çš„çœ‹æ³•ã€‚

## æ€ä¹ˆç”¨hookæ”¹é€ æˆ‘çš„ç»„ä»¶

å…³äºhookæ˜¯ä»€ä¹ˆä¹‹ç±»çš„ä»‹ç»ï¼Œæˆ‘è¿™å°±ä¸èµ˜è¿°äº†ï¼Œè¯·çœ‹è¿™ç¯‡æ–‡ç« æµ…è°ˆï¼šä¸ºå•¥vueå’Œreactéƒ½é€‰æ‹©äº†HooksğŸ‚ï¼Ÿ<sup data-darkreader-inline-color="">[1]</sup>ã€‚å‰è¨€ä¸­è¯´åˆ°é‡å¤é€ è½®å­çš„ç»„ä»¶ï¼Œé™¤å¼€ä¸€äº›æ¯«æ— å¿…è¦çš„é‡å¤ä»¥å¤–ï¼Œæœ‰ä¸€äº›åŠŸèƒ½ç»„ä»¶ç¡®å®éœ€è¦å°è£…ä¸€ä¸‹ï¼Œæ¯”å¦‚è¯´ï¼Œä¸€äº›éœ€è¦è¯·æ±‚åç«¯å­—å…¸åˆ°å‰ç«¯å±•ç¤ºçš„ä¸‹æ¥é€‰æ‹©æ¡†ï¼Œç‚¹å‡»ä¹‹åè¦å±•ç¤ºloadingçŠ¶æ€çš„æŒ‰é’®ï¼Œå¸¦æœ‰æŸ¥è¯¢æ¡ä»¶çš„è¡¨å•ï¼Œè¿™äº›éå¸¸å¸¸ç”¨çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è£…æˆç»„ä»¶ï¼Œä½†æ˜¯å°è£…æˆç»„ä»¶å°±ä¼šé‡åˆ°å‰é¢è¯´çš„é—®é¢˜ï¼Œæ¯ä¸ªäººçš„ä½¿ç”¨ä¹ æƒ¯å’Œå°è£…ä¹ æƒ¯ä¸ä¸€æ ·ï¼Œå¾ˆéš¾è®©æ¯ä¸ªäººéƒ½æ»¡æ„ï¼Œè¿™ç§åœºæ™¯ï¼Œå°±å¯ä»¥è®©hookæ¥è§£å†³ã€‚

#### æ™®é€šå®ç°

å°±æ‹¿å­—å…¸é€‰æ‹©ä¸‹æ‹‰æ¡†æ¥è¯´ï¼Œå¦‚æœä¸åšå°è£…ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·å†™çš„ ï¼ˆè¿™é‡Œæ‹¿ant-design-vueç»„ä»¶åº“æ¥åšç¤ºä¾‹ï¼‰

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span>&lt;<span data-darkreader-inline-color="">script</span>&nbsp;<span data-darkreader-inline-color="">setup</span>&nbsp;<span data-darkreader-inline-color="">name</span>=<span data-darkreader-inline-color="">"DDemo"</span>&nbsp;<span data-darkreader-inline-color="">lang</span>=<span data-darkreader-inline-color="">"ts"</span>&gt;</span><span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;onMounted,&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'vue'</span>;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;&nbsp;æ¨¡æ‹Ÿè°ƒç”¨æ¥å£</span><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">getRemoteData</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;any[]&gt;<span>(<span>(resolve</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'è‹¹æœ'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'é¦™è•‰'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'æ©˜å­'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span data-darkreader-inline-color="">3000</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;optionsArr&nbsp;=&nbsp;ref&lt;any[]&gt;([]);<br><br>&nbsp;&nbsp;onMounted(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;getRemoteData().then(<span>(<span>data</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optionsArr.value&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;});<br></span><span>&lt;/<span data-darkreader-inline-color="">script</span>&gt;</span><br><br><span>&lt;<span data-darkreader-inline-color="">template</span>&gt;</span><br>&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">a-select</span>&nbsp;<span data-darkreader-inline-color="">:options</span>=<span data-darkreader-inline-color="">"optionsArr"</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span><br><span>&lt;/<span data-darkreader-inline-color="">template</span>&gt;</span><br><br><span>&lt;<span data-darkreader-inline-color="">style</span>&nbsp;<span data-darkreader-inline-color="">lang</span>=<span data-darkreader-inline-color="">"less"</span>&nbsp;<span data-darkreader-inline-color="">scoped</span>&gt;</span><span>&lt;/<span data-darkreader-inline-color="">style</span>&gt;</span><br></code>
```

çœ‹èµ·æ¥å¾ˆç®€å•æ˜¯å§ï¼Œå¿½ç•¥æˆ‘ä»¬æ¨¡æ‹Ÿè°ƒç”¨æ¥å£çš„ä»£ç ï¼Œæˆ‘ä»¬ç”¨åœ¨ts/jséƒ¨åˆ†çš„ä»£ç æ‰åªæœ‰6è¡Œè€Œå·²ï¼Œçœ‹èµ·æ¥æ ¹æœ¬ä¸éœ€è¦ä»€ä¹ˆå°è£…ã€‚

ä½†æ˜¯è¿™åªæ˜¯ä¸€ä¸ª`æœ€ç®€å•`çš„é€»è¾‘ï¼Œä¸è€ƒè™‘æ¥å£è¯·æ±‚è¶…æ—¶å’Œé”™è¯¯çš„æƒ…å†µï¼Œç”šè‡³éƒ½æ²¡è€ƒè™‘ä¸‹æ‹‰æ¡†çš„`loading`è¡¨ç°ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„`æ„å¤–æƒ…å†µ`éƒ½è€ƒè™‘åˆ°çš„è¯ï¼Œä»£ç å°±ä¼šå˜å¾—å¾ˆè‡ƒè‚¿äº†ã€‚

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span>&lt;<span data-darkreader-inline-color="">script</span>&nbsp;<span data-darkreader-inline-color="">setup</span>&nbsp;<span data-darkreader-inline-color="">name</span>=<span data-darkreader-inline-color="">"DDemo"</span>&nbsp;<span data-darkreader-inline-color="">lang</span>=<span data-darkreader-inline-color="">"ts"</span>&gt;</span><span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;onMounted,&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'vue'</span>;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;&nbsp;æ¨¡æ‹Ÿè°ƒç”¨æ¥å£</span><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">getRemoteData</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;any[]&gt;<span>(<span>(resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¨¡æ‹Ÿæ¥å£è°ƒç”¨æœ‰æ¦‚ç‡å‡ºé”™</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">Math</span>.random()&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0.5</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'è‹¹æœ'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'é¦™è•‰'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'æ©˜å­'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">'ä¸å°å¿ƒå‡ºé”™äº†ï¼'</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span data-darkreader-inline-color="">3000</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;optLoading&nbsp;=&nbsp;ref(<span data-darkreader-inline-color="">false</span>);<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;optionsArr&nbsp;=&nbsp;ref&lt;any[]&gt;([]);<br><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">initSelect</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;optLoading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;getRemoteData()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span>(<span>data</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optionsArr.value&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(<span>(<span>e</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è¯·æ±‚å‡ºçº¿é”™è¯¯æ—¶å°†é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåˆ°selectä¸­ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤º</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optionsArr.value&nbsp;=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">-1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">-1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">label</span>:&nbsp;e.message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">disabled</span>:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.finally(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optLoading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;onMounted(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;initSelect();<br>&nbsp;&nbsp;});<br></span><span>&lt;/<span data-darkreader-inline-color="">script</span>&gt;</span><br><br><span>&lt;<span data-darkreader-inline-color="">template</span>&gt;</span><br>&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">a-select</span>&nbsp;<span data-darkreader-inline-color="">:loading</span>=<span data-darkreader-inline-color="">"optLoading"</span>&nbsp;<span data-darkreader-inline-color="">:options</span>=<span data-darkreader-inline-color="">"optionsArr"</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span><br><span>&lt;/<span data-darkreader-inline-color="">template</span>&gt;</span><br></code>
```

è¿™ä¸€æ¬¡ï¼Œä»£ç ç›´æ¥æ¥åˆ°äº†`22`è¡Œï¼Œè™½è¯´ç”¨æˆ·ä½“éªŒç¡®å®å¥½äº†ä¸å°‘ï¼Œä½†æ˜¯è¿™ä¹Ÿå¿’è´¹äº‹äº†ï¼Œè€Œä¸”è¿™è¿˜åªæ˜¯ä¸€ä¸ªä¸‹æ‹‰æ¡†ï¼Œé¡µé¢é‡Œæœ‰å¥½å‡ ä¸ªä¸‹æ‹‰æ¡†ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ï¼Œå¦‚æ­¤è¿™èˆ¬ï¼Œå¯èƒ½ä»€ä¹ˆé€»è¾‘éƒ½æ²¡å†™ï¼Œé¡µé¢ä»£ç å°±è¦ä¸Šç™¾è¡Œäº†ã€‚

è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬æ¥å°è£…ä¸€ä¸‹äº†ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š

1.  æŠŠå­—å…¸ä¸‹æ‹‰æ¡†å°è£…æˆä¸€ä¸ª`ç»„ä»¶`ï¼›
    
2.  æŠŠè¯·æ±‚ã€åŠ è½½ä¸­ã€é”™è¯¯è¿™äº›å¤„ç†é€»è¾‘å°è£…åˆ°`hook`é‡Œï¼›
    

ç¬¬ä¸€ç§å¤§å®¶éƒ½çŸ¥é“ï¼Œå°±ä¸å¤šè¯´äº†ï¼Œç›´æ¥è¯´ç¬¬äºŒç§

##### å°è£…ä¸‹æ‹‰æ¡†hook

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;onMounted,&nbsp;reactive,&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'vue'</span>;<br><span data-darkreader-inline-color="">//&nbsp;å®šä¹‰ä¸‹æ‹‰æ¡†æ¥æ”¶çš„æ•°æ®æ ¼å¼</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">interface</span>&nbsp;SelectOption&nbsp;{<br>&nbsp;&nbsp;value:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;label:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;disabled?:&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br>&nbsp;&nbsp;key?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>}<br><span data-darkreader-inline-color="">//&nbsp;å®šä¹‰å…¥å‚æ ¼å¼</span><br><span data-darkreader-inline-color="">interface</span>&nbsp;FetchSelectProps&nbsp;{<br>&nbsp;&nbsp;apiFun:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;<span data-darkreader-inline-color="">any</span>[]&gt;;<br>}<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">useFetchSelect</span>(<span>props:&nbsp;FetchSelectProps</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;apiFun&nbsp;}&nbsp;=&nbsp;props;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;options&nbsp;=&nbsp;ref&lt;SelectOption[]&gt;([]);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;loading&nbsp;=&nbsp;ref(<span data-darkreader-inline-color="">false</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">/*&nbsp;è°ƒç”¨æ¥å£è¯·æ±‚æ•°æ®&nbsp;*/</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;loadData&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;loading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;options.value&nbsp;=&nbsp;[];<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;apiFun().then(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>(<span>data</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.value&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>(<span>err</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æœªçŸ¥é”™è¯¯ï¼Œå¯èƒ½æ˜¯ä»£ç æŠ›å‡ºçš„é”™è¯¯ï¼Œæˆ–æ˜¯ç½‘ç»œé”™è¯¯</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.value&nbsp;=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;<span data-darkreader-inline-color="">'-1'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;err.message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;disabled:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¥ç€æŠ›å‡ºé”™è¯¯</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>.reject(err);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;&nbsp;onMounted&nbsp;ä¸­è°ƒç”¨æ¥å£</span><br>&nbsp;&nbsp;onMounted(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;loadData();<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;options,<br>&nbsp;&nbsp;&nbsp;&nbsp;loading,<br>&nbsp;&nbsp;});<br>}<br></code>
```

ç„¶ååœ¨ç»„ä»¶ä¸­è°ƒç”¨

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span>&lt;<span data-darkreader-inline-color="">script</span>&nbsp;<span data-darkreader-inline-color="">setup</span>&nbsp;<span data-darkreader-inline-color="">name</span>=<span data-darkreader-inline-color="">"DDemo"</span>&nbsp;<span data-darkreader-inline-color="">lang</span>=<span data-darkreader-inline-color="">"ts"</span>&gt;</span><span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;useFetchSelect&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'./hook'</span>;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;&nbsp;&nbsp;æ¨¡æ‹Ÿè°ƒç”¨æ¥å£</span><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">getRemoteData</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;any[]&gt;<span>(<span>(resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¨¡æ‹Ÿæ¥å£è°ƒç”¨æœ‰æ¦‚ç‡å‡ºé”™</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">Math</span>.random()&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0.5</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'è‹¹æœ'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'é¦™è•‰'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">key</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">name</span>:&nbsp;<span data-darkreader-inline-color="">'æ©˜å­'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">value</span>:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">'ä¸å°å¿ƒå‡ºé”™äº†ï¼'</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span data-darkreader-inline-color="">3000</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;å°†ä¹‹å‰ç”¨çš„&nbsp;options,loadingï¼Œå’Œè°ƒç”¨æ¥å£çš„é€»è¾‘éƒ½æŠ½ç¦»åˆ°hookä¸­</span><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;selectBind&nbsp;=&nbsp;useFetchSelect({<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">apiFun</span>:&nbsp;getRemoteData,<br>&nbsp;&nbsp;});<br></span><span>&lt;/<span data-darkreader-inline-color="">script</span>&gt;</span><br><br><span>&lt;<span data-darkreader-inline-color="">template</span>&gt;</span><br>&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">div</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">&lt;!--&nbsp;å°†hookè¿”å›çš„æ¥å£ï¼Œé€šè¿‡&nbsp;v-bind&nbsp;ç»‘å®šç»™ç»„ä»¶&nbsp;--&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span>&lt;<span data-darkreader-inline-color="">a-select</span>&nbsp;<span data-darkreader-inline-color="">v-bind</span>=<span data-darkreader-inline-color="">"selectBind"</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;<span>&lt;/<span data-darkreader-inline-color="">div</span>&gt;</span><br><span>&lt;/<span data-darkreader-inline-color="">template</span>&gt;</span><br></code>
```

è¿™æ ·ä¸€æ¥ï¼Œä»£ç è¡Œæ•°ç›´æ¥åˆä»`20`è¡Œé™åˆ°`3`è¡Œï¼Œç”šè‡³æ¯”åˆšå¼€å§‹æœ€ç®€å•çš„é‚£ä¸ªè¿˜è¦å°‘ä¸¤è¡Œï¼Œä½†æ˜¯åŠŸèƒ½å´ä¸€ç‚¹ä¸å°‘ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿæ˜¯æ¯”è¾ƒå®Œå–„çš„ã€‚

å¦‚æœä½ è§‰ç€ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸èƒ½æ‰“åŠ¨ä½ çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ª

##### LoadingçŠ¶æ€hook

ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨æ¥å£æ˜¯å¦ä¸€ä¸ªæˆ‘ä»¬ç»å¸¸é‡åˆ°çš„åœºæ™¯ï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæç¤ºç”¨æˆ·æ“ä½œå·²ç»å“åº”ï¼ŒåŒæ—¶é˜²æ­¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»ï¼Œæˆ‘ä»¬è¦åœ¨è°ƒç”¨æ¥å£çš„åŒæ—¶å°†æŒ‰é’®ç½®ä¸º`loading`çŠ¶æ€ï¼Œè™½è¯´åªæœ‰ä¸€ä¸ªloadingçŠ¶æ€ï¼Œä½†æ˜¯å†™å¤šäº†ä¹Ÿè§‰ç€éº»çƒ¦ã€‚

ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªéå¸¸ç®€å•çš„hookï¼š

hook.ts

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Ref,&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">'vue'</span>;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;TApiFun&lt;TData,&nbsp;TParams&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">Array</span>&lt;<span data-darkreader-inline-color="">any</span>&gt;&gt;&nbsp;=&nbsp;<span>(<span>...params:&nbsp;TParams</span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;TData&gt;;<br><br><span data-darkreader-inline-color="">interface</span>&nbsp;AutoRequestOptions&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;å®šä¹‰ä¸€ä¸‹åˆå§‹çŠ¶æ€</span><br>&nbsp;&nbsp;loading?:&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¥å£è°ƒç”¨æˆåŠŸæ—¶çš„å›è°ƒ</span><br>&nbsp;&nbsp;onSuccess?:&nbsp;<span>(<span>data:&nbsp;<span data-darkreader-inline-color="">any</span></span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">void</span>;<br>}<br><br><span data-darkreader-inline-color="">type</span>&nbsp;AutoRequestResult&lt;TData,&nbsp;TParams&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">Array</span>&lt;<span data-darkreader-inline-color="">any</span>&gt;&gt;&nbsp;=&nbsp;[Ref&lt;<span data-darkreader-inline-color="">boolean</span>&gt;,&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;];<br><br><span data-darkreader-inline-color="">/*&nbsp;æ§åˆ¶loadingçŠ¶æ€çš„è‡ªåŠ¨åˆ‡æ¢hook&nbsp;*/</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">useAutoRequest</span>&lt;<span data-darkreader-inline-color="">TData</span>,&nbsp;<span data-darkreader-inline-color="">TParams</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">any</span>[]&nbsp;=&nbsp;<span data-darkreader-inline-color="">any</span>[]&gt;(<span>fun:&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;,&nbsp;options?:&nbsp;AutoRequestOptions</span>):&nbsp;<span data-darkreader-inline-color="">AutoRequestResult</span>&lt;<span data-darkreader-inline-color="">TData</span>,&nbsp;<span data-darkreader-inline-color="">TParams</span>&gt;&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;loading&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>,&nbsp;onSuccess&nbsp;}&nbsp;=&nbsp;options&nbsp;||&nbsp;{&nbsp;loading:&nbsp;<span data-darkreader-inline-color="">false</span>&nbsp;};<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;requestLoading&nbsp;=&nbsp;ref(loading);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;run:&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;&nbsp;=&nbsp;<span>(<span>...params</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;requestLoading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;fun(...params)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onSuccess&nbsp;&amp;&amp;&nbsp;onSuccess(res);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;res;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.finally(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestLoading.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;[requestLoading,&nbsp;run];<br>}<br></code>
```

è¿™æ¬¡æŠŠæ¨¡æ‹Ÿæ¥å£çš„æ–¹æ³•å•ç‹¬æŠ½å‡ºä¸€ä¸ªæ–‡ä»¶

api/index.ts

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">submitApi</span>(<span>text:&nbsp;<span data-darkreader-inline-color="">string</span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>(<span>(<span>resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¨¡æ‹Ÿæ¥å£è°ƒç”¨æœ‰æ¦‚ç‡å‡ºé”™</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(<span data-darkreader-inline-color="">Math</span>.random()&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">0.5</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status:&nbsp;<span data-darkreader-inline-color="">"ok"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text:&nbsp;text,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span data-darkreader-inline-color="">new</span>&nbsp;<span data-darkreader-inline-color="">Error</span>(<span data-darkreader-inline-color="">"ä¸å°å¿ƒå‡ºé”™äº†ï¼"</span>));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span data-darkreader-inline-color="">3000</span>);<br>&nbsp;&nbsp;});<br>}<br></code>
```

ä½¿ç”¨ï¼š

index.vue

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;script&nbsp;setup&nbsp;name=<span data-darkreader-inline-color="">"Index"</span>&nbsp;lang=<span data-darkreader-inline-color="">"ts"</span>&gt;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;useAutoRequest&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./hook"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Button&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"ant-design-vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;submitApi&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/api"</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;[loading,&nbsp;submit]&nbsp;=&nbsp;useAutoRequest(submitApi);<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">onSubmit</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;submit(<span data-darkreader-inline-color="">"aaa"</span>).then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"res"</span>,&nbsp;res);<br>&nbsp;&nbsp;});<br>}<br>&lt;<span data-darkreader-inline-color="">/script&gt;<br><br>&lt;template&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="col"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;:loading="loading"&nbsp;@click="onSubmit"&gt;æäº¤&lt;/</span>Button&gt;<br>&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/div&gt;<br>&lt;/</span>template&gt;<br></code>
```

è¿™æ ·å°è£…ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶å°±ä¸å†éœ€è¦æ‰‹åŠ¨åˆ‡æ¢`loading`çš„çŠ¶æ€äº†ã€‚

è¿™ä¸ªhookè¿˜æœ‰å¦ä¸€ç§ç©æ³•ï¼š

hook2.ts

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;{&nbsp;Ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vue"</span>;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;AutoLoadingResult&nbsp;=&nbsp;[<br>&nbsp;&nbsp;Ref&lt;<span data-darkreader-inline-color="">boolean</span>&gt;,<br>&nbsp;&nbsp;&lt;T&gt;<span>(<span>requestPromise:&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;T&gt;</span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;T&gt;<br>];<br><br><span data-darkreader-inline-color="">/*&nbsp;åœ¨ç»™runæ–¹æ³•ä¼ å…¥ä¸€ä¸ªpromiseï¼Œä¼šåœ¨promiseæ‰§è¡Œå‰æˆ–æ‰§è¡Œåå°†loadingçŠ¶æ€è®¾ä¸ºtrueï¼Œåœ¨æ‰§è¡Œå®Œæˆåè®¾ä¸ºfalse&nbsp;*/</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">useAutoLoading</span>(<span>defaultLoading&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span></span>):&nbsp;<span data-darkreader-inline-color="">AutoLoadingResult</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;ld&nbsp;=&nbsp;ref(defaultLoading);<br><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">run</span>&lt;<span data-darkreader-inline-color="">T</span>&gt;(<span>requestPromise:&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;T&gt;</span>):&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;<span data-darkreader-inline-color="">T</span>&gt;&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;ld.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;requestPromise.finally(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ld.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;[ld,&nbsp;run];<br>}<br></code>
```

ä½¿ç”¨ï¼š

index.vue

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;script&nbsp;setup&nbsp;name=<span data-darkreader-inline-color="">"Index"</span>&nbsp;lang=<span data-darkreader-inline-color="">"ts"</span>&gt;<br><span data-darkreader-inline-color="">//&nbsp;import&nbsp;{&nbsp;useAutoRequest&nbsp;}&nbsp;from&nbsp;"./hook";</span><br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;useAutoLoading&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./hook2"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Button&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"ant-design-vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;submitApi,&nbsp;cancelApi&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/api"</span>;<br><br><span data-darkreader-inline-color="">//&nbsp;const&nbsp;[loading,&nbsp;submit]&nbsp;=&nbsp;useAutoRequest(submitApi);</span><br><br><span data-darkreader-inline-color="">const</span>&nbsp;[commonLoading,&nbsp;fetch]&nbsp;=&nbsp;useAutoLoading();<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">onSubmit</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;fetch(submitApi(<span data-darkreader-inline-color="">"submit"</span>)).then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"res"</span>,&nbsp;res);<br>&nbsp;&nbsp;});<br>}<br><br><span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">onCancel</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;fetch(cancelApi(<span data-darkreader-inline-color="">"cancel"</span>)).then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.log(<span data-darkreader-inline-color="">"res"</span>,&nbsp;res);<br>&nbsp;&nbsp;});<br>}<br>&lt;<span data-darkreader-inline-color="">/script&gt;<br><br>&lt;template&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="col"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;type="primary"&nbsp;:loading="commonLoading"&nbsp;@click="onSubmit"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æäº¤<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span>Button&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;:loading=<span data-darkreader-inline-color="">"commonLoading"</span>&nbsp;<span data-darkreader-inline-color="">@click</span>=<span data-darkreader-inline-color="">"onCancel"</span>&gt;å–æ¶ˆ&lt;<span data-darkreader-inline-color="">/Button&gt;<br>&nbsp;&nbsp;&lt;/</span>div&gt;<br>&lt;<span data-darkreader-inline-color="">/template&gt;<br></span></code>
```

è¿™é‡Œä¹Ÿæ˜¯ç”¨åˆ°äº†`promise`é“¾å¼è°ƒç”¨çš„ç‰¹æ€§ï¼Œåœ¨æ¥å£è°ƒç”¨ä¹‹åé©¬ä¸Šå°†`loading`ç½®ä¸ºtrueï¼Œåœ¨æ¥å£è°ƒç”¨å®Œæˆåç½®ä¸ºfalseã€‚è€Œ`useAutoRequest`åˆ™æ˜¯åœ¨æ¥å£è°ƒç”¨ä¹‹å‰å°±å°†`loading`ç½®ä¸ºtrueã€‚

`useAutoRequest`è°ƒç”¨æ—¶ä»£ç æ›´ç®€æ´ï¼Œ`useAutoLoading`çš„ä½¿ç”¨åˆ™æ›´çµæ´»ï¼Œå¯ä»¥åŒæ—¶æœåŠ¡ç»™å¤šä¸ªæ¥å£ä½¿ç”¨ï¼Œæ¯”è¾ƒé€‚åˆ`æäº¤`ã€`å–æ¶ˆ`è¿™ç§äº’æ–¥çš„åœºæ™¯ã€‚

## è§£æ”¾ç»„ä»¶

å¦‚æœä½ ç¿»çœ‹è¿‡æˆ‘çš„è¿™ç¯‡åšå®¢ä¸€ä¸ªçœå¿ƒçœåŠ›çš„éª¨æ¶å±å®ç°æ–¹æ¡ˆ<sup data-darkreader-inline-color="">[2]</sup>ï¼Œé‚£ä¹ˆè‚¯å®šçŸ¥é“åœ¨éª¨æ¶å±ç»„ä»¶ä¸­ï¼Œæˆ‘æ˜¯ç”¨äº†ä¼ å…¥çš„`res`å¯¹è±¡çš„`code`å±æ€§æ¥åˆ¤æ–­å½“å‰æ˜¾ç¤ºçš„è§†å›¾çŠ¶æ€ã€‚é•¿è¯çŸ­è¯´å°±æ˜¯ï¼Œ `res`æ˜¯æ¥å£è¿”å›ç»™å‰ç«¯çš„æ•°æ®ï¼Œå¦‚

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"code"</span>:<span data-darkreader-inline-color="">0</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"msg"</span>:'æŸ¥è¯¢æˆåŠŸ',<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"data"</span>:{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"username"</span>:<span data-darkreader-inline-color="">"å°ç‹"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"age"</span>:<span data-darkreader-inline-color="">20</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code>
```

æˆ‘ä»¬å‡å®šå½“`code`ä¸º`0`æ—¶ä»£è¡¨æˆåŠŸï¼Œ`ä¸ä¸º0`è¡¨ç¤ºå¤±è´¥ï¼Œä¸º`-100`æ—¶è¡¨ç¤ºæ­£åœ¨åŠ è½½ï¼Œå½“ç„¶æ¥å£å¹¶ä¸ä¼šä¹Ÿä¸éœ€è¦è¿”å›`-100`ï¼Œ`-100`æ˜¯æˆ‘ä»¬æœ¬åœ°æé€ å‡ºæ¥çš„ï¼Œåªæ˜¯ä¸ºäº†è®©éª¨æ¶å±ç»„ä»¶æ˜¾ç¤ºå¯¹åº”çš„åŠ è½½çŠ¶æ€ã€‚åœ¨é¡µé¢ä¸­ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå£°æ˜ä¸€ä¸ª`code`ä¸º`-100`çš„`res`å¯¹è±¡ç»‘å®šç»™éª¨æ¶å±ç»„ä»¶ï¼Œç„¶ååœ¨`onMounted`ä¸­è°ƒç”¨æŸ¥è¯¢æ¥å£ï¼Œè°ƒç”¨æˆåŠŸåæ›´æ–°`res`å¯¹è±¡ã€‚

å¦‚æœåƒä¸Šé¢è¿™æ ·ä½¿ç”¨`res`å¯¹è±¡æ¥ç»™éª¨æ¶å±ç»„ä»¶è®¾ç½®çŠ¶æ€çš„è¯ï¼Œå°±æ„Ÿè§‰éå¸¸çš„éº»çƒ¦ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯è¦è®¾ç½®ä¸€ä¸ªåˆå§‹æ—¶çš„åŠ è½½çŠ¶æ€ï¼Œä½†æ˜¯è¦æå¥½å‡ è¡Œæ²¡ç”¨çš„ä»£ç ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠ`res`æ‹†è§£æˆä¸€ä¸ªä¸ªå‚æ•°å•ç‹¬ä¼ é€’çš„è¯ï¼Œçˆ¶ç»„ä»¶éœ€è¦ç»´æŠ¤çš„å˜é‡å°±ä¼šéå¸¸å¤šäº†ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥å°è£…hookæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠæ‹†è§£å‡ºæ¥çš„å‚æ•°éƒ½æ‰”åˆ°hooké‡Œé¢ä¿å­˜ã€‚

ä¸Šä»£ç ï¼ˆè¿™éƒ¨åˆ†ä»£ç æ¯”è¾ƒé•¿ï¼Œæƒ³è¦è¯¦ç»†äº†è§£çš„è¯å¯ä»¥å»çœ‹åŸæ–‡ç« ï¼‰

#### éª¨æ¶å±ç»„ä»¶

SkeletonView/index.vue

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;script&nbsp;setup&nbsp;lang=<span data-darkreader-inline-color="">"ts"</span>&gt;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;defineProps,&nbsp;computed&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;LoadingOutlined&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@ant-design/icons-vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;isArray&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/utils/is"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;Button&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"ant-design-vue"</span>;<br><br><span data-darkreader-inline-color="">/*&nbsp;status:'loading','error','success','empty'&nbsp;*/</span><br><span data-darkreader-inline-color="">type</span>&nbsp;ViewStatus&nbsp;=&nbsp;<span data-darkreader-inline-color="">"loading"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"error"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"success"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"empty"</span>;<br><br><span data-darkreader-inline-color="">interface</span>&nbsp;SkeletonProps&lt;T&nbsp;=&nbsp;any&gt;&nbsp;{<br>&nbsp;&nbsp;status:&nbsp;ViewStatus;<br>&nbsp;&nbsp;result:&nbsp;T;<br>&nbsp;&nbsp;placeholderResult:&nbsp;T;<br>&nbsp;&nbsp;emptyMsg?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;errorMsg?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;isEmpty?:&nbsp;<span>(<span>result:&nbsp;T</span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br>}<br><br><span data-darkreader-inline-color="">const</span>&nbsp;props&nbsp;=&nbsp;withDefaults(defineProps&lt;SkeletonProps&gt;(),&nbsp;{<br>&nbsp;&nbsp;status:&nbsp;<span data-darkreader-inline-color="">"loading"</span>,<br>&nbsp;&nbsp;emptyMsg:&nbsp;<span data-darkreader-inline-color="">"æš‚æ— æ•°æ®"</span>,<br>&nbsp;&nbsp;errorMsg:&nbsp;<span data-darkreader-inline-color="">"æœªçŸ¥é”™è¯¯"</span>,<br>});<br><br><span data-darkreader-inline-color="">const</span>&nbsp;emits&nbsp;=&nbsp;defineEmits([<span data-darkreader-inline-color="">"retry"</span>]);<br><br><span data-darkreader-inline-color="">const</span>&nbsp;retryClick&nbsp;=&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;emits(<span data-darkreader-inline-color="">"retry"</span>);<br>};<br><br><span data-darkreader-inline-color="">const</span>&nbsp;viewStatus&nbsp;=&nbsp;computed(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;status&nbsp;=&nbsp;props.status;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(status&nbsp;===&nbsp;<span data-darkreader-inline-color="">"success"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;isEmp&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;result&nbsp;=&nbsp;props.result;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(props.isEmpty)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isEmp&nbsp;=&nbsp;props.isEmpty(props.result);<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isArray(result))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isEmp&nbsp;=&nbsp;result.length&nbsp;===&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(!result)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isEmp&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span data-darkreader-inline-color="">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isEmp&nbsp;=&nbsp;<span data-darkreader-inline-color="">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(isEmp)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">"empty"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">"success"</span>;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;status;<br>});<br><br><span data-darkreader-inline-color="">const</span>&nbsp;placeholderData&nbsp;=&nbsp;computed(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(props.result)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;props.result;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;props.placeholderResult;<br>});<br>&lt;<span data-darkreader-inline-color="">/script&gt;<br><br>&lt;template&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;v-if="viewStatus&nbsp;===&nbsp;'empty'"&nbsp;key="empty"&nbsp;class="empty_view&nbsp;flex-col"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;emptyMsg&nbsp;}}&lt;/</span>span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;<span data-darkreader-inline-color="">class</span>=<span data-darkreader-inline-color="">"mt4&nbsp;max-w-160px"</span>&nbsp;<span data-darkreader-inline-color="">@click</span>=<span data-darkreader-inline-color="">"retryClick"</span>&gt;é‡è¯•&lt;<span data-darkreader-inline-color="">/Button&gt;<br>&nbsp;&nbsp;&lt;/</span>div&gt;<br><br>&nbsp;&nbsp;&lt;div<br>&nbsp;&nbsp;&nbsp;&nbsp;key=<span data-darkreader-inline-color="">"error"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;v-<span data-darkreader-inline-color="">else</span>-<span data-darkreader-inline-color="">if</span>=<span data-darkreader-inline-color="">"viewStatus&nbsp;===&nbsp;'error'"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">class</span>=<span data-darkreader-inline-color="">"empty_view&nbsp;flex-col"</span><br>&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;errorMsg&nbsp;}}&lt;<span data-darkreader-inline-color="">/span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Button&nbsp;class="mt4&nbsp;max-w-160px"&nbsp;@click="retryClick"&gt;é‡è¯•&lt;/</span>Button&gt;<br>&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/div&gt;<br><br>&nbsp;&nbsp;&lt;div<br>&nbsp;&nbsp;&nbsp;&nbsp;v-else<br>&nbsp;&nbsp;&nbsp;&nbsp;key="loadingOrContent"<br>&nbsp;&nbsp;&nbsp;&nbsp;:class="[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholderData&nbsp;&amp;&amp;&nbsp;viewStatus&nbsp;===&nbsp;'loading'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;'skeleton-view-empty-view'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;'skeleton-view-default-view',<br>&nbsp;&nbsp;&nbsp;&nbsp;]"<br>&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-if="!placeholderData&nbsp;&amp;&amp;&nbsp;viewStatus&nbsp;===&nbsp;'loading'"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class="loading-center"<br>&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;LoadingOutlined&nbsp;style="font-size:&nbsp;40px;&nbsp;color:&nbsp;#2a6de5"&nbsp;/</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;slot<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:result="placeholderData"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:status="viewStatus"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:success="viewStatus&nbsp;===&nbsp;'success'"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:mask="viewStatus&nbsp;===&nbsp;'loading'&nbsp;?&nbsp;'skeleton-mask'&nbsp;:&nbsp;''"<br>&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/</span>slot&gt;<br>&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/div&gt;<br>&lt;/</span>template&gt;<br><br>&lt;style&gt;<br>.clam-box&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;height:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>}<br>.empty_view&nbsp;{<br>&nbsp;&nbsp;padding-top:&nbsp;<span data-darkreader-inline-color="">50</span>px;<br>&nbsp;&nbsp;padding-bottom:&nbsp;<span data-darkreader-inline-color="">50</span>px;<br>&nbsp;&nbsp;align-items:&nbsp;center;<br>}<br>.empty_img&nbsp;{<br>&nbsp;&nbsp;width:&nbsp;<span data-darkreader-inline-color="">310</span>px;<br>&nbsp;&nbsp;height:&nbsp;<span data-darkreader-inline-color="">218</span>px;<br>}<br>.trip_text&nbsp;{<br>&nbsp;&nbsp;font-size:&nbsp;<span data-darkreader-inline-color="">20</span>px;<br>&nbsp;&nbsp;color:&nbsp;#<span data-darkreader-inline-color="">999999</span>;<br>}<br><br>.mt4&nbsp;{<br>&nbsp;&nbsp;margin-top:&nbsp;<span data-darkreader-inline-color="">4</span>px;<br>}<br><br>.flex-col&nbsp;{<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;flex-direction:&nbsp;column;<br>}<br><br>.loading-center&nbsp;{<br>&nbsp;&nbsp;padding:&nbsp;<span data-darkreader-inline-color="">20</span>px;<br>&nbsp;&nbsp;display:&nbsp;flex;<br>&nbsp;&nbsp;justify-content:&nbsp;center;<br>&nbsp;&nbsp;align-items:&nbsp;center;<br>}<br><br>.skeleton-view-<span data-darkreader-inline-color="">default</span>-view&nbsp;span,<br>.skeleton-view-<span data-darkreader-inline-color="">default</span>-view&nbsp;a,<br>.skeleton-view-<span data-darkreader-inline-color="">default</span>-view&nbsp;img,<br>.skeleton-view-<span data-darkreader-inline-color="">default</span>-view&nbsp;td,<br>.skeleton-view-<span data-darkreader-inline-color="">default</span>-view&nbsp;button&nbsp;{<br>&nbsp;&nbsp;transition-duration:&nbsp;<span data-darkreader-inline-color="">0.7</span>s;<br>&nbsp;&nbsp;transition-timing-<span><span data-darkreader-inline-color="">function</span>:&nbsp;<span data-darkreader-inline-color="">ease</span></span>;<br>&nbsp;&nbsp;transition-property:&nbsp;background,&nbsp;width;<br>}<br><br>.skeleton-view-empty-view&nbsp;{<br>&nbsp;&nbsp;position:&nbsp;relative;<br>&nbsp;&nbsp;pointer-events:&nbsp;none;<br>}<br><br>.skeleton-view-empty-view::before&nbsp;{<br>&nbsp;&nbsp;content:&nbsp;<span data-darkreader-inline-color="">"&nbsp;"</span>;<br>&nbsp;&nbsp;position:&nbsp;absolute;<br>&nbsp;&nbsp;width:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;height:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;top:&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;left:&nbsp;<span data-darkreader-inline-color="">0</span>;<br>&nbsp;&nbsp;background:&nbsp;linear-gradient(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">110</span>deg,<br>&nbsp;&nbsp;&nbsp;&nbsp;rgba(<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">0.1</span>)&nbsp;<span data-darkreader-inline-color="">40</span>%,<br>&nbsp;&nbsp;&nbsp;&nbsp;rgba(<span data-darkreader-inline-color="">180</span>,&nbsp;<span data-darkreader-inline-color="">199</span>,&nbsp;<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">0.3</span>)&nbsp;<span data-darkreader-inline-color="">50</span>%,<br>&nbsp;&nbsp;&nbsp;&nbsp;rgba(<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">255</span>,&nbsp;<span data-darkreader-inline-color="">0.1</span>)&nbsp;<span data-darkreader-inline-color="">60</span>%<br>&nbsp;&nbsp;);<br>&nbsp;&nbsp;background-size:&nbsp;<span data-darkreader-inline-color="">200</span>%&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;background-position-x:&nbsp;<span data-darkreader-inline-color="">180</span>%;<br>&nbsp;&nbsp;animation:&nbsp;loading&nbsp;<span data-darkreader-inline-color="">1</span>s&nbsp;ease-<span data-darkreader-inline-color="">in</span>-out&nbsp;infinite;<br>&nbsp;&nbsp;z-index:&nbsp;<span data-darkreader-inline-color="">1</span>;<br>}<br><br><span data-darkreader-inline-color="">@keyframes</span>&nbsp;loading&nbsp;{<br>&nbsp;&nbsp;to&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;background-position-x:&nbsp;<span data-darkreader-inline-color="">-20</span>%;<br>&nbsp;&nbsp;}<br>}<br><br>.skeleton-view-empty-view&nbsp;.skeleton-mask&nbsp;{<br>&nbsp;&nbsp;position:&nbsp;relative;<br>}<br>.skeleton-view-empty-view&nbsp;.skeleton-mask::before&nbsp;{<br>&nbsp;&nbsp;content:&nbsp;<span data-darkreader-inline-color="">"&nbsp;"</span>;<br>&nbsp;&nbsp;background-color:&nbsp;#f5f5f5;<br>&nbsp;&nbsp;position:&nbsp;absolute;<br>&nbsp;&nbsp;width:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;height:&nbsp;<span data-darkreader-inline-color="">100</span>%;<br>&nbsp;&nbsp;border:&nbsp;<span data-darkreader-inline-color="">1</span>px&nbsp;solid&nbsp;#f5f5f5;<br>&nbsp;&nbsp;top:&nbsp;<span data-darkreader-inline-color="">-1</span>px;<br>&nbsp;&nbsp;left:&nbsp;<span data-darkreader-inline-color="">-1</span>px;<br>&nbsp;&nbsp;z-index:&nbsp;<span data-darkreader-inline-color="">1</span>;<br>}<br><br>.skeleton-view-empty-view&nbsp;button,<br>.skeleton-view-empty-view&nbsp;span,<br>.skeleton-view-empty-view&nbsp;input,<br>.skeleton-view-empty-view&nbsp;td,<br>.skeleton-view-empty-view&nbsp;a&nbsp;{<br>&nbsp;&nbsp;color:&nbsp;rgba(<span data-darkreader-inline-color="">0</span>,&nbsp;<span data-darkreader-inline-color="">0</span>,&nbsp;<span data-darkreader-inline-color="">0</span>,&nbsp;<span data-darkreader-inline-color="">0</span>)&nbsp;!important;<br>&nbsp;&nbsp;border:&nbsp;none;<br>&nbsp;&nbsp;background:&nbsp;#f5f5f5&nbsp;!important;<br>}<br><span data-darkreader-inline-color="">/*&nbsp;[src=""],img:not([src])*/</span><br>.skeleton-view-empty-view&nbsp;img&nbsp;{<br>&nbsp;&nbsp;content:&nbsp;url(./no_url.png);<br>&nbsp;&nbsp;border-radius:&nbsp;<span data-darkreader-inline-color="">2</span>px;<br>&nbsp;&nbsp;background:&nbsp;#f5f5f5&nbsp;!important;<br>}<br>&lt;<span data-darkreader-inline-color="">/style&gt;<br></span></code>
```

è¿™é‡Œæ ·å¼ä¸­ç”¨åˆ°çš„`no_url.png`åªæ˜¯ä¸€å¼ ç©ºç™½é€æ˜å›¾ç‰‡ï¼Œé˜²æ­¢åŠ è½½æ—¶å›¾ç‰‡æ˜¾ç¤ºè£‚å›¾ã€‚

hookä»£ç  useAutoSkeletonView.ts

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;computed,&nbsp;onMounted,&nbsp;reactive,&nbsp;ref&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;{&nbsp;UnwrapRef&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vue"</span>;<br><br><span data-darkreader-inline-color="">type</span>&nbsp;TApiFun&lt;TData,&nbsp;TParams&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">Array</span>&lt;<span data-darkreader-inline-color="">any</span>&gt;&gt;&nbsp;=&nbsp;(<br>&nbsp;&nbsp;...params:&nbsp;TParams<br>)&nbsp;=&gt;&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;TData&gt;;<br><br><span data-darkreader-inline-color="">/*&nbsp;å®šä¹‰å¯è‡ªå®šä¹‰çš„é»˜è®¤çŠ¶æ€&nbsp;*/</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;SkeletonStatus&nbsp;=&nbsp;<span data-darkreader-inline-color="">"loading"</span>&nbsp;|&nbsp;<span data-darkreader-inline-color="">"success"</span>;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">interface</span>&nbsp;IUseAutoSkeletonViewProps&lt;TData,&nbsp;TParams&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;any[]&gt;&nbsp;{<br>&nbsp;&nbsp;apiFun:&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;;<span data-darkreader-inline-color="">//&nbsp;è°ƒç”¨æ¥å£api</span><br>&nbsp;&nbsp;placeholderResult?:&nbsp;TData;&nbsp;<span data-darkreader-inline-color="">//&nbsp;éª¨æ¶å±ç”¨åˆ°çš„å ä½æ•°æ®</span><br>&nbsp;&nbsp;queryInMount?:&nbsp;<span data-darkreader-inline-color="">boolean</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;åœ¨çˆ¶ç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨è°ƒç”¨æ¥å£ï¼Œé»˜è®¤true</span><br>&nbsp;&nbsp;initQueryParams?:&nbsp;TParams;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è°ƒç”¨æ¥å£ç”¨åˆ°çš„å‚æ•°</span><br>&nbsp;&nbsp;transformDataFun?:&nbsp;<span>(<span>data:&nbsp;TData</span>)&nbsp;=&gt;</span>&nbsp;TData;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¥å£è¯·æ±‚å®Œæˆåï¼Œè½¬æ¢æ•°æ®</span><br>&nbsp;&nbsp;updateParamsOnFetch?:&nbsp;<span data-darkreader-inline-color="">boolean</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ‰‹åŠ¨è°ƒç”¨æ¥å£åï¼Œæ›´æ–°è¯·æ±‚å‚æ•°</span><br>&nbsp;&nbsp;defaultStatus?:&nbsp;SkeletonStatus;&nbsp;<span data-darkreader-inline-color="">//&nbsp;é»˜è®¤éª¨æ¶å±ç»„ä»¶çŠ¶æ€</span><br>&nbsp;&nbsp;onSuccess?:&nbsp;<span>(<span>data:&nbsp;<span data-darkreader-inline-color="">any</span></span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">void</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ¥å£è°ƒç”¨æˆåŠŸçš„å›è°ƒ</span><br>&nbsp;&nbsp;isEmpty?:&nbsp;<span>(<span>data:&nbsp;TData</span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">boolean</span>;&nbsp;<span data-darkreader-inline-color="">//&nbsp;é‡å†™éª¨æ¶å±åˆ¤ç©ºé€»è¾‘</span><br>}<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;IAutoSkeletonViewResult&lt;TData,&nbsp;TParams&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">any</span>[]&gt;&nbsp;=&nbsp;UnwrapRef&lt;{<br>&nbsp;&nbsp;execute:&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;;<br>&nbsp;&nbsp;result:&nbsp;TData&nbsp;|&nbsp;<span data-darkreader-inline-color="">null</span>;<br>&nbsp;&nbsp;retry:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;TData&gt;;<br>&nbsp;&nbsp;loading:&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br>&nbsp;&nbsp;status:&nbsp;SkeletonStatus&nbsp;|&nbsp;<span data-darkreader-inline-color="">"error"</span>;<br>&nbsp;&nbsp;getField:&nbsp;<span>(<span>key:&nbsp;<span data-darkreader-inline-color="">string</span></span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">any</span>;<br>&nbsp;&nbsp;bindProps:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;result:&nbsp;TData&nbsp;|&nbsp;<span data-darkreader-inline-color="">null</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;status:&nbsp;SkeletonStatus&nbsp;|&nbsp;<span data-darkreader-inline-color="">"error"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;errorMsg:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;placeholderResult?:&nbsp;TData;<br>&nbsp;&nbsp;&nbsp;&nbsp;isEmpty?:&nbsp;<span>(<span>data:&nbsp;TData</span>)&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">boolean</span>;<br>&nbsp;&nbsp;};<br>&nbsp;&nbsp;bindEvents:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;retry:&nbsp;<span><span>()</span>&nbsp;=&gt;</span>&nbsp;<span data-darkreader-inline-color="">Promise</span>&lt;TData&gt;;<br>&nbsp;&nbsp;};<br>}&gt;;<br><br><span data-darkreader-inline-color="">export</span>&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">useAutoSkeletonView</span>&lt;<span data-darkreader-inline-color="">TData</span>&nbsp;=&nbsp;<span data-darkreader-inline-color="">any</span>,&nbsp;<span data-darkreader-inline-color="">TParams</span>&nbsp;<span data-darkreader-inline-color="">extends</span>&nbsp;<span data-darkreader-inline-color="">any</span>[]&nbsp;=&nbsp;<span data-darkreader-inline-color="">any</span>[]&gt;(<span><br>&nbsp;&nbsp;prop:&nbsp;IUseAutoSkeletonViewProps&lt;TData,&nbsp;TParams&gt;<br></span>):&nbsp;<span data-darkreader-inline-color="">IAutoSkeletonViewResult</span>&lt;<span data-darkreader-inline-color="">TData</span>,&nbsp;<span data-darkreader-inline-color="">TParams</span>&gt;&nbsp;</span>{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;apiFun,<br>&nbsp;&nbsp;&nbsp;&nbsp;defaultStatus&nbsp;=&nbsp;<span data-darkreader-inline-color="">"loading"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;placeholderResult,<br>&nbsp;&nbsp;&nbsp;&nbsp;isEmpty,<br>&nbsp;&nbsp;&nbsp;&nbsp;initQueryParams&nbsp;=&nbsp;[],<br>&nbsp;&nbsp;&nbsp;&nbsp;transformDataFun,<br>&nbsp;&nbsp;&nbsp;&nbsp;onSuccess,<br>&nbsp;&nbsp;&nbsp;&nbsp;updateParamsOnFetch&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;queryInMount&nbsp;=&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;}&nbsp;=&nbsp;prop;<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;status&nbsp;=&nbsp;ref&lt;SkeletonStatus&nbsp;|&nbsp;<span data-darkreader-inline-color="">"error"</span>&gt;(defaultStatus);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;result&nbsp;=&nbsp;ref&lt;TData&nbsp;|&nbsp;<span data-darkreader-inline-color="">null</span>&gt;(<span data-darkreader-inline-color="">null</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;placeholder&nbsp;=&nbsp;ref&lt;TData&nbsp;|&nbsp;<span data-darkreader-inline-color="">undefined</span>&gt;(placeholderResult);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;errorMsg&nbsp;=&nbsp;ref(<span data-darkreader-inline-color="">""</span>);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;lastFetchParams&nbsp;=&nbsp;ref&lt;TParams&gt;(initQueryParams&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;TParams);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;executeApiFun:&nbsp;TApiFun&lt;TData,&nbsp;TParams&gt;&nbsp;=&nbsp;<span>(<span>...params:&nbsp;TParams</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(updateParamsOnFetch)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastFetchParams.value&nbsp;=&nbsp;params;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;status.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">"loading"</span>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;apiFun(...params)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span>(<span>res</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;data:&nbsp;<span data-darkreader-inline-color="">any</span>&nbsp;=&nbsp;res;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(transformDataFun)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;transformDataFun(res);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder.value&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.value&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">"success"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onSuccess&nbsp;&amp;&amp;&nbsp;onSuccess(data);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;res;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(<span>(<span>e</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">console</span>.error(<span data-darkreader-inline-color="">"--useAutoSkeletonView--"</span>,&nbsp;e);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status.value&nbsp;=&nbsp;<span data-darkreader-inline-color="">"error"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorMsg.value&nbsp;=&nbsp;e.message;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">throw</span>&nbsp;e;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">retry</span>(<span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;executeApiFun(...(lastFetchParams.value&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;TParams));<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;onMounted(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(queryInMount&nbsp;&amp;&amp;&nbsp;defaultStatus&nbsp;===&nbsp;<span data-darkreader-inline-color="">"loading"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executeApiFun(...(initQueryParams&nbsp;<span data-darkreader-inline-color="">as</span>&nbsp;TParams));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;loading&nbsp;=&nbsp;computed(<span><span>()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;status.value&nbsp;===&nbsp;<span data-darkreader-inline-color="">"loading"</span>;<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span><span data-darkreader-inline-color="">function</span>&nbsp;<span data-darkreader-inline-color="">getField</span>(<span>key:&nbsp;<span data-darkreader-inline-color="">string</span></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(status.value&nbsp;!==&nbsp;<span data-darkreader-inline-color="">"success"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">""</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(result.value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;@ts-ignore</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;result.value[key];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;<span data-darkreader-inline-color="">""</span>;<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;execute:&nbsp;executeApiFun,<br>&nbsp;&nbsp;&nbsp;&nbsp;result:&nbsp;result,<br>&nbsp;&nbsp;&nbsp;&nbsp;retry,<br>&nbsp;&nbsp;&nbsp;&nbsp;loading,<br>&nbsp;&nbsp;&nbsp;&nbsp;status,<br>&nbsp;&nbsp;&nbsp;&nbsp;getField,<br>&nbsp;&nbsp;&nbsp;&nbsp;bindProps:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result:&nbsp;result,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorMsg,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholderResult:&nbsp;placeholder,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isEmpty,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;bindEvents:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retry:&nbsp;retry,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;});<br>}<br></code>
```

ä½¿ç”¨ index.vue

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;script&nbsp;setup&nbsp;name=<span data-darkreader-inline-color="">"SkeletonView"</span>&nbsp;lang=<span data-darkreader-inline-color="">"ts"</span>&gt;<br><span data-darkreader-inline-color="">import</span>&nbsp;SkeletonView&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/components/SkeletonView/index.vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;useAutoSkeletonView&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./useAutoSkeletonView"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;listApi&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/api"</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;view&nbsp;=&nbsp;useAutoSkeletonView({<br>&nbsp;&nbsp;apiFun:&nbsp;listApi,<br>});<br>&lt;<span data-darkreader-inline-color="">/script&gt;<br><br>&lt;template&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="col"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;SkeletonView<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-slot="{&nbsp;result&nbsp;}"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-bind="view.bindProps"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-on="view.bindEvents"<br>&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;result&nbsp;}}&lt;/</span>span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/SkeletonView&gt;<br>&nbsp;&nbsp;&lt;/</span>div&gt;<br>&lt;<span data-darkreader-inline-color="">/template&gt;<br></span></code>
```

è¿™é‡Œçš„`SkeletonView`ä¸å…‰ç”¨`v-bind`ç»‘å®šäº†`hook`æŠ›å‡ºçš„å±æ€§ï¼Œè¿˜ç”¨`v-on`ç»‘å®šçš„äº‹ä»¶ï¼Œç›®çš„å°±æ˜¯ç›‘å¬è¯·æ±‚æŠ¥é”™æ—¶å‡ºç°çš„â€œé‡è¯•â€æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ã€‚

## ä½¿ç”¨ä¼˜åŒ–

ç»å¸¸å†™`react`çš„æœ‹å‹å¯èƒ½æ—©å°±çœ‹å‡ºæ¥äº†ï¼Œè¿™ä¸æ˜¯è·Ÿreactä¸­çš„ä¸€éƒ¨åˆ†hookç”¨æ³•å¦‚å‡ºä¸€è¾™å—ï¼Ÿæ²¡é”™ï¼Œå¾ˆå¤šäººå†™reactå°±è¿™ä¹ˆå†™ï¼Œè€Œä¸”reactä¸­ç»‘å®šhookè·Ÿç»„ä»¶æ›´ç®€å•ï¼Œåªéœ€è¦...å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">function Demo(){<br>    const select = useSelect({<br>        apiFun:getDict<br>    })<br>    // è¿™é‡Œå¯ä»¥ç›´æ¥ç”¨...å°†useSelectè¿”å›çš„å±æ€§ä¸æ–¹æ³•å…¨éƒ¨ç»‘å®šç»™Selectç»„ä»¶<br>    return &lt;Select {...select}&gt;;<br>}<br></code>
```

æ¯”èµ·`vue`çš„`v-bind`å’Œ`v-on`ç®—æ˜¯ç®€ä¾¿äº†ä¸å°‘ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ä¹Ÿèƒ½åšåˆ°å·®ä¸å¤šçš„æ•ˆæœå‘¢ï¼Ÿå°±æ¯”å¦‚èƒ½åšåˆ°`v-xxx="select"`ã€‚

åšä¸»é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯vueçš„è‡ªå®šä¹‰æŒ‡ä»¤äº†ï¼Œæ–‡æ¡£åœ¨è¿™é‡Œ<sup data-darkreader-inline-color="">[3]</sup>ï¼Œä½†æ˜¯æŠ˜è…¾äº†åŠå¤©å‘ç°è¡Œä¸é€šï¼Œå› ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤ä¸»è¦è¿˜æ˜¯é’ˆå¯¹domæ¥çš„ã€‚vueå®˜ç½‘åŸè¯ï¼š

> æ€»çš„æ¥è¯´ï¼Œ**ä¸**æ¨èåœ¨ç»„ä»¶ä¸Šä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ã€‚

é‚£ä¹ˆå°±åªèƒ½è€ƒè™‘æ‰“åŒ…æ’ä»¶äº†ï¼Œåªè¦æˆ‘ä»¬åœ¨`vue`è§£æ`template`ä¹‹å‰æŠŠ`v-xxx="select"`ç¿»è¯‘æˆ`v-bind="select.bindProps" v-on="select.bindEvents"` å°±å¥½äº†ï¼Œå¬èµ·æ¥å¹¶ä¸éš¾ï¼Œåªè¦æˆ‘ä»¬å¼€å‘çš„æ—¶å€™è§„å®šç»‘å®šç»„ä»¶çš„hookè¿”å›æ ¼å¼å¿…é¡»æœ‰`bindProps`å’Œ`bindEvents`å°±å¥½äº†ã€‚

æ€è·¯æœ‰äº†ï¼Œç›´æ¥å¼€å¹²ï¼Œç°åœ¨`vue`å®˜ç½‘çš„é»˜è®¤åˆ›å»ºæ–¹å¼ä¹Ÿæ”¹æˆviteï¼Œæˆ‘ä»¬å°±ç›´æ¥å†™viteçš„æ’ä»¶ï¼ˆä¸æƒ³çœ‹å¯ä»¥è·³åˆ°æœ€åç”¨ç°æˆçš„ï¼‰ï¼š

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">//&nbsp;component-enhance-hook</span><br><span data-darkreader-inline-color="">import</span>&nbsp;<span data-darkreader-inline-color="">type</span>&nbsp;{&nbsp;PluginOption&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vite"</span>;<br><br><span data-darkreader-inline-color="">//&nbsp;å¯ä»¥è‡ªå®šä¹‰hookç»‘å®šçš„å‰ç¼€ã€ç»‘å®šçš„å±æ€§å€¼åˆé›†å¯¹åº”çš„é”®å’Œäº‹ä»¶åˆé›†å¯¹åº”çš„é”®</span><br><span data-darkreader-inline-color="">type</span>&nbsp;HookBindPluginOptions&nbsp;=&nbsp;{<br>&nbsp;&nbsp;prefix?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;bindKey?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>&nbsp;&nbsp;eventKey?:&nbsp;<span data-darkreader-inline-color="">string</span>;<br>};<br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;viteHookBind&nbsp;=&nbsp;(options?:&nbsp;HookBindPluginOptions):&nbsp;<span><span>PluginOption</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;{&nbsp;prefix,&nbsp;bindKey,&nbsp;eventKey&nbsp;}&nbsp;=&nbsp;<span data-darkreader-inline-color="">Object</span>.assign(<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefix:&nbsp;<span data-darkreader-inline-color="">"v-ehb"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bindKey:&nbsp;<span data-darkreader-inline-color="">"bindProps"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventKey:&nbsp;<span data-darkreader-inline-color="">"bindEvents"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;options<br>&nbsp;&nbsp;);<br><br>&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"vite-plugin-vue-component-enhance-hook-bind"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;enforce:&nbsp;<span data-darkreader-inline-color="">"pre"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;transform:&nbsp;<span>(<span>code,&nbsp;id</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;last&nbsp;=&nbsp;id.substring(id.length&nbsp;-&nbsp;<span data-darkreader-inline-color="">4</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(last&nbsp;===&nbsp;<span data-darkreader-inline-color="">".vue"</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;å¤„ç†ä¹‹å‰å…ˆåˆ¤æ–­ä¸€ä¸‹</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">if</span>&nbsp;(code.indexOf(prefix)&nbsp;===&nbsp;<span data-darkreader-inline-color="">-1</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;code;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è·å–&nbsp;template&nbsp;å¼€å¤´</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;templateStrStart&nbsp;=&nbsp;code.indexOf(<span data-darkreader-inline-color="">"&lt;template&gt;"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;è·å–&nbsp;template&nbsp;ç»“å°¾</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;templateStrEnd&nbsp;=&nbsp;code.lastIndexOf(<span data-darkreader-inline-color="">"&lt;/template&gt;"</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;templateStr&nbsp;=&nbsp;code.substring(templateStrStart,&nbsp;templateStrEnd&nbsp;+&nbsp;<span data-darkreader-inline-color="">11</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">let</span>&nbsp;startIndex;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;å¾ªç¯è½¬æ¢&nbsp;template&nbsp;ä¸­çš„hookç»‘å®šæŒ‡ä»¤</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">while</span>&nbsp;((startIndex&nbsp;=&nbsp;templateStr.indexOf(prefix))&nbsp;&gt;&nbsp;<span data-darkreader-inline-color="">-1</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;endIndex&nbsp;=&nbsp;templateStr.indexOf(<span data-darkreader-inline-color="">`"`</span>,&nbsp;startIndex&nbsp;+&nbsp;<span data-darkreader-inline-color="">7</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;str&nbsp;=&nbsp;templateStr.substring(startIndex,&nbsp;endIndex&nbsp;+&nbsp;<span data-darkreader-inline-color="">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;obj&nbsp;=&nbsp;str.split(<span data-darkreader-inline-color="">`"`</span>)[<span data-darkreader-inline-color="">1</span>];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">const</span>&nbsp;newStr&nbsp;=&nbsp;templateStr.replace(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">`v-bind="<span data-darkreader-inline-color="">${obj}</span>.<span data-darkreader-inline-color="">${bindKey}</span>"&nbsp;v-on="<span data-darkreader-inline-color="">${obj}</span>.<span data-darkreader-inline-color="">${eventKey}</span>"`</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templateStr&nbsp;=&nbsp;newStr;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">//&nbsp;æ‹¼æ¥å¹¶è¿”å›</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code.substring(<span data-darkreader-inline-color="">0</span>,&nbsp;templateStrStart)&nbsp;+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templateStr&nbsp;+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code.substring(templateStrEnd&nbsp;+&nbsp;<span data-darkreader-inline-color="">11</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">return</span>&nbsp;code;<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;};<br>};<br></code>
```

åº”ç”¨æ’ä»¶

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;fileURLToPath,&nbsp;URL&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"node:url"</span>;<br><br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;defineConfig&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vite"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;vue&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@vitejs/plugin-vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;vueJsx&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@vitejs/plugin-vue-jsx"</span>;<br><br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;viteHookBind&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./vBindPlugin"</span>;<br><br><span data-darkreader-inline-color="">//&nbsp;https://vitejs.dev/config/</span><br><span data-darkreader-inline-color="">export</span>&nbsp;<span data-darkreader-inline-color="">default</span>&nbsp;defineConfig({<br>&nbsp;&nbsp;plugins:&nbsp;[vue(),&nbsp;vueJsx(),&nbsp;viteHookBind()],<br>&nbsp;&nbsp;resolve:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;alias:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-darkreader-inline-color="">"@"</span>:&nbsp;fileURLToPath(<span data-darkreader-inline-color="">new</span>&nbsp;URL(<span data-darkreader-inline-color="">"./src"</span>,&nbsp;<span data-darkreader-inline-color="">import</span>.meta.url)),<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;},<br>});<br></code>
```

ä¿®æ”¹ä¸€ä¸‹vueä¸­çš„ç”¨æ³•

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor="">&lt;script&nbsp;setup&nbsp;name=<span data-darkreader-inline-color="">"SkeletonView"</span>&nbsp;lang=<span data-darkreader-inline-color="">"ts"</span>&gt;<br><span data-darkreader-inline-color="">import</span>&nbsp;SkeletonView&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/components/SkeletonView/index.vue"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;useAutoSkeletonView&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"./useAutoSkeletonView"</span>;<br><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;listApi&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"@/api"</span>;<br><br><span data-darkreader-inline-color="">const</span>&nbsp;view&nbsp;=&nbsp;useAutoSkeletonView({<br>&nbsp;&nbsp;queryInMount:&nbsp;<span data-darkreader-inline-color="">true</span>,<br>&nbsp;&nbsp;apiFun:&nbsp;listApi,<br>&nbsp;&nbsp;placeholderResult:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"è‹¹æœ"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;<span data-darkreader-inline-color="">1</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"é¦™è•‰"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;<span data-darkreader-inline-color="">2</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;<span data-darkreader-inline-color="">"æ©˜å­"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;<span data-darkreader-inline-color="">3</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;],<br>});<br>&lt;<span data-darkreader-inline-color="">/script&gt;<br><br>&lt;template&gt;<br>&nbsp;&nbsp;&lt;div&nbsp;class="col"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;SkeletonView&nbsp;v-slot="{&nbsp;result&nbsp;}"&nbsp;v-ehb="view"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;result&nbsp;}}&lt;/</span>span&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span data-darkreader-inline-color="">/SkeletonView&gt;<br>&nbsp;&nbsp;&lt;/</span>div&gt;<br>&lt;<span data-darkreader-inline-color="">/template&gt;<br></span></code>
```

OK! å®Œæˆäº†ï¼

### ä½¿ç”¨npmå®‰è£…

ä¸è¿‡æˆ‘ä¹Ÿæå‰æ‰“åŒ…ç¼–è¯‘å¥½äº†å‘å¸ƒåœ¨äº†npmä¸Šï¼Œéœ€è¦çš„è¯å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ª

`npm i vite-plugin-vue-hook-enhance -D`

æ”¹ä¸€ä¸‹å¼•å…¥æ–¹å¼å°±å¯ä»¥äº†

```
<span data-darkreader-inline-bgcolor=""></span><code data-darkreader-inline-color="" data-darkreader-inline-bgimage="" data-darkreader-inline-bgcolor=""><span data-darkreader-inline-color="">import</span>&nbsp;{&nbsp;viteHookBind&nbsp;}&nbsp;<span data-darkreader-inline-color="">from</span>&nbsp;<span data-darkreader-inline-color="">"vite-plugin-vue-hook-enhance"</span>;<br></code>
```

### å‚è€ƒèµ„æ–™

\[1\]

https://juejin.cn/post/7066951709678895141: https://juejin.cn/post/7066951709678895141

\[2\]

https://juejin.cn/post/6945748911147450405: https://juejin.cn/post/6945748911147450405

\[3\]

https://cn.vuejs.org/guide/reusability/custom-directives.html: https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fguide%2Freusability%2Fcustom-directives.html

Node ç¤¾ç¾¤  

```
<section mpa-from-tpl="t" data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-tools="135ç¼–è¾‘å™¨" data-id="89226"><section mpa-from-tpl="t" data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-darkreader-inline-border-top=""><br></section><section mpa-from-tpl="t" data-style="margin-left: 10px; outline: 0px; border-top: 4px solid rgb(68, 68, 68); display: inline-block; width: 50px;" data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-darkreader-inline-border-top=""><br></section></section><p data-style="outline: 0px; color: rgb(34, 34, 34); letter-spacing: 0.544px; white-space: normal; font-family: system-ui, -apple-system, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;" data-darkmode-color="rgb(196, 196, 196)" data-darkmode-original-color="rgb(34, 34, 34)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-darkreader-inline-color=""><span data-style="outline: 0px; color: rgb(63, 63, 63); font-variant-ligatures: common-ligatures; letter-spacing: 0.544px; text-align: left; font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; word-spacing: 0.8px; caret-color: rgb(51, 51, 51);" data-darkmode-color="rgb(167, 167, 167)" data-darkmode-original-color="rgb(63, 63, 63)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-darkreader-inline-color="">æˆ‘ç»„å»ºäº†ä¸€ä¸ªæ°›å›´ç‰¹åˆ«å¥½çš„ Node.js ç¤¾ç¾¤ï¼Œé‡Œé¢æœ‰å¾ˆå¤š Node.jså°ä¼™ä¼´ï¼Œå¦‚æœä½ å¯¹Node.jså­¦ä¹ æ„Ÿå…´è¶£çš„è¯ï¼ˆåç»­æœ‰è®¡åˆ’ä¹Ÿå¯ä»¥ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·è¿›è¡ŒNode.jsç›¸å…³çš„äº¤æµã€å­¦ä¹ ã€å…±å»ºã€‚ä¸‹æ–¹åŠ  è€ƒæ‹‰ å¥½å‹å›å¤ã€ŒNodeã€å³å¯ã€‚</span></p><p data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline=""><img data-cropselx1="0" data-cropselx2="147" data-cropsely1="0" data-cropsely2="178" data-fileid="100016913" data-galleryid="" data-ratio="1.29073482428115" data-s="300,640" data-type="jpeg" data-w="626" data-src="https://mmbiz.qpic.cn/mmbiz_png/YBFV3Da0NwtUt8z7MwaX6yicG6weUJYZ4kDUq34gs35gHuAVHnxrwxSQgclB6MXAyUIogJvUrFgZA7CuuFjNeLA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-original-style="outline: 0px;border-style: none;background-color: rgb(36, 36, 36);color: rgb(18, 18, 18);font-family: -apple-system, system-ui, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;display: initial;visibility: visible !important;width: 236.945px !important;" data-index="2" src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E" _width="236.945px" data-darkreader-inline-outline="" data-darkreader-inline-bgcolor="" data-darkreader-inline-color="" crossorigin="anonymous" alt="Image"></p><pre data-style="margin-bottom: 1rem; outline: 0px; color: rgb(0, 0, 0); font-size: 16px; letter-spacing: 0.544px; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; overflow: auto; font-weight: 700; background-color: rgb(255, 255, 255); text-align: center;" data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline="" data-darkreader-inline-color=""><p data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline=""><span data-darkmode-color="rgb(255, 255, 255)" data-darkmode-original-color="rgb(255, 255, 255)" data-darkmode-bgcolor="rgb(19, 92, 224)" data-darkmode-original-bgcolor="rgb(19, 92, 224)" data-darkreader-inline-outline="" data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">&nbsp;&nbsp;</span><span data-darkmode-color="rgb(230, 230, 230)" data-darkmode-original-color="rgb(0, 0, 0)" data-darkmode-bgcolor="rgb(36, 36, 36)" data-darkmode-original-bgcolor="rgb(255, 255, 255)" data-darkreader-inline-outline=""><span data-darkmode-color="rgb(255, 255, 255)" data-darkmode-original-color="rgb(255, 255, 255)" data-darkmode-bgcolor="rgb(19, 92, 224)" data-darkmode-original-bgcolor="rgb(19, 92, 224)" data-darkreader-inline-outline="" data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">&nbsp;â€œåˆ†äº«ã€ç‚¹èµ</span><span data-darkmode-color="rgb(255, 255, 255)" data-darkmode-original-color="rgb(255, 255, 255)" data-darkmode-bgcolor="rgb(19, 92, 224)" data-darkmode-original-bgcolor="rgb(19, 92, 224)" data-darkreader-inline-outline="" data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">ã€</span><span data-darkmode-color="rgb(255, 255, 255)" data-darkmode-original-color="rgb(255, 255, 255)" data-darkmode-bgcolor="rgb(19, 92, 224)" data-darkmode-original-bgcolor="rgb(19, 92, 224)" data-darkreader-inline-outline="" data-darkreader-inline-color="" data-darkreader-inline-bgcolor="">åœ¨çœ‹â€ æ”¯æŒä¸€ä¸‹</span></span></p></pre>
```