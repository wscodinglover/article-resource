- [ä»€ä¹ˆæ˜¯ monorepo](https://www.kancloud.cn/chandler/web_technology/3076199#_monorepo_2)
- [å¸¸è§](https://www.kancloud.cn/chandler/web_technology/3076199#_11)

- [monorepo å°±ä¸€å®šéœ€è¦ä¸“é—¨çš„å·¥å…·ï¼ˆåº“ï¼‰æ‰èƒ½å®ç°å—ï¼Ÿ](https://www.kancloud.cn/chandler/web_technology/3076199#monorepo__12)
- [monorepo çš„å¥½å¤„](https://www.kancloud.cn/chandler/web_technology/3076199#monorepo__16)
- [å¤ç”¨ packagesï¼šworkspace](https://www.kancloud.cn/chandler/web_technology/3076199#_packagesworkspace_26)

- [lerna](https://www.kancloud.cn/chandler/web_technology/3076199#lerna_61)

- [pnpm](https://www.kancloud.cn/chandler/web_technology/3076199#pnpm_70)

- [ç»Ÿä¸€é…ç½®ï¼šåˆå¹¶åŒç±»é¡¹](https://www.kancloud.cn/chandler/web_technology/3076199#_73)

- [TypeScript](https://www.kancloud.cn/chandler/web_technology/3076199#TypeScript_78)
- [Eslint](https://www.kancloud.cn/chandler/web_technology/3076199#Eslint_92)
- [Babel](https://www.kancloud.cn/chandler/web_technology/3076199#Babel_105)

- [å½“ç„¶è¿˜æœ‰å…¶ä»–äº‹é¡¹](https://www.kancloud.cn/chandler/web_technology/3076199#_135)

- [ç»Ÿä¸€å‘½ä»¤è„šæœ¬](https://www.kancloud.cn/chandler/web_technology/3076199#_136)
- [npm åŒ…æœ¬åœ°å‘å¸ƒ](https://www.kancloud.cn/chandler/web_technology/3076199#npm__140)
- [æ ¼å¼åŒ– commit ä¿¡æ¯](https://www.kancloud.cn/chandler/web_technology/3076199#_commit__143)
- [changelog](https://www.kancloud.cn/chandler/web_technology/3076199#changelog_146)

- [lerna ä¸»è¦èƒ½åŠ›ï¼š](https://www.kancloud.cn/chandler/web_technology/3076199#lerna__147)
- [changesets ä¸»è¦èƒ½åŠ›ï¼š](https://www.kancloud.cn/chandler/web_technology/3076199#changesets_152)

- [lintã€æµ‹è¯•](https://www.kancloud.cn/chandler/web_technology/3076199#lint_159)
- [ç°æœ‰é¡¹ç›®è¿ç§»è‡³ monorepo é¡¹ç›®çš„æ–¹æ³•](https://www.kancloud.cn/chandler/web_technology/3076199#_monorepo__161)

- [JavaScript Monorepo å·¥å…·](https://www.kancloud.cn/chandler/web_technology/3076199#JavaScript__Monorepo__168)

- [Turbo](https://www.kancloud.cn/chandler/web_technology/3076199#Turbo_178)
- [Syncpack](https://www.kancloud.cn/chandler/web_technology/3076199#Syncpack_182)
- [preconstruct](https://www.kancloud.cn/chandler/web_technology/3076199#preconstruct_185)
- [Ultra Runner](https://www.kancloud.cn/chandler/web_technology/3076199#Ultra_Runner_189)
- [manypkg](https://www.kancloud.cn/chandler/web_technology/3076199#manypkg_193)
- [rushjs](https://www.kancloud.cn/chandler/web_technology/3076199#rushjs_196)
- [Bit](https://www.kancloud.cn/chandler/web_technology/3076199#Bit_200)
- [nx](https://www.kancloud.cn/chandler/web_technology/3076199#nx_202)
- [@nrwl/tao](https://www.kancloud.cn/chandler/web_technology/3076199#nrwltao_209)
- [Bolt](https://www.kancloud.cn/chandler/web_technology/3076199#Bolt_212)
- [multipack](https://www.kancloud.cn/chandler/web_technology/3076199#multipack_216)

- [å‚è€ƒ](https://www.kancloud.cn/chandler/web_technology/3076199#_219)

## ä»€ä¹ˆæ˜¯ monorepo

ç¾ `[mÉ‘ËnoÊŠËˆriËpoÊŠ]`

[monorepo-starter](https://github.com/thinkmill/monorepo-starter)  
monorepo æ˜¯ä¸€ä¸ªå•ä¸ª git å­˜å‚¨åº“ï¼Œå¯å®¹çº³å¤šä¸ªåº”ç”¨ç¨‹åºå’Œåº“çš„æºä»£ç ä»¥åŠå®ƒä»¬çš„å·¥å…·ã€‚

ç›®å‰ Babel, Angular, React,Vue, Ember, Meteor, Jest ç­‰è®¸å¤šå¼€æºé¡¹ç›®éƒ½ä½¿ç”¨è¯¥ç§æ¨¡å¼æ¥ç®¡ç†ä»£ç ã€‚  
![](https://img.kancloud.cn/b6/73/b673d8f996d04e30310c930cd6b30f4c_1080x458.png)

## å¸¸è§

## monorepo å°±ä¸€å®šéœ€è¦ä¸“é—¨çš„å·¥å…·ï¼ˆåº“ï¼‰æ‰èƒ½å®ç°å—ï¼Ÿ

ç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ï¼Œåªè¦å°†å¤šä¸ªé¡¹ç›®æ”¾åœ¨ä¸€ä¸ªå­˜å‚¨åº“é‡Œå°±ç®— monorepoã€‚  
ç°åœ¨ä¸»æµçš„ monorepo æ‰€æ‰¿æ‹…çš„è´£ä»»å¹¶ä¸åªæ˜¯å­˜å‚¨çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥æ‰¿æ‹…æ¯”å¦‚ä¾èµ–ç®¡ç†ï¼Œå¢é‡æ„å»ºç­‰ä¸€ç³»åˆ—å·¥ç¨‹åŒ–çš„åŠŸèƒ½ï¼Œå·²ç»æˆä¸ºå·¥ç¨‹åŒ–æŠ€æœ¯ä¸­éå¸¸æœ‰ä»·å€¼çš„ä¸€å—é¢†åŸŸï¼Œæ‰€ä»¥æœ‰æ—¶ä½ ä¸ºäº†å®ç°æŸä¸ªç‰¹æ®Šçš„åŠŸèƒ½ä¸å¾—ä¸å€ŸåŠ©ç¤¾åŒºçš„åŠ›é‡ï¼Œæˆ–è€…ç«™åœ¨å¤§ä½¬çš„è‚©è†€ä¸Šã€‚

## monorepo çš„å¥½å¤„

- **å…±äº«ä»£ç å’Œå¯è§æ€§** - åœ¨æ•´ä¸ªç»„ç»‡ä¸­ä¿æŒä»£ç  DRYã€‚åœ¨ä»£ç åº“ä¸­é‡ç”¨éªŒè¯ä»£ç ã€UI ç»„ä»¶å’Œç±»å‹ã€‚åœ¨åç«¯ã€å‰ç«¯å’Œç¨‹åºåº“ä¹‹é—´é‡ç”¨ä»£ç ã€‚
- **åŸå­æ€§çš„æ›´æ”¹** - æ›´æ”¹ä¸€ä¸ª API æ¥å£ï¼Œå¹¶åœ¨åŒä¸€æäº¤ä¸­ä¿®æ”¹ä½¿ç”¨äº†è¯¥ API çš„ä¸‹æ¸¸åº”ç”¨ç¨‹åºã€‚æ‚¨å¯ä»¥åœ¨åŒä¸€ä¸ªæäº¤ä¸­æ›´æ”¹å…±äº«åº“ä¸­çš„æŒ‰é’®ç»„ä»¶å’Œä½¿ç”¨è¯¥ç»„ä»¶çš„åº”ç”¨ç¨‹åºã€‚monorepo çœå»äº†åœ¨å¤šä¸ªå­˜å‚¨åº“ä¹‹é—´åè°ƒæäº¤çš„éº»çƒ¦ã€‚
- **å¼€å‘äººå‘˜çš„ç§»åŠ¨æ€§** - ä»¥ä¸€è‡´çš„æ–¹å¼æ„å»ºå’Œæµ‹è¯•ä½¿ç”¨ä¸åŒå·¥å…·å’ŒæŠ€æœ¯ç¼–å†™çš„åº”ç”¨ç¨‹åºã€‚å¼€å‘äººå‘˜å¯ä»¥è‡ªä¿¡åœ°ä¸ºå…¶ä»–å›¢é˜Ÿçš„åº”ç”¨ç¨‹åºåšå‡ºè´¡çŒ®ï¼Œå¹¶éªŒè¯ä»–ä»¬çš„æ›´æ”¹æ˜¯å®‰å…¨çš„ã€‚
- **å•ä¸€ç‰ˆæœ¬çš„ä¾èµ–é¡¹** - ä½¿ç”¨æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹çš„å•ä¸ªç‰ˆæœ¬ï¼Œä»è€Œå‡å°‘äº†åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸ä¸€è‡´æ€§ã€‚å¯¹äºè¾ƒå°‘ç§¯æå¼€å‘çš„åº”ç”¨ç¨‹åºä»ç„¶ä¼šä¿æŒä½¿ç”¨åˆ°æœ€æ–°ç‰ˆæœ¬çš„æ¡†æ¶ï¼Œåº“æˆ–æ„å»ºå·¥å…·ã€‚  
  Angular,

## å¤ç”¨ packagesï¼šworkspace

æ¥ä¸‹æ¥ï¼Œç®€å•ç½—åˆ—ä¸€ä¸‹å„ä¸ªåŒ…ç®¡ç†å·¥å…·çš„ workspaces ç‰¹æ€§å’Œæ³¨æ„ç‚¹ï¼ˆä¸»è§‚è§‚ç‚¹ï¼šä»ä¸Šè‡³ä¸‹ï¼Œç”±å·®åˆ°å¥½ï¼‰ã€‚

| **åŒ…ç®¡ç†å·¥å…·**                                                             | **å‡†å¤‡å·¥ä½œ**                  | **ä¾èµ–ç»Ÿä¸€ç®¡ç†**                    | **æ·»åŠ æœ¬åœ°å­é¡¹ç›®ä¸ºä¾èµ–**                    | **æ³¨æ„ç‚¹**                                                                                           |
| -------------------------------------------------------------------------- | ----------------------------- | ----------------------------------- | ------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| [yarn2](https://yarnpkg.com/features/workspaces)                           | é…ç½®`workspaces`å­—æ®µ          | âœ… æ”¯æŒ                             | âš ï¸ æ”¯æŒï¼Œä½†ä½¿ç”¨çš„æ˜¯ yarn2 çš„ workspace åè®® | åŠŸèƒ½å¾ˆå¤šï¼ŒåŸºæœ¬å¯ä»¥å’Œå¤§å‹çš„ monorepo è§£å†³æ–¹æ¡ˆåª²ç¾ã€‚ ä½† yarn2 è‡ªèº«å¯ç”¨æ€§å’Œç¨³å®šæ€§å°šå¾…è€ƒéªŒï¼Œè¯·è°¨æ…é€‰æ‹©ã€‚ |
| [yarn](https://classic.yarnpkg.com/en/docs/workspaces/)                    | é…ç½®`workspaces`å­—æ®µ          | âš ï¸ é»˜è®¤ä¸æ”¯æŒï¼ˆéœ€è¦å…³é—­`nohoist`ï¼‰  | âš ï¸ æ”¯æŒï¼Œä½†ç¬¬ä¸€æ¬¡æ·»åŠ ä¾èµ–éœ€è¦æŒ‡å®šç‰ˆæœ¬å·     | ä¸æ”¯æŒå­é¡¹ç›®ä¸ºä¾èµ– yarn çš„ bug å¤ªå¤šäº†ï¼Œå®˜æ–¹ä¸æ€ä¹ˆç»´æŠ¤ã€‚ å¦‚æœæ²¡æœ‰å¤ªå¤šéœ€æ±‚éœ€è¦å®ç°ï¼Œå¯ä»¥ä¸€è¯•ã€‚         |
| [npm](https://docs.npmjs.com/cli/v7/using-npm/workspaces#using-workspaces) | é…ç½®`workspaces`å­—æ®µ          | âš ï¸ æ”¯æŒï¼ˆå­é¡¹ç›®éœ€è¦é€šè¿‡ä¸“é—¨çš„æŒ‡ä»¤ï¼‰ | âœ… æ”¯æŒ                                     | èµ·æ­¥è¾ƒæ™šï¼Œéœ€è¦å¾ˆæ–°ç‰ˆæœ¬çš„ npm ä½†æ˜¯åŠŸèƒ½ç¨³å®šä¸”å®ç”¨ï¼Œå€¼å¾—ä¸€è¯•                                            |
| [pnpm](https://pnpm.io/zh/workspaces)                                      | æ·»åŠ `pnpm-workspace.yaml`æ–‡ä»¶ | âœ… æ”¯æŒ                             | âš ï¸ æ”¯æŒï¼Œä½†ä½¿ç”¨çš„æ˜¯ pnpm çš„ workspace åè®®  | å¥½ä½¿ ğŸ‘                                                                                              |

ä½¿ç”¨ monorepo ç­–ç•¥åï¼Œæ”¶ç›Šæœ€å¤§çš„ä¸¤ç‚¹æ˜¯ï¼š

1.  é¿å…é‡å¤å®‰è£…åŒ…ï¼Œå› æ­¤å‡å°‘äº†ç£ç›˜ç©ºé—´çš„å ç”¨ï¼Œå¹¶é™ä½äº†æ„å»ºæ—¶é—´ï¼›
2.  å†…éƒ¨ä»£ç å¯ä»¥å½¼æ­¤ç›¸äº’å¼•ç”¨ï¼›

è¿™ä¸¤é¡¹å¥½å¤„å…¨éƒ¨éƒ½å¯ä»¥ç”±ä¸€ä¸ªæˆç†Ÿçš„åŒ…ç®¡ç†å·¥å…·æ¥å®Œæˆï¼Œå¯¹å‰ç«¯å¼€å‘è€Œè¨€ï¼Œå³æ˜¯ yarnï¼ˆ1.0 ä»¥ä¸Šï¼‰æˆ– npmï¼ˆ7.0 ä»¥ä¸Šï¼‰é€šè¿‡åä¸º workspaces çš„ç‰¹æ€§å®ç°çš„ï¼›æ¨èä½¿ç”¨ pnpmï¼›

ä¸ºäº†å®ç°å‰é¢æåˆ°çš„ä¸¤ç‚¹æ”¶ç›Šï¼Œæ‚¨éœ€è¦åœ¨ä»£ç ä¸­åšä¸‰ä»¶äº‹ï¼š

1.  è°ƒæ•´ç›®å½•ç»“æ„ï¼Œå°†ç›¸äº’å…³è”çš„é¡¹ç›®æ”¾ç½®åœ¨åŒä¸€ä¸ªç›®å½•ï¼Œæ¨èå‘½åä¸º **packages**ï¼›
2.  åœ¨é¡¹ç›®æ ¹ç›®å½•é‡Œçš„`package.json`æ–‡ä»¶ä¸­ï¼Œè®¾ç½®`workspaces`å±æ€§ï¼Œå±æ€§å€¼ä¸ºä¹‹å‰åˆ›å»ºçš„ç›®å½•ï¼›
3.  åŒæ ·ï¼Œåœ¨`package.json`æ–‡ä»¶ä¸­ï¼Œè®¾ç½®`private`å±æ€§ä¸º trueï¼ˆä¸ºäº†é¿å…æˆ‘ä»¬è¯¯æ“ä½œå°†ä»“åº“å‘å¸ƒï¼‰ï¼›

ç»è¿‡ä¿®æ”¹ï¼Œæ‚¨çš„é¡¹ç›®ç›®å½•çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·ï¼š

```
.
â”œâ”€â”€ package.json    // `devDependencies`and`scripts`for the monorepo
â””â”€â”€ packages/
    â”œâ”€â”€ @mono/project_1    // ç¤¾åŒºæ¨èä½¿ç”¨ `@<é¡¹ç›®å>/<å­é¡¹ç›®å>` çš„æ–¹å¼å‘½å
    â”‚   â”œâ”€â”€ index.js
    â”‚   â””â”€â”€ package.json    // `dependencies`, unique`devDependencies`and`scripts`for the package
    â””â”€â”€ @mono/project_2/
    â”‚   â”œâ”€â”€ index.js
    â”‚   â””â”€â”€ package.json
```

å¤åˆ¶

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† monorepo ç­–ç•¥çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®åœ¨æ˜¯å¾ˆå®¹æ˜“ä¸æ˜¯å—ï¼Ÿä½†æ˜¯è€è¯è¯´ã€Œè¡Œç™¾é‡Œè€…åŠä¹åã€ï¼Œè·ç¦»ä¼˜é›…çš„æ­å»ºä¸€ä¸ª monorepo é¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›è·¯è¦èµ°ã€‚

## lerna

`mono-repo`æœ€å‡ºåæ˜¯ä½¿ç”¨ [Lerna](https://github.com/lerna/lerna/) ç®¡ç† workspacesã€‚ï¼ˆå‚è§ï¼šNode - å¸¸ç”¨åº“ï¼‰

- ä½¿ç”¨`lerna bootstrap --hoist`å¯ä»¥å°†å­é¡¹ç›®çš„`node_modules`æå‡åˆ°é¡¶å±‚ï¼Œè§£å†³`node_modules`é‡å¤çš„é—®é¢˜ã€‚
- ä½†æ˜¯`lerna bootstrap --hoist`åœ¨æå‡æ—¶å¦‚æœé‡åˆ°å„ä¸ªå­é¡¹ç›®å¼•ç”¨çš„ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä¼šæå‡ä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬ï¼Œä»è€Œå¯¼è‡´å°‘æ•°æ´¾é‚£ä¸ªæ‰¾ä¸åˆ°æ­£ç¡®çš„ä¾èµ–ï¼Œå‘ç”Ÿé”™è¯¯ã€‚
- ä¸ºäº†è§£å†³æå‡æ—¶ç‰ˆæœ¬å†²çªçš„é—®é¢˜ï¼Œå¼•å…¥äº†`yarn workspace`ï¼Œä»–ä¹Ÿä¼šæå‡ç”¨çš„æœ€å¤šçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¼šä¸ºå°‘æ•°æ´¾ä¿ç•™è‡ªå·±çš„ä¾èµ–åœ¨è‡ªå·±çš„`node_modules`ä¸‹é¢ã€‚
- å‘å¸ƒçš„æ—¶å€™ä½¿ç”¨`lerna publish`ï¼Œå®ƒä¼šè‡ªåŠ¨æ›´æ–°å†…éƒ¨ä¾èµ–ï¼Œå¹¶æ›´æ–°å„ä¸ªå­é¡¹ç›®è‡ªå·±çš„ç‰ˆæœ¬å·ã€‚
- å­é¡¹ç›®çš„ç‰ˆæœ¬å·è§„åˆ™å¯ä»¥åœ¨`lerna.json`é‡Œé¢é…ç½®ï¼Œå¦‚æœé…ç½®ä¸ºå›ºå®šç‰ˆæœ¬å·ï¼Œåˆ™å„ä¸ªå­é¡¹ç›®ä¿æŒä¸€è‡´çš„ç‰ˆæœ¬ï¼Œå¦‚æœé…ç½®ä¸º`independent`å…³é”®å­—ï¼Œå„ä¸ªå­é¡¹ç›®å¯ä»¥æœ‰è‡ªå·±ä¸åŒçš„ç‰ˆæœ¬å·ã€‚

## pnpm

[pnpm](https://pnpm.io/zh/workspaces) æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œå®ƒå°†`node_modules`ä»ä¸€ä¸ªå•ä¸€çš„å¯å¯»å€å­˜å‚¨è¿æ¥(links)èµ·æ¥ï¼Œä½¿å¾—å®‰è£…é€Ÿåº¦æ›´å¿«ï¼Œ`node_module`çš„ç›®å½•æ›´å°ã€‚å®ƒæœ‰åƒ yarn workspaces è¿™æ ·çš„å·¥ä½œç©ºé—´åŠŸèƒ½ï¼Œå½“æ¶‰åŠåˆ° node åº”ç”¨æ—¶ï¼Œå®ƒæ˜¯ monorepo å¼€å‘çš„ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚

## ç»Ÿä¸€é…ç½®ï¼šåˆå¹¶åŒç±»é¡¹

( - Eslintï¼ŒTypescript ä¸ Babel ç­‰)

æ‚¨ä¸€å®šåŒæ„ï¼Œç¼–å†™ä»£ç è¦éµå¾ª DRY åŸåˆ™ï¼ˆDon't Repeat Yourself çš„ç¼©å†™ï¼‰ã€‚é‚£ä¹ˆï¼Œç†æ‰€å½“ç„¶åœ°ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…åœ¨å¤šä¸ªå­é¡¹ç›®ä¸­æ”¾ç½®é‡å¤çš„ eslintrcï¼Œtsconfig ç­‰é…ç½®æ–‡ä»¶ã€‚å¹¸è¿çš„æ˜¯ï¼ŒBabelï¼ŒEslint å’Œ Typescript éƒ½æä¾›äº†ç›¸åº”çš„åŠŸèƒ½è®©æˆ‘ä»¬å‡å°‘è‡ªæˆ‘é‡å¤ã€‚

## TypeScript

æˆ‘ä»¬å¯ä»¥åœ¨ packages ç›®å½•ä¸­æ”¾ç½®`tsconfig.settting.json`æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å®šä¹‰é€šç”¨çš„ ts é…ç½®ï¼Œç„¶åï¼Œåœ¨æ¯ä¸ªå­é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`extends`å±æ€§ï¼Œå¼•å…¥é€šç”¨é…ç½®ï¼Œå¹¶è®¾ç½®`compilerOptions.composite`çš„å€¼ä¸º`true`ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œå­é¡¹ç›®ä¸­çš„`tsconfig`æ–‡ä»¶åº”è¯¥ä»…åŒ…å«ä¸‹è¿°å†…å®¹ï¼š

```
{
    "extends": "../tsconfig.setting.json",    // ç»§æ‰¿ packages ç›®å½•ä¸‹é€šç”¨é…ç½®
    "compilerOptions": {
        "composite": true,    // ç”¨äºå¸®åŠ© TypeScript å¿«é€Ÿç¡®å®šå¼•ç”¨å·¥ç¨‹çš„è¾“å‡ºæ–‡ä»¶ä½ç½®
        "outDir": "dist",
        "rootDir": "src"
    },
    "include": ["src"]
}
```

å¤åˆ¶

## Eslint

å¯¹äº Eslint é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¦‚æ³•ç‚®åˆ¶ï¼Œè¿™æ ·å®šä¹‰å­é¡¹ç›®çš„`.eslintrc`æ–‡ä»¶å†…å®¹ï¼š

```
{
    "extends": "../../.eslintrc", // æ³¨æ„è¿™é‡Œçš„ä¸åŒ
    "parserOptions": {
     "project": "tsconfig.json"
    }
}
```

å¤åˆ¶

æ³¨æ„åˆ°äº†å—ï¼Œå¯¹äºé€šç”¨çš„ eslint é…ç½®ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å°†å…¶æ”¾ç½®åœ¨ packages ç›®å½•ä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨æ•´ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè¿™æ ·åšæ˜¯**å› ä¸ºä¸€äº›ç¼–è¾‘å™¨æ’ä»¶åªä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å¯»æ‰¾**`.eslintrc`æ–‡ä»¶ï¼Œå› æ­¤ä¸ºäº†æˆ‘ä»¬çš„é¡¹ç›®èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„ã€Œå¼€å‘ç¯å¢ƒä¸€è‡´æ€§ã€ï¼Œè¯·åŠ¡å¿…å°†é€šç”¨é…ç½®æ–‡ä»¶æ”¾ç½®åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ã€‚

## Babel

> [Config Files Â· Babel](https://babeljs.io/docs/en/config-files#monorepos)

Babel é…ç½®æ–‡ä»¶åˆå¹¶çš„æ–¹å¼ä¸ TypeScript å¦‚å‡ºä¸€è¾™ï¼Œç”šè‡³æ›´åŠ ç®€å•ï¼Œæˆ‘ä»¬åªéœ€åœ¨å­é¡¹ç›®ä¸­çš„`.babelrc`æ–‡ä»¶ä¸­è¿™æ ·å£°æ˜å³å¯ï¼š

```
{ "extends": "../.babelrc" }
```

å¤åˆ¶

å½“ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•åº”è¯¥å¤§è‡´å‘ˆå¦‚ä¸‹æ‰€ç¤ºçš„ç»“æ„ï¼š

```
.
â”œâ”€â”€ package.json
â”œâ”€â”€ .eslintrc
â””â”€â”€ packages/
â”‚   â”œâ”€â”€ tsconfig.settings.json
â”‚   â”œâ”€â”€ .babelrc
â”œâ”€â”€ @mono/project_1/
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ .eslintrc
â”‚   â”œâ”€â”€ .babelrc
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ package.json
â””â”€â”€â”€@mono/project_2/
    â”œâ”€â”€ index.js
    â”œâ”€â”€ .eslintrc
    â”œâ”€â”€ .babelrc
    â”œâ”€â”€ tsconfig.json
    â””â”€â”€ package.json
```

å¤åˆ¶

## å½“ç„¶è¿˜æœ‰å…¶ä»–äº‹é¡¹

## ç»Ÿä¸€å‘½ä»¤è„šæœ¬

## npm åŒ…æœ¬åœ°å‘å¸ƒ

ä½“éªŒä¸€æŠŠä½¿ç”¨ ç®¡ç†/å‘å¸ƒ monorepo é¡¹ç›®çš„æ„Ÿè§‰ã€‚å°†ç¤ºä¾‹ä»£ç å‘å¸ƒåˆ°çœŸå®ä¸–ç•Œçš„ npm ä»“åº“å¹¶éä¸€ä¸ªå¥½ä¸»æ„ï¼Œå¯ä»¥ä½¿ç”¨ Verdaccio åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª npm ä»“åº“ä½œä¸ºä»£ç†ã€‚

## æ ¼å¼åŒ– commit ä¿¡æ¯

## changelog

#### lerna ä¸»è¦èƒ½åŠ›ï¼š

1.  ç”Ÿæˆæ–°ç‰ˆæœ¬ã€‚
2.  lerna-changelog åªèƒ½ç”Ÿæˆä¸€å¥— changelogï¼Œæ‰€æœ‰åŒ…éƒ½ä¸€æ ·
3.  ä¸€é”®å‘å¸ƒæ‰€æœ‰åŒ…

#### changesets ä¸»è¦èƒ½åŠ›ï¼š

1.  æ¯ä¸ªåŒ…åˆ†åˆ«ç”Ÿæˆæ–°ç‰ˆæœ¬ã€‚
2.  åˆ†åˆ«ç”Ÿæˆ changelog
3.  ä¸€é”®å‘å¸ƒ

changesets ç›¸æ¯”äº lerna æœ€å…³é”®çš„åœ°æ–¹åœ¨äºæ›´**çµæ´»**å’Œæ›´**ç»†ç²’åº¦**çš„æ§åˆ¶æ¯ä¸ª packageã€‚

## lintã€æµ‹è¯•

```
eslintã€prettierã€ lint-staged
```

å¤åˆ¶

## ç°æœ‰é¡¹ç›®è¿ç§»è‡³ monorepo é¡¹ç›®çš„æ–¹æ³•

```
ä½¿ç”¨ tomonoï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ª shell è„šæœ¬
```

å¤åˆ¶

## JavaScript Monorepo å·¥å…·

> [JavaScript Monorepo Tooling](https://dev.to/hipstersmoothie/javascript-monorepo-tooling-48b9)

è¿™äº›å·¥å…·çš„åŠŸèƒ½å¯ä»¥ç»„ç»‡æˆ 3 ä¸ªåŠŸèƒ½ï¼š  
`installer` - å¸®åŠ©å®‰è£… monorepo ä¾èµ–é¡¹çš„å·¥å…·  
`task-runner` - å¸®åŠ©åœ¨æ•´ä¸ª repo ä¸­è¿è¡Œå‘½ä»¤æˆ–è„šæœ¬çš„å·¥å…·ï¼Œå¹¶å¯èƒ½åœ¨ repo ä¸­åˆ›å»ºæ–° package  
`publisher` - å¸®åŠ©/å¼ºåˆ¶å‘ monorepo è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„å·¥å…·

æŸäº›å·¥å…·å…·æœ‰å¤šç§åŠŸèƒ½ï¼Œå¯ä»¥åŒ…å«å¤šç§åŠŸèƒ½ã€‚

## Turbo

[Turborepo](https://turborepo.org/)  
Turborepo æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ JavaScript å’Œ TypeScript ä»£ç åº“æ„å»ºç³»ç»Ÿã€‚

## Syncpack

[Syncpack](https://github.com/JamieMason/syncpack) æ˜¯ monorepo ä¾èµ–ç®¡ç†å·¥å…·ã€‚å¦‚æœä½ æ›¾ç»çº ç»“äºè½¯ä»¶åŒ…ä¹‹é—´çš„ç»†å¾®ä¾èµ–å·®å¼‚ï¼Œæˆ–è€…ç»´æŠ¤ç»Ÿä¸€çš„`package.json` ã€‚é‚£ä¹ˆä½ å°±å¯ä»¥æƒ³è±¡ Syncpack æœ‰å¤šæœ‰ç”¨äº†

## preconstruct

[preconstruct/preconstruct](https://github.com/preconstruct/preconstruct)  
ğŸ Dev and build your code painlessly in monorepos

## Ultra Runner

[folke/ultra-runner: ğŸƒâ›° Ultra fast monorepo script runner and build tool (github.com)](https://github.com/folke/ultra-runner)  
ğŸƒâ›°ï¸ è¶…å¿«é€Ÿ monorepo è„šæœ¬è¿è¡Œå™¨å’Œæ„å»ºå·¥å…·

## manypkg

[Thinkmill/manypkg: â˜”ï¸ An umbrella for your monorepo (github.com)](https://github.com/Thinkmill/manypkg)

## rushjs

[@microsoft/rush](https://rushjs.io/)  
Rush æ˜¯ç”±å¾®è½¯å¼€å‘çš„ monorepo è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ç»“åˆ pnpm æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥è§£å†³äº†å¾ˆå¤š yarn å’Œ npm çš„é—®é¢˜ï¼ŒåŒæ—¶å…·å¤‡ç€æ›´å¼ºå¤§çš„é“¾è·¯è®¾æ–½ã€‚

## Bit

## nx

[Nx: Smart, Extensible Build Framework](https://nx.dev/)  
[https://github.com/nrwl/nx](https://github.com/nrwl/nx)  
éšç€å­˜å‚¨æºä»£ç çš„ monorepo ç­–ç•¥çš„æ—¥ç›Šæµè¡Œï¼Œåœ¨ monorepo ä¸­ç®¡ç†é¡¹ç›®çš„å·¥å…·ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæ¯”å¦‚[Bazel](https://bazel.build/)ã€[Lerna](https://lerna.js.org/)ã€[changesets](https://github.com/atlassian/changesets)ã€[Rush](https://rushjs.io/)æˆ–[Nx](https://nx.dev/)ã€‚

NX ç”± [NRWL](https://nrwl.io/) å‘å¸ƒï¼Œè¯¥å…¬å¸æ˜¯ä¸€å®¶å’¨è¯¢å…¬å¸ï¼Œè¯¥å…¬å¸çš„ä½¿å‘½æ˜¯å¸®åŠ©å®¢æˆ·æ›´å¥½åœ°æ„å»ºè½¯ä»¶å¹¶æ›´å¿«ã€‚NRWL ä¸“ä¸ºå¸®åŠ©è½¯ä»¶ç»„ç»‡è€Œåˆ¶é€ çš„ NX æ›´åŠ å¯Œæœ‰æˆæ•ˆï¼Œä»¥æ›´å®‰å…¨ï¼Œå¯é¢„æµ‹å’Œå¯æ‰©å±•çš„æ–¹å¼ç»„ç»‡å…¶ä»£ç ã€‚NRWL æ­£åœ¨ç§¯ææ„å»º NX å‘¨å›´çš„ç¤¾åŒºï¼ŒåŒ…æ‹¬åšå®¢å¸–å­ï¼ŒåŸ¹è®­å’Œå’¨è¯¢ï¼Œä»¥ååŠ©ç»„ç»‡é‡‡ç”¨ NXã€‚

## @nrwl/tao

[@nrwl/tao](https://github.com/nrwl/nx)

## Bolt

[Bolt](https://github.com/boltpkg/bolt) æ—¨åœ¨æˆä¸ºä¸€ä¸ªâ€œè¶…çº§åŠŸèƒ½ JavaScript é¡¹ç›®ç®¡ç†å·¥å…·â€ã€‚  
Bolt åœ¨ Yarn çš„åŸºç¡€ä¸Šå®ç°äº† workspaces çš„æ¦‚å¿µã€‚Bolt CLI åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ Yarn CLI çš„æ›¿ä»£å“ï¼Œä½ å¯ä»¥åœ¨ä»»ä½• Yarn é¡¹ç›®ä¸­ä½¿ç”¨å®ƒã€‚

## multipack

[episclera/multipack: ğŸ”± All in one tool for monorepos. (github.com)](https://github.com/episclera/multipack)

## å‚è€ƒ

> [korfuri/awesome-monorepo: A curated list of awesome Monorepo tools, software and architectures.](https://github.com/korfuri/awesome-monorepo)  
> [å¦‚ä½•åˆ©ç”¨ monorepo ç­–ç•¥ç®¡ç†ä»£ç ï¼Ÿ](https://mp.weixin.qq.com/s/ZP2IigNVSIZKGuYxNYOYgw)  
> [Monorepo çš„è¿™äº›å‘ï¼Œæˆ‘ä»¬å¸®ä½ è¸©è¿‡äº†ï¼ (qq.com)](https://mp.weixin.qq.com/s/PIdmJ2cHmq9QBj6MBJ9ygQ)
